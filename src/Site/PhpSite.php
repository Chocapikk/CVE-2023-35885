<?php
 namespace App\Site; use App\Entity\PhpSettings; use App\System\CommandExecutor; use App\System\Command\CatFileCommand; class PhpSite extends Site { private const TYPE = "\x70\x68\160"; protected string $type = self::TYPE; private ?PhpSettings $phpSettings = null; private bool $varnishCache = false; private ?string $varnishCacheSettingsFile = null; private array $varnishCacheSettings = []; public function setPhpSettings(PhpSettings $phpSettings) : void { $this->phpSettings = $phpSettings; } public function getPhpSettings() : ?PhpSettings { return $this->phpSettings; } public function setVarnishCache(bool $flag) : void { $this->varnishCache = $flag; } public function getVarnishCache() : bool { return $this->varnishCache; } public function setVarnishCacheSettings(array $varnishCacheSettings) : void { $this->varnishCacheSettings = $varnishCacheSettings; } public function getVarnishCacheSettings() : array { goto bc61d; aa50b: return $this->varnishCacheSettings; goto Fffb4; Bafd1: try { goto a62c9; Df93e: $varnishCacheSettings = trim($varnishCacheSettingsFileCatCommand->getOutput()); goto f9057; a62c9: $varnishCacheSettingsFile = $this->getVarnishCacheSettingsFile(); goto Fdaca; f6117: $varnishCacheSettingsFileCatCommand = new CatFileCommand(); goto Dbdc0; d75d6: ea047: goto ede15; Dbdc0: $varnishCacheSettingsFileCatCommand->setFile($varnishCacheSettingsFile); goto D5289; F80ae: $this->varnishCacheSettings = $varnishCacheSettings; goto E02ec; b5e36: if (!(false === empty($varnishCacheSettings) && true === is_array($varnishCacheSettings))) { goto d7a44; } goto F80ae; Fdaca: $commandExecutor = new CommandExecutor(); goto f6117; d18bb: $varnishCacheSettings = @json_decode($varnishCacheSettings, true); goto b5e36; E02ec: d7a44: goto d75d6; f9057: if (!(false === empty($varnishCacheSettings))) { goto ea047; } goto d18bb; D5289: $commandExecutor->execute($varnishCacheSettingsFileCatCommand, 10); goto Df93e; ede15: } catch (\Exception $e) { $errorMessage = $e->getMessage(); } goto b27db; bc61d: if (!(true === empty($this->varnishCacheSettings))) { goto e98ed; } goto Bafd1; b27db: e98ed: goto aa50b; Fffb4: } public function setVarnishCacheSettingsFile(?string $varnishCacheSettingsFile) : void { $this->varnishCacheSettingsFile = $varnishCacheSettingsFile; } public function getVarnishCacheSettingsFile() : ?string { goto f6139; Ab30a: B499c: goto b879c; F4a7f: $this->varnishCacheSettingsFile = sprintf("\57\x68\157\155\145\57\45\163\57\x2e\x76\141\162\x6e\x69\x73\x68\55\x63\x61\x63\150\145\x2f\163\x65\164\164\x69\156\147\x73\x2e\x6a\x73\x6f\x6e", $user); goto Ab30a; Fcab7: $user = $this->getUser(); goto F4a7f; b879c: return $this->varnishCacheSettingsFile; goto D52ab; f6139: if (!(true === is_null($this->varnishCacheSettingsFile))) { goto B499c; } goto Fcab7; D52ab: } }

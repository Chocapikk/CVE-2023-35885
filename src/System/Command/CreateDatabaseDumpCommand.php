<?php
 namespace App\System\Command; use App\System\Command; use App\Entity\Database as DatabaseEntity; class CreateDatabaseDumpCommand extends Command { private ?DatabaseEntity $databaseEntity; private ?string $file = null; private string $mysqlDumpOptions = "\x2d\x2d\146\x6f\x72\143\x65\40\x2d\x2d\157\x70\164\40\55\x2d\x73\x69\x6e\x67\x6c\145\55\x74\162\141\156\x73\x61\x63\x74\x69\x6f\156\40\55\55\x71\x75\x69\x63\153"; public function getCommand() : string { goto e2172; A9c99: $file = $this->getFile(); goto A5f5d; e2172: if ($this->command) { goto b6edf; } goto bcff8; aad4f: if (!(false === is_null($runAsUser))) { goto c1d56; } goto dcb73; fea5d: $mysqlDumpOptions = $this->getMySQLDumpOptions(); goto A9c99; bcff8: $databaseEntity = $this->getDatabaseEntity(); goto c047d; E1c06: $this->command = sprintf("\x25\163\40\57\165\x73\x72\x2f\142\x69\x6e\57\155\171\163\161\154\144\165\x6d\x70\40\45\x73\40\55\150\x25\163\x20\55\x50\45\x73\40\x2d\165\x25\x73\x20\x2d\160\45\163\x20\45\163\x20\45\x73\40\174\x20\x25\163\x20\57\165\163\x72\x2f\x62\151\156\57\x74\x65\145\40\x25\163\x20\76\x20\x2f\x64\x65\x76\57\x6e\x75\x6c\x6c", $sudo, $mysqlDumpOptions, escapeshellarg($databaseServerEntity->getHost()), escapeshellarg($databaseServerEntity->getPort()), escapeshellarg($databaseServerEntity->getUserName()), escapeshellarg($databaseServerEntity->getDecryptedPassword()), escapeshellarg($databaseEntity->getName()), true === $compress ? sprintf("\x7c\40\x25\163\x20\57\x62\x69\x6e\x2f\x67\172\151\160", $sudo) : '', $sudo, $file); goto b7d6f; a6286: $sudo = "\57\165\x73\162\x2f\x62\x69\x6e\57\x73\x75\x64\157"; goto aad4f; Ae962: c1d56: goto E1c06; c047d: $databaseServerEntity = $databaseEntity->getDatabaseServer(); goto fea5d; Ec15b: $compress = "\x67\172" == substr($file, -2) ? true : false; goto a6286; dcb73: $sudo = sprintf("\x2f\x75\163\162\x2f\x62\x69\x6e\x2f\163\x75\x64\x6f\40\55\165\40\45\163", escapeshellarg($runAsUser)); goto Ae962; Eef93: return $this->command; goto f3646; b7d6f: b6edf: goto Eef93; A5f5d: $runAsUser = $this->getRunAsUser(); goto Ec15b; f3646: } public function isSuccessful() : bool { return true; } public function setDatabaseEntity(DatabaseEntity $databaseEntity) { $this->databaseEntity = $databaseEntity; } public function getDatabaseEntity() : ?DatabaseEntity { return $this->databaseEntity; } public function setFile(string $file) : void { $this->file = $file; } public function getFile() { return $this->file; } public function setMySQLDumpOptions($mysqlDumpOptions) : void { $this->mysqlDumpOptions = $mysqlDumpOptions; } public function getMySQLDumpOptions() : string { return $this->mysqlDumpOptions; } }

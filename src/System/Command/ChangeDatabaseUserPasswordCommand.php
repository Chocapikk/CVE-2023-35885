<?php
 namespace App\System\Command; use App\System\Command; use App\Entity\DatabaseServer; class ChangeDatabaseUserPasswordCommand extends Command { const USER_NAME_ROOT = "\x72\x6f\x6f\x74"; private ?string $userName = null; private ?string $newPassword = null; private $alterUserCommandTmpFile = null; private $clientCredentialsTmpFile = null; private ?DatabaseServer $databaseServer = null; public function getCommand() : string { goto B2d74; ad210: return $this->command; goto B93a2; f4e3d: $this->alterUserCommandTmpFile = tmpfile(); goto bdb7d; aedeb: $databaseServerPort = $databaseServer->getPort(); goto Cb22d; d7cf5: $databaseServerHost = $databaseServer->getHost(); goto A5b0b; da593: $updateUserPasswordCommand = "\101\114\124\105\122\40\125\123\105\122\x20\x27\173\173\x75\163\x65\162\x4e\141\x6d\145\175\x7d\47\100\47\45\x27\40\x49\104\x45\116\x54\111\x46\x49\x45\x44\40\x42\x59\40\x27\173\x7b\x70\x61\x73\x73\x77\x6f\162\x64\175\175\x27\x3b" . PHP_EOL; goto F3b70; bdb7d: $alterUserCommandTmpFile = stream_get_meta_data($this->alterUserCommandTmpFile)["\165\x72\x69"]; goto e7127; D01d5: $clientCredentialsTmpFile = stream_get_meta_data($this->clientCredentialsTmpFile)["\165\162\151"]; goto cf9d7; fce41: $updateUserPasswordCommand = "\x41\x4c\x54\x45\122\40\125\123\x45\x52\40\47\173\x7b\x75\163\x65\x72\x4e\141\155\x65\175\175\47\100\x27\x31\62\x37\x2e\60\x2e\60\x2e\x31\x27\x20\111\x44\105\x4e\124\x49\x46\111\105\104\x20\x42\x59\40\47\x7b\173\160\x61\163\x73\167\x6f\x72\144\x7d\x7d\x27\x3b" . PHP_EOL; goto c4d8f; cf9d7: file_put_contents($clientCredentialsTmpFile, $clientCredentialsCommand); goto e7999; Fb74f: $updateUserPasswordCommand .= "\x46\154\165\163\150\40\120\x72\x69\166\x69\154\145\x67\x65\163\x3b"; goto dbd3e; e040a: $databaseServer = $this->getDatabaseServer(); goto d7cf5; c4d8f: Dc4c8: goto Fb74f; B91a7: b24cd: goto ad210; e7127: file_put_contents($alterUserCommandTmpFile, $updateUserPasswordCommand); goto ef74c; e407c: $userName = $this->getUserName(); goto Addbf; a0d0b: e8dec: goto fce41; dbd3e: $updateUserPasswordCommand = str_replace(["\173\173\165\163\145\x72\116\141\155\x65\175\x7d", "\173\173\x70\141\x73\x73\x77\157\162\x64\175\x7d"], [$userName, addslashes($newPassword)], $updateUserPasswordCommand); goto bd597; Cb22d: $newPassword = $this->getNewPassword(); goto e407c; bd597: $clientCredentialsCommand = "\133\143\x6c\151\x65\x6e\x74\135\xa\x75\x73\145\x72\x3d\x7b\173\x75\163\145\x72\x4e\141\155\145\175\175\12\x70\141\163\x73\x77\157\162\x64\75\x7b\x7b\160\x61\163\163\x77\x6f\162\144\x7d\175\xa\150\157\x73\164\x3d\173\173\150\x6f\163\x74\175\175\12\x70\157\x72\164\75\173\173\160\157\162\x74\175\175"; goto f4e3d; ef74c: $clientCredentialsCommand = str_replace(["\x7b\x7b\x75\163\145\x72\x4e\x61\155\x65\175\175", "\x7b\173\x70\141\x73\x73\167\157\x72\x64\x7d\175", "\173\173\150\157\x73\x74\x7d\x7d", "\173\173\160\157\162\164\x7d\175"], [$databaseServerUserName, $databaseServerPassword, $databaseServerHost, $databaseServerPort], $clientCredentialsCommand); goto Bb1dc; A5b0b: $databaseServerUserName = $databaseServer->getUserName(); goto aae49; Bb1dc: $this->clientCredentialsTmpFile = tmpfile(); goto D01d5; B2d74: if ($this->command) { goto b24cd; } goto e040a; Addbf: if (self::USER_NAME_ROOT == $userName) { goto e8dec; } goto da593; F3b70: goto Dc4c8; goto a0d0b; e7999: $this->command = sprintf("\x2f\x75\x73\162\x2f\x62\151\x6e\x2f\x73\165\x64\x6f\x20\57\165\x73\162\57\x62\151\x6e\57\155\x79\163\x71\x6c\40\55\x2d\x64\x65\x66\141\x75\154\x74\163\55\x65\170\164\162\x61\55\x66\x69\154\145\75\x25\x73\x20\74\x20\x25\163", $clientCredentialsTmpFile, $alterUserCommandTmpFile); goto B91a7; aae49: $databaseServerPassword = $databaseServer->getPassword(); goto aedeb; B93a2: } public function isSuccessful() : bool { $output = $this->getOutput(); return true; } public function setDatabaseServer(DatabaseServer $databaseServer) { $this->databaseServer = $databaseServer; } public function getDatabaseServer() { return $this->databaseServer; } public function setUserName($userName) { $this->userName = $userName; } public function getUserName() { return $this->userName; } public function setNewPassword($newPassword) { $this->newPassword = $newPassword; } public function getNewPassword() { return $this->newPassword; } }

<?php
 namespace App\Database; use App\Entity\Database as DatabaseEntity; use App\System\CommandExecutor; use App\System\Command\CreateDirectoryCommand; use App\System\Command\CreateDatabaseDumpCommand; class Exporter { private DatabaseEntity $databaseEntity; private CommandExecutor $commandExecutor; private ?string $file = null; private ?string $runAsUser = null; public function __construct(DatabaseEntity $databaseEntity) { $this->databaseEntity = $databaseEntity; $this->commandExecutor = new CommandExecutor(); } public function setFile(string $file) : void { $this->file = $file; } public function getFile() : ?string { return $this->file; } public function setRunAsUser(string $userName) : void { $this->runAsUser = $userName; } public function getRunAsUser() : ?string { return $this->runAsUser; } public function createOutputDirectory() { goto D28b3; F29ce: $createOutputDirectoryCommand->setDirectory($outputDirectory); goto bdcf4; c4c17: $outputDirectory = sprintf("\x25\x73\57", dirname($file)); goto e6ef8; D28b3: $file = $this->getFile(); goto c4c17; bdcf4: $this->commandExecutor->execute($createOutputDirectoryCommand); goto Af04a; e6ef8: $createOutputDirectoryCommand = new CreateDirectoryCommand(); goto F29ce; Af04a: } private function addCreateDatabaseDumpCommand() { goto E608a; A684b: $createDatabaseDumpCommand->setDatabaseEntity($this->databaseEntity); goto Bc066; cc966: a70a8: goto A684b; E608a: $file = $this->getFile(); goto Eb00f; Bc066: $createDatabaseDumpCommand->setFile($file); goto Ebc00; C3dc4: if (!(false === is_null($this->runAsUser))) { goto a70a8; } goto E79c8; Ebc00: $this->commandExecutor->execute($createDatabaseDumpCommand, 7200); goto fd7b2; Eb00f: $createDatabaseDumpCommand = new CreateDatabaseDumpCommand(); goto C3dc4; E79c8: $createDatabaseDumpCommand->setRunAsUser($this->runAsUser); goto cc966; fd7b2: } public function export() : void { $this->addCreateDatabaseDumpCommand(); } }

<?php
 namespace App\Controller\Admin; use Symfony\Component\Form\FormError; use Symfony\Component\HttpFoundation\Request; use Symfony\Component\HttpFoundation\Response; use Symfony\Component\Form\Extension\Core\Type\SubmitType; use Symfony\Component\Form\Form; use Twig\Environment as Twig; use App\Controller\Controller; use App\Entity\Manager\ConfigManager; use App\CloudPanel\Environment as CloudPanelEnvironment; use App\Gce\Snapshot; use App\Event\EventQueue; class GceController extends Controller { public function settings(Request $request, ConfigManager $configManager) : Response { goto B895d; cc264: $response = $this->handleServiceAccountKeysForm($request, $serviceAccountKeysForm, $configManager); goto c949b; ad856: D879c: goto Ff0ca; e8721: eabc2: goto ab1b2; abd0b: $serviceAccountKeysForm->handleRequest($request); goto D33ef; a81bc: $response = $this->render("\101\144\x6d\x69\x6e\57\x47\x63\145\x2f\123\x65\x74\x74\151\x6e\147\163\57\x69\156\x64\x65\170\56\x68\164\155\x6c\x2e\164\167\x69\147", ["\163\145\x72\x76\151\x63\x65\x41\x63\143\x6f\x75\x6e\164\x4b\145\x79\x73\x46\x6f\x72\x6d" => $serviceAccountKeysForm->createView(), "\163\156\141\x70\163\x68\157\164\163\123\145\164\x74\x69\156\147\x73\x46\x6f\162\155" => $snapshotsSettingsForm->createView(), "\146\x6f\162\x6d\x45\x72\162\x6f\x72\163" => $this->formErrors]); goto B378f; cac00: $response = $this->handleSnapshotsSettingsForm($request, $snapshotsSettingsForm, $configManager); goto e6597; A752e: return $this->redirect($this->generateUrl("\143\x6c\160\137\x61\144\x6d\151\x6e\137\165\x73\145\x72\163")); goto ad856; eda14: c6da9: goto B12eb; c007f: $serviceAccountKeysForm = $this->createServiceAccountKeysForm($serviceAccountKeys); goto dfe10; d9114: if (!(CloudPanelEnvironment::CLOUD_PROVIDER_GCE != $cloud)) { goto D879c; } goto A752e; dfe10: $snapshotsSettingsForm = $this->createSnapshotsSettingsForm($snapshotsSettings); goto b7be2; B378f: return $response; goto bd33f; B895d: $cloud = $configManager->get("\143\x6c\157\x75\x64"); goto d9114; B12eb: fd2e3: goto e5ed2; f3b06: return $response; goto e8721; D33ef: $snapshotsSettingsForm->handleRequest($request); goto Ad9d4; b7be2: if (!(true === $request->isMethod("\120\117\123\x54"))) { goto d2e2f; } goto abd0b; C1fff: return $response; goto eda14; ab1b2: fb549: goto e7c96; Ad9d4: if (!(true === $serviceAccountKeysForm->isSubmitted())) { goto fb549; } goto cc264; e6597: if (!(false === is_null($response))) { goto c6da9; } goto C1fff; e7c96: if (!(true === $snapshotsSettingsForm->isSubmitted())) { goto fd2e3; } goto cac00; c949b: if (!(false === is_null($response))) { goto eabc2; } goto f3b06; bed4e: $snapshotsSettings = ["\x61\x75\164\x6f\155\x61\164\x69\x63\x53\156\141\x70\163\x68\x6f\164\x73" => (bool) $configManager->get("\x67\143\x65\x5f\x61\x75\164\157\155\141\164\x69\143\137\163\156\141\160\163\150\x6f\x74\x73"), "\146\162\x65\161\x75\145\156\x63\x79" => false === is_null($configManager->get("\x67\x63\x65\x5f\x73\x6e\x61\160\x73\150\x6f\164\x73\137\146\162\145\161\x75\x65\x6e\143\171")) ? (int) $configManager->get("\147\143\145\137\x73\x6e\x61\160\163\150\x6f\x74\163\x5f\146\x72\x65\x71\165\145\156\x63\171") : 12, "\x72\x65\x74\x65\x6e\164\x69\157\x6e\120\x65\x72\x69\157\x64" => false === is_null($configManager->get("\x67\x63\145\137\x73\x6e\x61\160\163\150\157\x74\x73\x5f\x72\x65\164\x65\x6e\x74\151\157\x6e\x5f\x70\145\162\151\157\144")) ? (int) $configManager->get("\147\x63\x65\x5f\163\x6e\x61\160\163\150\157\x74\x73\137\x72\x65\x74\145\x6e\164\151\x6f\x6e\x5f\x70\145\162\151\x6f\144") : 7]; goto c007f; e5ed2: d2e2f: goto a81bc; Ff0ca: $serviceAccountKeys = ["\163\x65\x72\x76\151\x63\145\x41\x63\x63\157\x75\156\164\x4b\x65\x79\163" => $configManager->get("\147\143\145\x5f\163\145\x72\x76\151\x63\145\x5f\141\143\143\x6f\165\x6e\164\x5f\x6b\145\171\x73")]; goto bed4e; bd33f: } private function createServiceAccountKeysForm(array $data) : Form { goto Ea471; F4733: $form->add("\163\x75\x62\x6d\x69\164", SubmitType::class, ["\x61\x74\x74\162" => ["\143\154\x61\163\163" => "\142\x74\156\x20\142\x74\156\x2d\142\x6c\x75\x65\x20\142\164\x6e\55\x6c\x67"], "\x6c\x61\142\x65\154" => "\x53\x61\166\145"]); goto b46f9; Ea471: $form = $this->createForm("\101\x70\160\x5c\106\157\x72\x6d\x5c\101\144\x6d\151\156\x47\x63\x65\123\x65\162\166\x69\143\x65\101\x63\143\x6f\165\156\164\x4b\x65\x79\163\124\171\x70\145", $data, ["\141\x63\x74\151\x6f\x6e" => $this->generateUrl("\x63\x6c\160\137\141\x64\155\151\x6e\137\x67\143\x65\x5f\x73\x65\164\164\x69\x6e\x67\163"), "\155\x65\164\150\157\x64" => "\x50\x4f\x53\124", "\141\164\164\x72" => []]); goto F4733; b46f9: return $form; goto ed927; ed927: } private function handleServiceAccountKeysForm(Request $request, Form $form, ConfigManager $configManager) { goto A8ec6; F3a44: if (!(false === $serviceAccountKeysValid)) { goto D271f; } goto Be22b; A2042: $serviceAccountKeysValid = $this->validateServiceAccountKeys($request, $serviceAccountKeys); goto F3a44; Cb460: $this->formErrors = $this->getErrorMessages($form); goto C8c4d; c8b43: if (true === $form->isValid()) { goto b6613; } goto Cb460; C8c4d: goto cf769; goto a5dc9; e1a77: D271f: goto c8b43; Be22b: $form->addError(new FormError($this->translator->trans("\x53\x65\162\166\145\x72\x20\x41\143\143\157\x75\x6e\164\x20\x4b\145\171\x73\40\x61\x72\x65\40\156\157\164\40\x76\141\x6c\x69\144\56"))); goto e1a77; a5dc9: b6613: goto f9f4d; f0be2: cf769: goto Eeb50; A8ec6: $serviceAccountKeys = trim($form->get("\x73\145\x72\x76\x69\x63\x65\101\143\143\157\165\156\x74\113\145\x79\163")->getData()); goto A2042; f9f4d: try { goto a8990; a8990: $user = $this->getUser(); goto Aa28e; e899d: return $response; goto C06d2; Dcb7a: $configManager->set("\147\x63\x65\x5f\x73\x65\162\166\x69\143\x65\137\x61\143\x63\157\x75\x6e\x74\x5f\x6b\x65\x79\x73", $serviceAccountKeys); goto Ddda3; Bdad4: $response = $this->redirect($this->generateUrl("\143\x6c\160\137\141\144\x6d\151\156\137\147\x63\x65\137\x73\x65\164\164\x69\x6e\147\163")); goto e899d; Aa28e: $session = $request->getSession(); goto Dcb7a; C35e6: $session->getFlashBag()->set("\163\x75\x63\x63\145\x73\163", $this->translator->trans("\x53\145\x72\x76\x69\x63\145\x20\x41\x63\x63\157\165\x6e\164\x20\113\x65\x79\x73\40\150\x61\x76\x65\40\142\x65\145\x6e\x20\x73\141\x76\145\x64\56")); goto Bdad4; Ddda3: EventQueue::addEvent(EventQueue::EVENT_GCE_SERVICE_ACCOUNTS_UPDATE, $user, [], $request); goto C35e6; C06d2: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\144\141\156\x67\x65\162", $this->translator->trans("\101\x6e\40\x65\x72\x72\157\x72\40\x68\x61\x73\40\157\x63\x63\x75\x72\x72\145\144\x2c\40\145\162\x72\x6f\162\x20\155\145\163\163\x61\x67\145\72\x20\45\145\x72\162\x6f\162\115\x65\163\x73\141\147\145\45", ["\45\145\x72\x72\157\x72\115\x65\x73\x73\x61\147\x65\x25" => $e->getMessage()])); } goto f0be2; Eeb50: } private function createSnapshotsSettingsForm(array $data) : Form { goto Fd8b8; Fd8b8: $form = $this->createForm("\101\x70\160\x5c\106\x6f\x72\155\134\101\144\155\x69\156\x47\143\145\x53\x6e\x61\x70\163\x68\x6f\x74\163\x53\145\x74\x74\x69\x6e\x67\x73\124\171\x70\x65", $data, ["\x61\x63\x74\151\x6f\x6e" => $this->generateUrl("\x63\154\x70\x5f\x61\x64\155\x69\x6e\x5f\147\x63\x65\137\163\x65\x74\x74\x69\x6e\147\x73"), "\x6d\145\x74\x68\157\144" => "\x50\117\x53\x54", "\x61\x74\x74\162" => []]); goto D8cf6; D8cf6: $form->add("\x73\x75\x62\155\x69\164", SubmitType::class, ["\141\x74\164\x72" => ["\x63\154\x61\163\x73" => "\x62\x74\x6e\x20\x62\x74\x6e\55\142\154\x75\x65\x20\142\164\156\55\154\x67"], "\154\x61\x62\145\154" => "\x53\141\x76\x65"]); goto A83cf; A83cf: return $form; goto B9ef8; B9ef8: } private function handleSnapshotsSettingsForm(Request $request, Form $form, ConfigManager $configManager) { goto ab193; A4f6f: $this->formErrors = $this->getErrorMessages($form); goto c6305; c6305: goto C89d7; goto a8069; a8069: B7ee4: goto E1235; E1235: try { goto dc52f; db376: $retentionPeriod = (int) $form->get("\162\145\x74\145\156\164\x69\x6f\x6e\120\145\162\x69\157\144")->getData(); goto d17f9; C93ba: $frequency = (int) $form->get("\146\162\x65\x71\x75\145\x6e\x63\x79")->getData(); goto db376; dc52f: $user = $this->getUser(); goto dcf62; d17f9: $configManager->set("\147\143\145\x5f\141\165\x74\x6f\155\x61\164\151\x63\137\x73\x6e\x61\160\x73\x68\157\164\163", $automaticSnapshots); goto A0da0; A0da0: $configManager->set("\x67\143\145\137\163\156\141\160\x73\x68\157\164\x73\137\x66\162\x65\161\165\x65\156\143\171", $frequency); goto D565f; B5dc2: $automaticSnapshots = (int) $form->get("\141\x75\164\x6f\155\141\164\x69\143\123\x6e\141\160\x73\150\157\x74\x73")->getData(); goto C93ba; dcf62: $session = $request->getSession(); goto B5dc2; D565f: $configManager->set("\147\143\x65\137\163\x6e\141\160\163\x68\x6f\x74\x73\137\x72\x65\164\x65\156\x74\x69\x6f\156\137\x70\x65\162\151\157\x64", $retentionPeriod); goto ba2e7; Ea14f: $session->getFlashBag()->set("\163\x75\143\x63\x65\x73\163", $this->translator->trans("\123\156\x61\160\163\150\157\x74\x73\x20\123\145\x74\x74\151\x6e\147\x73\40\150\141\166\145\x20\142\x65\x65\x6e\x20\x73\141\x76\x65\144\x2e")); goto d7fb5; d7fb5: $response = $this->redirect($this->generateUrl("\x63\x6c\160\x5f\141\144\155\151\x6e\x5f\x67\x63\x65\137\x73\x65\164\x74\151\x6e\147\x73")); goto a423d; A916f: EventQueue::addEvent(EventQueue::EVENT_GCE_SNAPSHOTS_SETTINGS_UPDATE, $user, $eventData, $request); goto Ea14f; ba2e7: $eventData = ["\141\x75\164\x6f\x6d\141\164\151\x63\x53\x6e\x61\x70\163\x68\157\164\x73" => $automaticSnapshots, "\x66\x72\145\161\x75\x65\x6e\x63\x79" => $frequency, "\162\x65\164\145\x6e\x74\151\x6f\156\120\x65\162\x69\x6f\144" => $retentionPeriod]; goto A916f; a423d: return $response; goto Eba37; Eba37: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\144\x61\x6e\x67\145\x72", $this->translator->trans("\101\x6e\x20\x65\162\162\x6f\162\x20\150\x61\163\40\157\x63\143\165\x72\x72\x65\144\54\x20\145\162\x72\x6f\x72\40\x6d\x65\163\x73\141\147\x65\72\x20\45\x65\162\162\x6f\162\x4d\145\163\x73\141\147\145\45", ["\45\x65\162\162\x6f\162\115\145\163\x73\x61\147\x65\45" => $e->getMessage()])); } goto e2810; ab193: if (true === $form->isValid()) { goto B7ee4; } goto A4f6f; e2810: C89d7: goto F7685; F7685: } public function snapshots(Request $request, ConfigManager $configManager) : Response { goto f26be; c18ac: return $this->redirect($this->generateUrl("\143\x6c\x70\x5f\141\x64\x6d\151\x6e\137\165\163\145\x72\163")); goto c3beb; b755b: if (!(CloudPanelEnvironment::CLOUD_PROVIDER_GCE != $cloud)) { goto c2e99; } goto c18ac; Eade4: $response = $this->render("\x41\x64\155\151\x6e\x2f\x47\143\145\57\123\x6e\141\160\x73\150\x6f\164\x73\x2f\x69\156\144\145\x78\x2e\x68\164\x6d\154\x2e\x74\x77\x69\147", ["\x66\157\162\155\105\162\162\157\162\163" => $this->formErrors]); goto C625e; c3beb: c2e99: goto Eade4; f26be: $cloud = $configManager->get("\x63\154\x6f\x75\x64"); goto b755b; C625e: return $response; goto B7af1; B7af1: } public function loadSnapshots(Request $request, ConfigManager $configManager, Twig $twig) : Response { goto df20a; A2f7f: try { goto c6c42; c6c42: $user = $this->getUser(); goto ada80; dc592: usort($snapshots, function ($a, $b) { return $a->getCreatedAt() < $b->getCreatedAt(); }); goto Ef5c8; F12b9: $gceClient = $instance->getGceClient(); goto C4594; fc8a7: if (!(false === empty($serviceAccountKeys))) { goto C3160; } goto acb12; Ef5c8: C3160: goto f9cfe; ce641: $serviceAccountKeys = $configManager->get("\147\143\x65\x5f\x73\x65\162\166\151\x63\x65\x5f\x61\143\x63\157\165\x6e\x74\137\153\145\171\x73"); goto fc8a7; ada80: $snapshots = []; goto ce641; f9cfe: $snapshotsHtml = $twig->render("\x41\144\x6d\x69\x6e\x2f\107\143\x65\57\123\156\141\160\163\150\157\x74\163\57\x73\x6e\141\x70\x73\x68\157\x74\163\x2d\x6c\151\163\164\x2e\150\164\155\154\x2e\164\x77\x69\x67", ["\165\163\145\x72" => $user, "\x73\x6e\141\x70\163\x68\157\x74\163" => $snapshots]); goto B86a7; acb12: $instance = $request->attributes->get("\151\156\163\164\x61\x6e\x63\x65"); goto F12b9; B86a7: $data["\x73\x6e\x61\x70\163\x68\x6f\x74\x73\x48\164\x6d\x6c"] = $snapshotsHtml; goto d228c; C4594: $snapshots = $gceClient->getSnapshots(); goto dc592; d228c: } catch (\Exception $e) { $errorMessage = $twig->render("\101\144\x6d\x69\x6e\57\107\143\145\x2f\120\x61\x72\164\x69\141\154\57\145\x72\x72\157\x72\x2d\155\x65\163\163\141\147\x65\56\150\x74\155\154\56\x74\x77\x69\147", ["\145\162\x72\157\162\x4d\x65\163\163\141\x67\x65" => $e->getMessage()]); $data["\x65\x72\162\x6f\x72\x4d\145\163\x73\141\x67\145"] = $errorMessage; } goto abf40; Cc324: return $this->json($data); goto D78e6; df20a: $data = []; goto Be2c1; Be2c1: if (!(true === $request->isXmlHttpRequest())) { goto bbf6a; } goto A2f7f; abf40: bbf6a: goto Cc324; D78e6: } public function createSnapshot(Request $request, ConfigManager $configManager) : Response { goto Eafc6; B21d5: if (!(false === is_null($response))) { goto A1f03; } goto A456b; Eafc6: $cloud = $configManager->get("\x63\x6c\x6f\165\144"); goto C1c7d; F77da: if (!(false === $request->isMethod("\120\x4f\123\124"))) { goto b5f82; } goto f462c; D7023: if (!(true === $request->isMethod("\x50\117\x53\x54"))) { goto Df638; } goto A02e2; b7974: return $this->redirect($this->generateUrl("\x63\154\x70\137\x61\x64\x6d\151\156\x5f\165\x73\x65\162\163")); goto Fb8dd; A02e2: $form->handleRequest($request); goto C2896; E4341: A1f03: goto F6927; cfee4: $response = $this->handleCreateSnapshotForm($request, $form, $configManager); goto B21d5; C1c7d: if (!(CloudPanelEnvironment::CLOUD_PROVIDER_GCE != $cloud)) { goto c1877; } goto b7974; df027: $data = []; goto F77da; F9cd7: $form = $this->createSnapshotForm($data); goto D7023; E5c45: return $response; goto c8454; Fb8dd: c1877: goto df027; C2896: if (!(true === $form->isSubmitted())) { goto fea5c; } goto cfee4; Ee266: Df638: goto F2d6e; F6927: fea5c: goto Ee266; b8f8a: b5f82: goto F9cd7; f462c: try { goto E89b1; e5b8c: $data["\x6e\x61\155\x65"] = $instance->getName(); goto F435b; D9cbe: $gceClient = $instance->getGceClient(); goto F4efd; Acc9d: $instance = $request->attributes->get("\151\156\x73\164\x61\x6e\143\145"); goto D9cbe; E89b1: $session = $request->getSession(); goto Acc9d; F4efd: $instance = $gceClient->getInstance(); goto e5b8c; F435b: } catch (\Exception $e) { goto cf07c; de9b4: return $response; goto e93f1; D9b48: $response = $this->redirect($this->generateUrl("\x63\154\160\137\141\x64\155\x69\x6e\x5f\147\143\x65\137\163\145\164\x74\x69\x6e\x67\x73")); goto de9b4; cf07c: $session->getFlashBag()->set("\144\x61\x6e\x67\145\x72", $this->translator->trans("\x53\145\x72\x76\151\x63\x65\40\x41\143\143\157\165\156\x74\40\113\x65\x79\x73\x20\141\162\x65\40\156\x6f\164\40\166\141\154\151\144\x2e")); goto D9b48; e93f1: } goto b8f8a; A456b: return $response; goto E4341; F2d6e: $response = $this->render("\101\144\155\151\156\57\x47\143\x65\x2f\123\156\x61\x70\163\x68\157\164\163\x2f\143\x72\x65\141\164\x65\56\150\x74\155\154\56\164\167\x69\x67", ["\x66\157\x72\155\105\162\162\x6f\162\x73" => $this->formErrors, "\x66\157\162\155" => $form->createView()]); goto E5c45; c8454: } private function createSnapshotForm(array $data) : Form { goto E9653; E9653: $form = $this->createForm("\101\160\x70\x5c\x46\x6f\162\x6d\134\x41\x64\155\151\156\x47\x63\x65\x53\x6e\x61\x70\x73\x68\x6f\x74\124\171\160\x65", $data, ["\x61\143\164\x69\157\x6e" => $this->generateUrl("\143\154\160\137\x61\x64\x6d\x69\x6e\x5f\147\x63\x65\x5f\x73\156\x61\x70\163\x68\x6f\164\x5f\143\162\145\141\x74\145"), "\x6d\x65\164\150\157\x64" => "\120\x4f\123\x54", "\x61\164\164\162" => []]); goto b2e43; b2e43: $form->add("\x73\x75\x62\x6d\x69\164", SubmitType::class, ["\x61\x74\x74\162" => ["\x63\x6c\141\x73\x73" => "\x62\164\x6e\40\142\164\x6e\x2d\x62\154\x75\x65\40\142\164\x6e\55\154\147"], "\x6c\141\x62\145\154" => "\103\162\x65\x61\x74\145"]); goto ed23a; ed23a: return $form; goto fb014; fb014: } private function handleCreateSnapshotForm(Request $request, Form $form, ConfigManager $configManager) { goto a1dfe; F631f: try { goto e4378; fb561: $gceClient = $instance->getGceClient(); goto d2d7d; e4378: $user = $this->getUser(); goto E219e; d2384: $eventData = ["\x73\x6e\141\160\x73\x68\157\x74\116\x61\x6d\145" => $snapshotName]; goto B93fe; E219e: $session = $request->getSession(); goto E53f5; Ff87c: $instance = $request->attributes->get("\151\156\163\164\x61\156\143\x65"); goto fb561; A4375: return $response; goto A3adb; A0264: $response = $this->redirect($this->generateUrl("\x63\154\160\x5f\x61\144\x6d\x69\x6e\137\x67\143\145\137\163\x6e\x61\x70\163\150\x6f\x74\163")); goto A4375; E53f5: $snapshotName = $form->get("\156\x61\155\145")->getData(); goto Ff87c; d2d7d: $gceClient->createDiskSnapshots($snapshotName, Snapshot::TYPE_MANUAL); goto d2384; ee356: $session->getFlashBag()->set("\163\x75\143\143\145\x73\163", $this->translator->trans("\x53\156\x61\x70\163\150\x6f\x74\40\151\163\40\x62\x65\151\156\x67\x20\x63\x72\145\141\164\x65\144\x2e")); goto A0264; B93fe: EventQueue::addEvent(EventQueue::EVENT_GCE_SNAPSHOT_CREATE, $user, $eventData, $request); goto ee356; A3adb: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\144\141\156\x67\x65\x72", $this->translator->trans("\x41\x6e\x20\x65\x72\x72\x6f\x72\x20\150\x61\x73\x20\x6f\143\x63\x75\162\162\145\x64\54\40\145\162\x72\x6f\x72\x20\155\145\x73\x73\141\147\145\72\x20\x25\145\x72\162\x6f\162\x4d\145\163\x73\x61\147\x65\45", ["\45\x65\162\x72\157\162\x4d\145\x73\x73\x61\x67\x65\45" => $e->getMessage()])); } goto b7be5; D344f: a66f2: goto F631f; a1dfe: if (true === $form->isValid()) { goto a66f2; } goto E7b71; E7b71: $this->formErrors = $this->getErrorMessages($form); goto E1dfa; E1dfa: goto eea38; goto D344f; b7be5: eea38: goto Cd14b; Cd14b: } public function deleteSnapshot(Request $request, ConfigManager $configManager) : Response { goto fbf64; fbf64: $cloud = $configManager->get("\x63\x6c\157\165\144"); goto Bb50e; Fde4d: return $response; goto E2b6b; e5002: try { goto Be81e; Acda6: c00b0: goto D56cc; d4b20: $user = $this->getUser(); goto B0b46; Be81e: $session = $request->getSession(); goto d4b20; F9a18: EventQueue::addEvent(EventQueue::EVENT_GCE_SNAPSHOT_DELETE, $user, $eventData, $request); goto Ae105; Ae105: $session->getFlashBag()->set("\163\165\x63\143\x65\163\163", $this->translator->trans("\123\x6e\x61\160\163\x68\x6f\164\x20\x69\x73\x20\142\145\x69\156\x67\40\x64\x65\x6c\x65\x74\145\x64\x2e")); goto Acda6; ba5dc: $eventData = ["\x69\144" => $snapshot->getId(), "\156\x61\155\x65" => $snapshot->getName(), "\x73\157\x75\162\x63\x65\x44\151\163\x6b" => $snapshot->getSourceDisk()]; goto F9a18; B0b46: $instance = $request->attributes->get("\151\x6e\x73\164\x61\x6e\143\145"); goto d2243; ec59a: $gceClient->deleteSnapshot($id); goto ba5dc; c9401: $snapshot = $gceClient->getSnapshot($id); goto fbdd1; d2243: $gceClient = $instance->getGceClient(); goto c9401; fbdd1: if (!(true === isset($snapshot) && $snapshot instanceof \Google_Service_Compute_Snapshot)) { goto c00b0; } goto ec59a; D56cc: } catch (\Exception $e) { $session->getFlashBag()->set("\x64\x61\156\147\145\162", $this->translator->trans("\101\x6e\40\x65\162\162\157\162\40\150\x61\163\x20\x6f\x63\143\x75\162\162\x65\x64\54\40\145\162\162\x6f\x72\40\x6d\x65\163\163\141\147\x65\72\40\x25\145\x72\162\x6f\x72\x4d\145\x73\163\141\147\145\x25", ["\45\145\x72\x72\x6f\x72\115\x65\163\x73\141\147\x65\x25" => $e->getMessage()])); } goto Adcf6; Bb50e: if (!(CloudPanelEnvironment::CLOUD_PROVIDER_GCE != $cloud)) { goto B7c4c; } goto fe033; d64fe: $response = $this->redirect($this->generateUrl("\143\x6c\160\x5f\x61\x64\155\x69\156\137\147\x63\145\x5f\163\156\x61\x70\163\x68\157\x74\163")); goto Fde4d; ef5ae: $id = trim($request->get("\x69\x64")); goto Ec60c; ffdd7: B7c4c: goto ef5ae; Ec60c: if (!(false === empty($id))) { goto C5709; } goto e5002; fe033: return $this->redirect($this->generateUrl("\143\x6c\160\137\x61\144\155\x69\x6e\x5f\165\163\145\x72\x73")); goto ffdd7; Adcf6: C5709: goto d64fe; E2b6b: } private function validateServiceAccountKeys(Request $request, $serviceAccountKeys) : bool { try { goto f5985; f6db7: $gceClient->setAuthConfig($serviceAccountKeys); goto e7cfb; Ecfda: if (!(true === isset($instance) && $instance instanceof \Google_Service_Compute_Instance)) { goto feded; } goto e9f5b; f5985: $instance = $request->attributes->get("\x69\x6e\x73\164\141\x6e\143\145"); goto d40fc; F9136: feded: goto b049e; e9f5b: $serviceAccountKeysValid = true; goto F9136; Aa7bd: $gceClient = $instance->getGceClient(); goto f6db7; e7cfb: $instance = $gceClient->getInstance(); goto Ecfda; d40fc: $serviceAccountKeysValid = false; goto A2e47; A2e47: $serviceAccountKeys = (array) json_decode($serviceAccountKeys, true); goto Aa7bd; b049e: } catch (\Exception $e) { } return $serviceAccountKeysValid; } }

<?php
 namespace App\Controller\Admin; use Symfony\Component\HttpFoundation\Request; use Symfony\Component\HttpFoundation\Response; use Symfony\Component\Form\Extension\Core\Type\SubmitType; use Symfony\Contracts\Translation\TranslatorInterface; use Symfony\Component\Form\Form; use App\Controller\Controller; use App\Entity\Manager\ConfigManager; use App\System\CommandExecutor; use App\System\Command\RclonePasswordObscureCommand; use App\Backup\Rclone\AmazonS3ConfigTemplate; use App\Backup\Rclone\WasabiConfigTemplate; use App\Backup\Rclone\DropboxConfigTemplate; use App\Backup\Rclone\GoogleDriveConfigTemplate; use App\Backup\Rclone\DigitalOceanSpacesConfigTemplate; use App\Backup\Rclone\SftpConfigTemplate; use App\Backup\Rclone\ConfigBuilder as RcloneConfigBuilder; use App\Backup\Rclone; use App\Backup\StorageProvider; use App\Event\EventQueue; use App\Service\Logger; class RemoteBackupController extends Controller { private const REMOTE_BACKUP_COMMAND = "\57\x75\163\x72\57\x62\151\156\57\142\x61\x73\150\40\x2d\143\40\x22\x2f\x75\x73\162\57\142\x69\156\57\x73\x75\144\157\x20\x2f\x75\163\x72\x2f\x62\x69\156\57\143\154\x70\x63\x74\x6c\x57\x72\x61\x70\160\x65\x72\x20\x72\x65\x6d\x6f\164\x65\x2d\x62\x61\143\x6b\x75\x70\72\143\x72\145\141\164\x65\x22\40\76\40\x2f\144\145\166\x2f\156\x75\x6c\154\40\62\76\x26\61\40\x26"; private ConfigManager $configManager; public function __construct(ConfigManager $configManager, TranslatorInterface $translator, Logger $logger) { $this->configManager = $configManager; parent::__construct($translator, $logger); } public function index(Request $request) : Response { goto Eaafa; Cfaeb: $response = $this->handleRemoteBackupStorageProviderForm($request, $form); goto c755e; E397b: return $response; goto fd4b2; c40ae: e7b19: goto f9614; acc45: F1b1d: goto f01de; Fe15f: if (!(true === $form->isSubmitted())) { goto F1b1d; } goto Cfaeb; fd4b2: af6d5: goto acc45; e3bdf: if (!(true === $request->isMethod("\x50\117\123\124"))) { goto A3366; } goto F7054; ce5f7: if (!(false === empty($provider))) { goto e7b19; } goto E1bee; c755e: if (!(false === is_null($response))) { goto af6d5; } goto E397b; F7054: $form->handleRequest($request); goto Fe15f; E1bee: $response = $this->redirect($this->generateUrl("\143\x6c\x70\x5f\141\144\155\151\156\137\x72\145\155\157\164\145\x5f\142\x61\x63\153\x75\x70\137\145\144\x69\164", ["\160\x72\157\166\x69\144\145\x72" => $provider])); goto b759c; f9614: $form = $this->createRemoteBackupStorageProviderForm(); goto e3bdf; Eaafa: $provider = $this->configManager->get("\x72\x65\155\157\x74\145\x5f\142\x61\x63\153\x75\x70\x5f\x73\x74\x6f\x72\x61\x67\145\x5f\160\162\x6f\x76\151\x64\145\162"); goto ce5f7; a6cdf: $response = $this->render("\x41\x64\155\151\156\57\x52\x65\155\157\x74\x65\x42\141\x63\x6b\x75\160\57\151\156\x64\145\170\x2e\x68\x74\155\154\56\x74\x77\151\x67", ["\x66\x6f\162\x6d" => $form->createView(), "\146\x6f\x72\155\x45\x72\x72\157\x72\x73" => $this->formErrors]); goto ab269; f01de: A3366: goto a6cdf; ab269: return $response; goto E83c2; b759c: return $response; goto c40ae; E83c2: } public function create(Request $request) : Response { goto feeb6; Fee95: return $response; goto Db696; b2aca: try { goto adedc; Dc65b: $session->getFlashBag()->set("\x73\x75\x63\x63\145\163\x73", $this->translator->trans("\x54\x68\145\x20\x62\x61\x63\153\165\x70\40\x77\151\154\154\x20\142\145\x20\x73\x74\x61\x72\x74\145\144\40\x69\x6e\40\164\x68\145\x20\x62\x61\x63\153\x67\162\x6f\x75\x6e\x64\x20\163\x68\x6f\x72\164\x6c\171\x2e")); goto ec638; a7e67: exec(self::REMOTE_BACKUP_COMMAND); goto Dc65b; adedc: $session = $request->getSession(); goto a7e67; ec638: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\x64\x61\x6e\147\145\162", $this->translator->trans("\x41\x6e\40\x65\162\162\157\x72\40\150\141\163\x20\x6f\143\x63\165\162\162\x65\144\x2c\x20\145\162\162\157\x72\40\155\145\x73\163\x61\x67\x65\x3a\x20\45\145\x72\162\x6f\162\x4d\x65\163\163\141\147\145\x25", ["\45\145\162\x72\157\x72\x4d\145\x73\163\141\147\145\x25" => $e->getMessage()])); } goto cddb3; Bfc3d: $response = $this->redirect($this->generateUrl("\143\x6c\160\137\x61\x64\x6d\151\x6e\137\x72\x65\155\157\164\x65\137\x62\141\143\x6b\165\160")); goto Fee95; d53b8: if (!(false === empty($provider))) { goto C1036; } goto b2aca; feeb6: $provider = $this->configManager->get("\x72\x65\155\157\164\x65\137\142\x61\x63\x6b\x75\x70\137\x73\164\157\x72\141\x67\145\x5f\160\162\x6f\166\x69\x64\145\162"); goto d53b8; cddb3: C1036: goto Bfc3d; Db696: } private function createRemoteBackupStorageProviderForm() : Form { goto Ddb55; Be996: return $form; goto a0c12; ed6e8: $form->add("\x73\165\x62\155\x69\164", SubmitType::class, ["\141\164\x74\x72" => ["\143\x6c\141\x73\163" => "\x62\164\x6e\x20\142\x74\156\x2d\x62\154\165\145\40\x62\164\x6e\55\x6c\x67"], "\x6c\141\x62\x65\x6c" => "\103\157\156\164\x69\156\165\x65"]); goto Be996; Ddb55: $form = $this->createForm("\x41\x70\x70\x5c\x46\x6f\162\155\134\101\144\155\151\x6e\x52\x65\x6d\157\164\145\x42\141\143\153\165\x70\x53\164\x6f\162\x61\x67\145\x50\x72\157\166\x69\x64\145\162\x54\171\160\x65", [], ["\x61\143\164\x69\x6f\156" => $this->generateUrl("\x63\x6c\160\137\x61\144\x6d\151\156\137\x72\x65\155\x6f\x74\145\137\142\141\x63\153\x75\x70"), "\155\145\x74\150\157\144" => "\120\x4f\x53\x54"]); goto ed6e8; a0c12: } private function handleRemoteBackupStorageProviderForm(Request $request, Form $form) { goto f7965; Bd36c: befca: goto b7955; Ef4bb: try { goto f0874; b0b24: return $response; goto b0dc5; f244c: $storageProvider = $form->get("\163\164\157\162\141\x67\x65\120\162\x6f\166\151\x64\145\162")->getData(); goto D24fa; D24fa: $response = $this->redirect($this->generateUrl("\x63\154\x70\x5f\141\x64\155\151\x6e\137\x72\x65\x6d\157\x74\145\x5f\x62\x61\x63\153\x75\x70\x5f\156\145\167", ["\x70\162\x6f\x76\x69\144\x65\x72" => $storageProvider])); goto b0b24; f0874: $session = $request->getSession(); goto f244c; b0dc5: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\x64\x61\x6e\x67\x65\162", $this->translator->trans("\101\x6e\x20\x65\162\162\x6f\x72\x20\x68\141\163\40\157\143\x63\165\x72\x72\145\144\54\40\x65\x72\162\x6f\x72\x20\x6d\x65\x73\163\141\147\x65\x3a\40\x25\x65\162\x72\x6f\x72\x4d\x65\x73\x73\141\147\x65\x25", ["\x25\145\x72\x72\157\162\x4d\145\x73\x73\x61\x67\x65\x25" => $e->getMessage()])); } goto Bd36c; f7965: if (true === $form->isValid()) { goto Fd0ca; } goto C8efc; D480f: goto befca; goto d4593; C8efc: $this->formErrors = $this->getErrorMessages($form); goto D480f; d4593: Fd0ca: goto Ef4bb; b7955: } public function new(Request $request) : Response { goto B6b88; ca70e: switch ($storageProvider) { case StorageProvider::AMAZON_S3: goto caeac; eb0b9: $response = $this->handleRemoteBackupAmazonS3Form($request, $form); goto Dc028; Cae5f: return $response; goto b36b5; d3d4b: $response = $this->render("\x41\144\155\151\x6e\57\x52\145\x6d\x6f\164\145\x42\x61\143\x6b\x75\160\x2f\x61\155\x61\x7a\157\x6e\x2d\163\x33\56\x68\164\155\x6c\x2e\164\167\151\147", ["\146\157\x72\155" => $form->createView(), "\146\x6f\x72\155\x45\x72\x72\x6f\162\x73" => $this->formErrors]); goto f711d; Dc028: if (!(false === is_null($response))) { goto E18b9; } goto Cae5f; C8c39: if (!(true === $form->isSubmitted())) { goto Beff2; } goto eb0b9; Eb3f6: goto Fa016; goto b98b3; Da9ba: $form->handleRequest($request); goto C8c39; Ed342: if (!(true === $request->isMethod("\120\x4f\123\x54"))) { goto Be6a5; } goto Da9ba; f1422: Beff2: goto c855d; b36b5: E18b9: goto f1422; c855d: Be6a5: goto d3d4b; f711d: return $response; goto Eb3f6; caeac: $form = $this->createRemoteBackupAmazonS3Form(); goto Ed342; b98b3: case StorageProvider::WASABI: goto ff667; Fb16a: c530d: goto fddbd; C8a89: e979e: goto Fb16a; b474d: return $response; goto Ebfa0; D07ad: $response = $this->handleRemoteBackupWasabiForm($request, $form); goto a7245; b01c7: if (!(true === $form->isSubmitted())) { goto e979e; } goto D07ad; D9272: if (!(true === $request->isMethod("\x50\x4f\x53\x54"))) { goto c530d; } goto a5800; C3238: ba03b: goto C8a89; ff667: $form = $this->createRemoteBackupWasabiForm(); goto D9272; fddbd: $response = $this->render("\101\144\x6d\151\x6e\x2f\x52\145\x6d\157\164\145\102\141\143\x6b\165\160\x2f\167\141\163\x61\142\x69\56\x68\x74\x6d\x6c\56\164\x77\x69\x67", ["\146\157\162\x6d" => $form->createView(), "\x66\x6f\x72\x6d\105\162\x72\157\162\x73" => $this->formErrors]); goto b474d; a5800: $form->handleRequest($request); goto b01c7; a7245: if (!(false === is_null($response))) { goto ba03b; } goto B360b; B360b: return $response; goto C3238; Ebfa0: goto Fa016; goto C76ba; C76ba: case StorageProvider::GOOGLE_DRIVE: goto b901c; abf03: $response = $this->render("\x41\x64\155\151\156\57\122\145\x6d\x6f\x74\x65\x42\x61\x63\x6b\165\x70\x2f\x67\157\x6f\x67\x6c\x65\x2d\144\x72\151\x76\x65\56\x68\x74\155\154\x2e\164\167\x69\147", ["\146\x6f\162\155" => $form->createView(), "\x66\x6f\x72\x6d\105\x72\162\x6f\x72\163" => $this->formErrors]); goto D55bb; f0a26: if (!(true === $form->isSubmitted())) { goto ae92a; } goto a68c8; E529b: if (!(false === is_null($response))) { goto eaba0; } goto Af32c; a68c8: $response = $this->handleRemoteBackupGoogleDriveForm($request, $form); goto E529b; C0d45: eaba0: goto Adfbc; F3628: goto Fa016; goto fb0d8; b901c: $form = $this->createRemoteBackupGoogleDriveForm(); goto B579b; Adfbc: ae92a: goto F4434; B579b: if (!(true === $request->isMethod("\x50\117\x53\124"))) { goto f8515; } goto F419c; F419c: $form->handleRequest($request); goto f0a26; D55bb: return $response; goto F3628; F4434: f8515: goto abf03; Af32c: return $response; goto C0d45; fb0d8: case StorageProvider::DIGITAL_OCEAN_SPACES: goto f09c3; Cf216: $response = $this->handleRemoteBackupDigitalOceanSpacesForm($request, $form); goto f8352; a0705: $response = $this->render("\101\144\x6d\x69\156\x2f\x52\x65\x6d\x6f\164\145\x42\141\143\x6b\165\160\57\x64\151\147\151\x74\x61\154\55\157\x63\145\x61\x6e\x2d\x73\160\x61\143\145\x73\56\x68\x74\155\154\56\164\x77\151\147", ["\146\157\x72\x6d" => $form->createView(), "\x66\x6f\x72\x6d\x45\x72\x72\x6f\x72\x73" => $this->formErrors]); goto Ed90c; f09c3: $form = $this->createRemoteBackupDigitalOceanSpacesForm(); goto E27c7; f8352: if (!(false === is_null($response))) { goto b810e; } goto B468c; f327a: goto Fa016; goto D779b; d49f6: b810e: goto cabee; Ed90c: return $response; goto f327a; D1ca0: if (!(true === $form->isSubmitted())) { goto c1207; } goto Cf216; B468c: return $response; goto d49f6; cabee: c1207: goto b2da3; E27c7: if (!(true === $request->isMethod("\120\x4f\x53\124"))) { goto f3c3c; } goto D8a80; D8a80: $form->handleRequest($request); goto D1ca0; b2da3: f3c3c: goto a0705; D779b: case StorageProvider::DROPBOX: goto aecef; b8ac9: f5aba: goto ec629; b58e1: goto Fa016; goto C85a4; d4573: $session->remove("\164\x6f\x6b\x65\156"); goto a701b; B1331: return $response; goto Ed777; F364c: if (true === $request->isMethod("\x50\117\123\x54")) { goto f5aba; } goto d4573; ec629: $form->handleRequest($request); goto Bbaa3; a701b: $session->remove("\x72\145\146\x72\145\163\150\124\157\153\x65\x6e"); goto c29be; fadf3: return $response; goto b58e1; dc498: Eeb12: goto Acb83; a02ae: if (!(false === is_null($response))) { goto aaf3a; } goto B1331; Fcbcc: $session = $request->getSession(); goto F364c; c29be: goto C628e; goto b8ac9; aecef: $form = $this->createRemoteBackupDropboxForm($request); goto Fcbcc; b4c7d: $response = $this->handleRemoteBackupDropboxForm($request, $form); goto a02ae; Acb83: C628e: goto df6fb; Bbaa3: if (!(true === $form->isSubmitted())) { goto Eeb12; } goto b4c7d; df6fb: $response = $this->render("\101\144\x6d\x69\x6e\57\x52\145\155\x6f\164\x65\102\141\x63\x6b\x75\160\57\144\162\x6f\x70\142\x6f\170\56\150\x74\155\154\x2e\x74\167\151\147", ["\x66\157\162\155" => $form->createView(), "\146\157\x72\155\x45\x72\162\157\x72\x73" => $this->formErrors]); goto fadf3; Ed777: aaf3a: goto dc498; C85a4: case StorageProvider::SFTP: goto A4ebe; ecc6b: if (!(true === $request->isMethod("\x50\117\x53\x54"))) { goto c6458; } goto db723; a0b30: c6458: goto F2434; db723: $form->handleRequest($request); goto B4594; A4ebe: $form = $this->createRemoteBackupSftpForm(); goto f2d86; c66c1: return $response; goto db737; F2434: $response = $this->render("\x41\144\x6d\x69\x6e\x2f\x52\145\x6d\x6f\x74\x65\x42\x61\x63\x6b\165\x70\57\x73\x66\x74\x70\56\x68\164\x6d\154\x2e\x74\x77\151\147", ["\141\165\164\x68\x65\156\x74\x69\x63\x61\164\151\x6f\156\115\x65\164\150\157\144" => $authenticationMethod, "\x66\x6f\162\x6d" => $form->createView(), "\x66\157\x72\155\105\x72\162\x6f\162\163" => $this->formErrors]); goto D2b68; f2d86: $authenticationMethod = "\x70\141\163\x73\167\157\162\x64"; goto ecc6b; B4594: if (!(true === $form->isSubmitted())) { goto e9cb6; } goto C88cf; D2b68: return $response; goto E31e3; F0aac: if (!(false === is_null($response))) { goto Ad696; } goto c66c1; Ca35d: e9cb6: goto a0b30; D3809: $response = $this->handleRemoteBackupSftpForm($request, $form); goto F0aac; C88cf: $authenticationMethod = $form->get("\141\x75\x74\x68\x65\156\164\x69\x63\x61\x74\x69\157\156\115\145\164\x68\157\144")->getData(); goto D3809; E31e3: goto Fa016; goto aa332; db737: Ad696: goto Ca35d; aa332: case StorageProvider::CUSTOM_RCLONE: goto Ab7b9; B38ad: $response = $this->handleRemoteBackupCustomRcloneForm($request, $form); goto d8312; d8312: if (!(false === is_null($response))) { goto bcf2e; } goto ecdf5; eb3f8: goto Fa016; goto eff7b; Ab7b9: $form = $this->createRemoteBackupCustomRcloneForm(); goto C6a81; C69c1: d3463: goto de66c; C623d: $response = $this->render("\101\x64\x6d\151\x6e\x2f\x52\145\x6d\157\164\x65\x42\x61\x63\x6b\x75\x70\x2f\143\x75\163\164\157\x6d\55\162\143\154\x6f\x6e\145\x2e\x68\164\x6d\x6c\56\x74\x77\x69\147", ["\x66\x6f\162\155" => $form->createView(), "\x66\157\x72\155\x45\162\x72\157\162\163" => $this->formErrors]); goto A215d; C6a81: if (!(true === $request->isMethod("\120\117\x53\124"))) { goto E71b0; } goto C1aff; de66c: E71b0: goto C623d; B0d9e: bcf2e: goto C69c1; ecdf5: return $response; goto B0d9e; Cc91a: if (!(true === $form->isSubmitted())) { goto d3463; } goto B38ad; C1aff: $form->handleRequest($request); goto Cc91a; A215d: return $response; goto eb3f8; eff7b: } goto D08a2; Ab483: $session->getFlashBag()->set("\144\x61\156\x67\145\x72", $this->translator->trans("\101\156\x20\x65\162\x72\157\162\x20\x68\141\163\x20\157\x63\x63\165\162\162\145\144\x2c\x20\145\x72\162\157\x72\x20\155\x65\163\x73\x61\147\145\x3a\40\45\x65\x72\162\157\162\115\x65\163\x73\x61\147\145\45", ["\x25\x65\162\162\157\162\x4d\x65\x73\163\x61\x67\x65\45" => sprintf("\123\x74\157\x72\141\147\145\x20\x50\x72\x6f\x76\x69\144\145\162\x20\45\x73\40\x69\163\40\156\157\164\40\163\x75\x70\x70\157\x72\164\145\x64\56", $storageProvider)])); goto B45e2; e83e4: Fa016: goto Ab483; B6b88: $storageProvider = $request->get("\160\162\157\x76\x69\144\x65\162"); goto d6fca; d6fca: $session = $request->getSession(); goto ca70e; f1562: return $response; goto b377f; D08a2: F35d1: goto e83e4; B45e2: $response = $this->redirect($this->generateUrl("\x63\x6c\x70\x5f\141\x64\x6d\x69\x6e\x5f\x72\145\155\x6f\x74\145\x5f\142\141\x63\x6b\165\160")); goto f1562; b377f: } private function createRemoteBackupAmazonS3Form() : Form { goto d9632; e0ede: return $form; goto e4318; d9632: $form = $this->createForm("\101\160\160\134\x46\x6f\x72\155\x5c\101\144\x6d\151\156\122\x65\x6d\x6f\x74\145\x42\x61\143\x6b\165\160\101\155\x61\x7a\x6f\x6e\x53\x33\x54\171\160\145", [], ["\141\143\x74\151\x6f\x6e" => $this->generateUrl("\x63\154\x70\x5f\141\144\155\x69\x6e\137\x72\x65\155\157\164\x65\137\x62\x61\x63\153\165\x70\137\x6e\x65\167", ["\x70\x72\157\166\x69\144\x65\x72" => StorageProvider::AMAZON_S3]), "\x6d\145\x74\150\157\x64" => "\120\117\x53\x54"]); goto e9e50; e9e50: $form->add("\163\165\x62\155\x69\164", SubmitType::class, ["\141\164\x74\x72" => ["\x63\154\141\163\x73" => "\x62\x74\x6e\x20\142\164\x6e\x2d\x62\x6c\x75\x65\x20\x62\164\x6e\x2d\x6c\147"], "\x6c\x61\x62\145\x6c" => "\123\x61\166\x65"]); goto e0ede; e4318: } private function createRemoteBackupWasabiForm() : Form { goto c59dd; c6b97: return $form; goto eecda; f2282: $form->add("\163\165\142\x6d\x69\x74", SubmitType::class, ["\x61\164\164\162" => ["\143\x6c\141\163\x73" => "\x62\x74\156\x20\x62\164\x6e\x2d\142\x6c\x75\x65\40\142\164\156\55\x6c\x67"], "\x6c\141\142\145\154" => "\123\141\x76\x65"]); goto c6b97; c59dd: $form = $this->createForm("\101\160\x70\134\x46\157\x72\155\134\x41\x64\x6d\151\x6e\122\x65\155\x6f\x74\x65\102\x61\x63\153\x75\x70\x57\x61\x73\x61\x62\151\124\171\x70\145", [], ["\141\x63\164\151\157\156" => $this->generateUrl("\143\154\160\137\x61\x64\x6d\x69\x6e\137\162\145\x6d\157\164\x65\137\142\141\143\x6b\x75\x70\x5f\x6e\145\167", ["\160\x72\157\x76\x69\x64\x65\162" => StorageProvider::WASABI]), "\155\145\x74\150\157\144" => "\120\117\123\x54"]); goto f2282; eecda: } private function createRemoteBackupGoogleDriveForm() : Form { goto A16d3; A16d3: $form = $this->createForm("\x41\x70\160\134\x46\x6f\x72\155\x5c\101\144\155\151\156\x52\145\155\x6f\164\145\x42\x61\x63\x6b\165\x70\x47\157\x6f\147\x6c\145\104\x72\151\x76\145\x54\x79\160\145", [], ["\x61\x63\x74\x69\157\156" => $this->generateUrl("\143\154\160\137\x61\144\155\x69\156\x5f\x72\145\155\157\x74\145\x5f\x62\x61\143\153\165\160\137\156\145\x77", ["\160\x72\x6f\x76\x69\144\145\162" => StorageProvider::GOOGLE_DRIVE]), "\155\145\x74\x68\157\144" => "\120\117\x53\124"]); goto A1c04; A1c04: $form->add("\x73\x75\142\155\151\x74", SubmitType::class, ["\141\x74\x74\162" => ["\x63\154\x61\x73\x73" => "\142\x74\x6e\x20\x62\164\x6e\x2d\142\154\x75\145\40\x62\x74\x6e\x2d\154\x67"], "\154\141\x62\x65\x6c" => "\x53\141\166\x65"]); goto E47af; E47af: return $form; goto d6268; d6268: } private function createRemoteBackupDigitalOceanSpacesForm() : Form { goto fed06; f18a4: return $form; goto ad2df; db244: $form->add("\163\x75\x62\x6d\x69\x74", SubmitType::class, ["\x61\x74\164\162" => ["\143\x6c\141\163\163" => "\x62\164\x6e\40\142\164\x6e\x2d\142\x6c\165\x65\40\x62\164\x6e\55\154\147"], "\x6c\141\x62\x65\154" => "\x53\141\x76\145"]); goto f18a4; fed06: $form = $this->createForm("\101\x70\x70\x5c\x46\x6f\162\x6d\134\x41\144\x6d\151\156\x52\145\155\x6f\x74\x65\102\141\x63\x6b\x75\160\104\x69\x67\151\x74\x61\154\117\143\145\x61\x6e\123\x70\141\143\145\x73\x54\171\x70\145", [], ["\141\143\x74\x69\157\x6e" => $this->generateUrl("\143\154\160\137\141\144\155\x69\156\x5f\x72\x65\155\157\164\x65\x5f\142\x61\x63\153\x75\160\137\156\x65\x77", ["\x70\162\157\166\x69\x64\x65\162" => StorageProvider::DIGITAL_OCEAN_SPACES]), "\155\x65\x74\150\x6f\x64" => "\x50\117\123\124"]); goto db244; ad2df: } private function createRemoteBackupDropboxForm(Request $request) : Form { goto d1647; E8c3f: return $form; goto a2fbd; d1647: $form = $this->createForm("\x41\x70\x70\134\106\157\162\x6d\134\x41\x64\x6d\151\156\x52\145\155\157\164\x65\x42\141\143\x6b\x75\160\x44\162\157\160\x62\x6f\170\x54\171\160\145", ["\162\145\161\x75\x65\x73\x74" => $request], ["\x61\x63\x74\x69\x6f\156" => $this->generateUrl("\143\x6c\160\137\141\144\x6d\x69\156\x5f\x72\x65\x6d\x6f\164\145\x5f\142\x61\143\153\x75\x70\x5f\156\x65\167", ["\x70\x72\x6f\166\x69\144\x65\162" => StorageProvider::DROPBOX]), "\x6d\145\x74\x68\x6f\144" => "\120\x4f\x53\x54"]); goto F8f59; F8f59: $form->add("\x73\165\x62\155\x69\x74", SubmitType::class, ["\141\164\164\162" => ["\x63\154\x61\163\163" => "\142\x74\156\x20\142\x74\156\x2d\142\x6c\x75\145\x20\x62\x74\156\x2d\x6c\x67"], "\x6c\x61\142\145\x6c" => "\123\x61\166\x65"]); goto E8c3f; a2fbd: } private function createRemoteBackupSftpForm() : Form { goto C1c7c; C1c7c: $form = $this->createForm("\x41\160\x70\134\x46\157\162\x6d\x5c\101\144\155\151\x6e\x52\x65\x6d\x6f\x74\145\102\141\x63\153\x75\x70\x53\146\164\160\124\171\x70\x65", [], ["\141\143\164\x69\157\x6e" => $this->generateUrl("\x63\x6c\x70\x5f\x61\144\x6d\151\156\x5f\162\145\x6d\157\x74\x65\137\x62\141\x63\x6b\165\x70\137\156\145\167", ["\x70\162\x6f\x76\151\x64\x65\x72" => StorageProvider::SFTP]), "\155\x65\164\x68\x6f\x64" => "\120\x4f\123\124"]); goto C664c; C664c: $form->add("\163\x75\142\x6d\151\x74", SubmitType::class, ["\x61\164\x74\162" => ["\143\x6c\141\x73\x73" => "\x62\x74\156\x20\142\164\x6e\x2d\142\x6c\x75\x65\x20\x62\164\156\x2d\x6c\x67"], "\x6c\141\142\145\x6c" => "\123\x61\166\x65"]); goto f9533; f9533: return $form; goto C07a1; C07a1: } private function createRemoteBackupCustomRcloneForm() : Form { goto dbd07; dbd07: $form = $this->createForm("\x41\160\x70\x5c\x46\x6f\162\x6d\x5c\x41\144\155\x69\x6e\122\145\155\157\164\x65\102\x61\143\153\x75\x70\103\165\163\x74\x6f\155\x52\x63\x6c\x6f\156\145\124\x79\160\x65", [], ["\141\x63\x74\x69\157\x6e" => $this->generateUrl("\143\x6c\x70\137\x61\144\155\x69\x6e\137\162\145\155\x6f\x74\145\137\x62\x61\143\x6b\x75\x70\137\156\x65\167", ["\x70\x72\x6f\x76\151\144\145\x72" => StorageProvider::CUSTOM_RCLONE]), "\155\x65\x74\150\157\x64" => "\x50\x4f\123\124"]); goto B65f8; B65f8: $form->add("\163\x75\x62\x6d\151\164", SubmitType::class, ["\x61\x74\164\x72" => ["\143\154\x61\x73\x73" => "\x62\x74\156\40\x62\x74\x6e\x2d\142\154\x75\x65\40\x62\164\x6e\x2d\154\x67"], "\154\141\142\145\154" => "\123\x61\166\145"]); goto eca85; eca85: return $form; goto F8ac0; F8ac0: } private function handleRemoteBackupAmazonS3Form(Request $request, Form $form) { goto d2fac; dd076: c05cb: goto b0ab5; d0c3b: try { goto D3171; a281b: $session->getFlashBag()->set("\163\165\143\143\x65\163\163", $this->translator->trans("\x52\145\x6d\157\x74\x65\40\x42\x61\143\x6b\165\x70\40\x53\x65\164\x74\x69\156\x67\163\40\x68\x61\x76\145\x20\x62\x65\145\156\x20\x73\141\166\x65\x64\56")); goto D8cca; A0c68: $this->configManager->set("\x72\x65\x6d\x6f\164\x65\x5f\142\x61\143\x6b\165\x70\x5f\x62\165\143\153\x65\164", $bucket); goto da4de; C4475: $region = $form->get("\162\x65\147\151\x6f\156")->getData(); goto Adedd; Ed74b: $rclone->createCronJob($frequency, $executionTime); goto d9c31; a1e38: $this->configManager->set("\162\145\155\157\x74\145\137\142\141\x63\x6b\x75\x70\x5f\145\170\x65\143\165\164\x69\x6f\156\137\164\x69\x6d\145", $executionTime); goto Cffc8; d9c31: $eventData = ["\x73\x74\x6f\x72\x61\x67\145\x50\x72\157\166\151\144\x65\162" => StorageProvider::AMAZON_S3, "\x72\145\155\x6f\x74\x65\102\141\x63\x6b\165\x70\x45\156\x61\142\x6c\145\144" => $remoteBackupEnabled, "\x66\162\x65\161\165\145\x6e\x63\x79" => $frequency, "\145\x78\145\x63\x75\x74\151\157\156\x54\x69\155\x65" => $executionTime, "\x62\x75\x63\x6b\145\x74" => $bucket, "\x72\145\x67\151\157\x6e" => $region, "\x73\164\157\x72\x61\147\x65\104\x69\162\145\x63\x74\x6f\162\171" => $storageDirectory]; goto C96be; B27a4: $excludes = false === empty($excludes) ? json_encode($excludes) : ''; goto a0010; d01d5: $rcloneConfigBuilder = new RcloneConfigBuilder($rcloneConfigTemplate); goto b199a; A74a4: $this->configManager->set("\x72\x65\155\157\x74\145\137\x62\x61\x63\x6b\x75\160\x5f\x65\156\x61\x62\x6c\x65\144", $remoteBackupEnabled); goto bd982; Fe989: $rclone = new Rclone(); goto b215e; ea187: $frequency = $form->get("\x66\x72\x65\161\x75\145\x6e\x63\x79")->getData(); goto b3fca; D8cca: $response = $this->redirect($this->generateUrl("\x63\154\160\137\141\144\155\x69\x6e\137\x72\145\155\157\x74\145\x5f\142\x61\143\x6b\x75\160\137\x65\144\151\164", ["\160\x72\157\x76\151\x64\x65\x72" => StorageProvider::AMAZON_S3])); goto Bbe6a; d7b4a: $user = $this->getUser(); goto cccc1; dfc4b: $rcloneConfigTemplate = new AmazonS3ConfigTemplate(); goto cb086; Dee8a: $this->configManager->set("\162\145\x6d\x6f\164\x65\x5f\x62\141\x63\x6b\x75\x70\137\x61\x63\x63\x65\x73\x73\137\153\x65\171", $accessKey); goto Dd8c7; fa5b0: $excludes = array_map("\164\162\151\155", array_filter(explode(PHP_EOL, trim($excludes)))); goto B27a4; af8a5: $rcloneConfigTemplate->setAccessKeyId($accessKey); goto E951b; Bbe6a: return $response; goto E864b; da4de: $this->configManager->set("\162\x65\155\x6f\164\145\137\142\x61\x63\x6b\165\160\137\162\x65\147\x69\157\x6e", $region); goto Dee8a; B3df3: $storageDirectory = trim($form->get("\x73\164\157\162\x61\x67\x65\x44\x69\162\x65\143\164\157\162\171")->getData()); goto ef9f6; fd7fd: $this->configManager->set("\x72\145\x6d\x6f\164\x65\137\142\141\x63\x6b\165\160\137\163\164\x6f\x72\x61\x67\145\137\144\x69\162\x65\x63\164\x6f\x72\171", $storageDirectory); goto e3f06; D223e: $retentionPeriod = (int) $form->get("\162\145\x74\x65\x6e\x74\x69\157\156\x50\145\162\151\x6f\x64")->getData(); goto C3a11; D3171: $session = $request->getSession(); goto d7b4a; bd982: $this->configManager->set("\x72\145\x6d\x6f\164\x65\x5f\142\x61\143\153\165\160\x5f\x66\x72\x65\161\x75\x65\156\x63\171", $frequency); goto a1e38; b215e: $rclone->writeConfig($rcloneConfig); goto Ed74b; C3a11: $bucket = $form->get("\x62\x75\143\x6b\145\164")->getData(); goto C4475; bee57: $secretAccessKey = $form->get("\163\145\143\162\x65\164\x41\143\x63\x65\163\163\113\x65\x79")->getData(); goto B3df3; e3f06: $this->configManager->set("\x72\145\x6d\157\x74\x65\137\x62\x61\x63\x6b\165\160\x5f\145\170\x63\x6c\165\144\145\x73", $excludes); goto dfc4b; cb086: $rcloneConfigTemplate->setRegion($region); goto af8a5; Adedd: $accessKey = $form->get("\141\143\143\x65\x73\x73\113\145\171")->getData(); goto bee57; d42ad: $this->configManager->set("\162\x65\x6d\157\164\x65\x5f\142\x61\x63\x6b\165\160\137\163\x74\x6f\162\141\147\145\x5f\160\162\x6f\166\x69\x64\x65\162", StorageProvider::AMAZON_S3); goto A74a4; E951b: $rcloneConfigTemplate->setSecretAccessKey($secretAccessKey); goto d01d5; ef9f6: $excludes = $form->get("\x65\x78\143\x6c\165\x64\145\163")->getData(); goto fa5b0; cccc1: $remoteBackupEnabled = (int) $form->get("\145\156\x61\142\154\145\x52\145\x6d\157\164\x65\102\x61\143\x6b\x75\x70")->getData(); goto ea187; a0010: $this->configManager->deleteByWildcard("\162\x65\x6d\x6f\164\145\137\x62\x61\x63\153\x75\160\137\45"); goto d42ad; C96be: EventQueue::addEvent(EventQueue::EVENT_REMOTE_BACKUP_CREATE, $user, $eventData, $request); goto a281b; b3fca: $executionTime = $form->get("\x65\170\x65\x63\165\164\151\x6f\156\x54\x69\155\x65")->getData(); goto D223e; b199a: $rcloneConfig = $rcloneConfigBuilder->build(); goto Fe989; Dd8c7: $this->configManager->set("\162\145\155\157\164\x65\x5f\142\x61\x63\153\165\160\137\x73\x65\x63\162\x65\x74\137\x61\143\x63\145\163\163\137\x6b\145\171", $secretAccessKey); goto fd7fd; Cffc8: $this->configManager->set("\162\x65\155\x6f\x74\145\x5f\142\141\143\x6b\x75\x70\x5f\x72\x65\x74\145\156\x74\151\x6f\156\137\160\145\x72\x69\157\x64", $retentionPeriod); goto A0c68; E864b: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\144\141\x6e\x67\145\162", $this->translator->trans("\101\156\40\145\162\x72\157\x72\40\x68\141\163\x20\157\x63\x63\165\162\162\145\144\x2c\x20\145\162\162\157\x72\40\x6d\145\163\163\x61\147\145\72\40\x25\x65\162\162\157\x72\x4d\145\x73\x73\x61\147\145\45", ["\x25\145\x72\162\x6f\162\x4d\145\x73\163\x61\147\145\45" => $e->getMessage()])); } goto dd076; A765b: E76d0: goto d0c3b; dbf00: $this->formErrors = $this->getErrorMessages($form); goto E4d4c; d2fac: if (true === $form->isValid()) { goto E76d0; } goto dbf00; E4d4c: goto c05cb; goto A765b; b0ab5: } private function handleRemoteBackupWasabiForm(Request $request, Form $form) { goto d10f7; d533f: $this->formErrors = $this->getErrorMessages($form); goto bd504; bd504: goto Ffc3b; goto e08fc; d10f7: if (true === $form->isValid()) { goto c8c6d; } goto d533f; e08fc: c8c6d: goto ee667; a5bbc: Ffc3b: goto bf44a; ee667: try { goto e130a; d6134: $storageDirectory = trim($form->get("\163\164\x6f\162\x61\x67\x65\104\x69\x72\x65\143\164\157\x72\171")->getData()); goto f0000; dcd4c: $response = $this->redirect($this->generateUrl("\143\x6c\160\137\x61\144\x6d\x69\x6e\137\162\x65\155\157\164\145\x5f\142\x61\x63\153\x75\x70\x5f\145\x64\151\x74", ["\160\x72\157\x76\x69\144\145\x72" => StorageProvider::WASABI])); goto B6d4f; B4aa6: $session->getFlashBag()->set("\163\165\x63\143\x65\x73\163", $this->translator->trans("\x52\x65\x6d\157\164\145\40\x42\x61\143\x6b\x75\160\40\123\145\164\x74\x69\156\x67\163\40\150\x61\x76\x65\x20\x62\145\x65\156\x20\163\x61\166\145\x64\56")); goto dcd4c; c2f57: $rcloneConfigTemplate = new WasabiConfigTemplate(); goto e4fb0; f0000: $excludes = $form->get("\x65\x78\x63\x6c\165\144\x65\163")->getData(); goto d3643; d3643: $excludes = array_map("\x74\162\x69\x6d", array_filter(explode(PHP_EOL, trim($excludes)))); goto acbb1; a4602: $retentionPeriod = (int) $form->get("\x72\145\164\145\x6e\x74\x69\x6f\156\x50\145\162\151\x6f\x64")->getData(); goto Eb4f6; ddace: $rclone = new Rclone(); goto c8da0; c8312: $rcloneConfigTemplate->setSecretAccessKey($secretAccessKey); goto c058c; a59b4: $rcloneConfig = $rcloneConfigBuilder->build(); goto ddace; e4fb0: $rcloneConfigTemplate->setRegion($region); goto ec7d5; a029e: $region = $form->get("\162\145\x67\x69\157\156")->getData(); goto E9524; acbb1: $excludes = false === empty($excludes) ? json_encode($excludes) : ''; goto c6e10; a9802: $this->configManager->set("\162\145\155\x6f\164\145\x5f\x62\x61\x63\153\x75\160\137\163\x65\143\x72\x65\164\137\x61\x63\143\145\x73\163\x5f\x6b\145\x79", $secretAccessKey); goto Ab5eb; c058c: $rcloneConfigBuilder = new RcloneConfigBuilder($rcloneConfigTemplate); goto a59b4; e1e81: $this->configManager->set("\x72\145\155\157\164\x65\x5f\x62\x61\x63\x6b\165\x70\137\162\145\147\x69\157\156", $region); goto B8e75; b574e: $this->configManager->set("\162\145\155\157\x74\145\x5f\142\141\143\x6b\x75\x70\137\x72\x65\x74\x65\156\164\x69\157\156\137\160\x65\x72\151\157\144", $retentionPeriod); goto E0254; E9524: $accessKey = $form->get("\x61\x63\143\145\x73\163\x4b\x65\x79")->getData(); goto F8df1; Ddfeb: $user = $this->getUser(); goto d7bf8; c8da0: $rclone->writeConfig($rcloneConfig); goto F9676; ec7d5: $rcloneConfigTemplate->setAccessKeyId($accessKey); goto c8312; a01e3: $this->configManager->set("\162\x65\155\x6f\x74\145\137\x62\141\143\x6b\165\160\x5f\145\x78\x63\x6c\165\x64\145\163", $excludes); goto c2f57; E0254: $this->configManager->set("\162\x65\155\x6f\164\145\137\x62\x61\x63\x6b\165\160\x5f\x62\165\143\x6b\145\164", $bucket); goto e1e81; B8e75: $this->configManager->set("\x72\145\155\x6f\164\x65\x5f\x62\x61\x63\x6b\x75\x70\137\141\x63\143\145\163\163\x5f\153\x65\171", $accessKey); goto a9802; C0cb1: $this->configManager->set("\x72\145\x6d\x6f\164\145\137\x62\x61\x63\153\x75\160\x5f\145\x6e\x61\142\x6c\x65\144", $remoteBackupEnabled); goto B3475; e54b6: $this->configManager->set("\x72\x65\155\157\x74\x65\x5f\x62\x61\143\153\165\x70\137\x65\x78\x65\143\165\164\x69\157\x6e\x5f\x74\x69\155\145", $executionTime); goto b574e; F9676: $rclone->createCronJob($frequency, $executionTime); goto F7a93; ac31b: $this->configManager->set("\162\x65\x6d\157\x74\145\x5f\x62\141\x63\153\165\160\x5f\163\164\157\x72\x61\x67\x65\x5f\x70\x72\157\x76\x69\144\145\x72", StorageProvider::WASABI); goto C0cb1; Bf88e: $executionTime = $form->get("\145\x78\x65\x63\x75\x74\x69\157\156\124\151\155\145")->getData(); goto a4602; Eb4f6: $bucket = $form->get("\142\165\143\x6b\x65\164")->getData(); goto a029e; B6d4f: return $response; goto bfb31; B3475: $this->configManager->set("\x72\x65\x6d\157\x74\x65\x5f\142\141\x63\x6b\165\160\x5f\146\x72\145\x71\165\145\156\x63\171", $frequency); goto e54b6; F8df1: $secretAccessKey = $form->get("\x73\x65\x63\x72\x65\x74\x41\x63\x63\145\x73\163\113\145\171")->getData(); goto d6134; F7a93: $eventData = ["\163\164\x6f\x72\141\147\145\x50\x72\157\x76\x69\144\145\162" => StorageProvider::WASABI, "\x72\x65\155\x6f\164\x65\x42\141\x63\153\165\x70\x45\156\141\x62\154\x65\x64" => $remoteBackupEnabled, "\x66\162\145\161\x75\145\x6e\143\171" => $frequency, "\x65\170\x65\x63\165\164\151\157\156\124\x69\x6d\145" => $executionTime, "\142\x75\x63\x6b\x65\x74" => $bucket, "\162\x65\x67\151\x6f\156" => $region, "\x73\x74\157\x72\141\x67\x65\x44\151\x72\x65\x63\164\157\x72\171" => $storageDirectory]; goto a3dac; e130a: $session = $request->getSession(); goto Ddfeb; c6e10: $this->configManager->deleteByWildcard("\162\x65\155\x6f\x74\145\x5f\x62\x61\143\x6b\165\160\x5f\x25"); goto ac31b; a3dac: EventQueue::addEvent(EventQueue::EVENT_REMOTE_BACKUP_CREATE, $user, $eventData, $request); goto B4aa6; d7bf8: $remoteBackupEnabled = (int) $form->get("\145\156\x61\142\154\x65\x52\x65\x6d\x6f\164\x65\102\x61\143\x6b\x75\x70")->getData(); goto Ff2f4; Ff2f4: $frequency = $form->get("\146\x72\145\x71\x75\x65\156\143\x79")->getData(); goto Bf88e; Ab5eb: $this->configManager->set("\162\x65\x6d\x6f\164\x65\137\x62\x61\143\x6b\x75\x70\x5f\x73\164\157\x72\141\x67\x65\137\x64\151\x72\x65\x63\164\157\x72\x79", $storageDirectory); goto a01e3; bfb31: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\144\x61\x6e\x67\x65\162", $this->translator->trans("\x41\156\40\x65\162\162\x6f\162\40\x68\x61\163\x20\x6f\x63\143\165\x72\x72\145\144\54\x20\145\162\x72\x6f\162\x20\x6d\145\x73\163\141\147\x65\72\40\45\x65\x72\x72\157\x72\115\x65\x73\163\x61\x67\145\45", ["\45\145\162\162\x6f\x72\115\x65\163\163\141\147\145\x25" => $e->getMessage()])); } goto a5bbc; bf44a: } private function handleRemoteBackupGoogleDriveForm(Request $request, Form $form) { goto e69a5; f4df5: $this->formErrors = $this->getErrorMessages($form); goto Dd7f9; Dd7f9: goto dbb6f; goto e06a9; d3fc1: dbb6f: goto e1d09; e69a5: if (true === $form->isValid()) { goto Add0e; } goto f4df5; cf881: try { goto Eced2; e22b4: $excludes = false === empty($excludes) ? json_encode($excludes) : ''; goto aa75d; b7e37: $this->configManager->set("\162\145\x6d\157\x74\x65\137\x62\x61\x63\x6b\165\x70\137\x73\164\157\x72\141\x67\x65\137\144\151\162\145\x63\x74\157\162\x79", $storageDirectory); goto E356b; F771b: $this->configManager->set("\x72\x65\x6d\x6f\164\145\x5f\142\x61\x63\153\165\160\137\145\170\145\x63\165\x74\151\157\x6e\x5f\164\x69\x6d\145", $executionTime); goto d895f; a30ba: $excludes = $form->get("\x65\x78\143\x6c\x75\144\x65\x73")->getData(); goto f79ce; Eced2: $session = $request->getSession(); goto A6996; Ecca4: $this->configManager->set("\x72\x65\x6d\157\x74\145\137\142\141\x63\153\165\x70\137\146\x72\x65\161\165\x65\x6e\x63\171", $frequency); goto F771b; Cae4d: $this->configManager->set("\x72\x65\x6d\157\164\145\x5f\142\x61\x63\153\165\x70\x5f\x73\x65\x72\166\x69\x63\145\137\141\x63\x63\157\x75\x6e\164", $serviceAccount); goto b7e37; e5b3f: return $response; goto a15b6; Db1ba: $this->configManager->set("\162\x65\x6d\x6f\164\x65\x5f\142\141\x63\153\165\x70\137\145\155\x61\x69\154", $email); goto Cae4d; dfbcb: $rclone->writeConfig($rcloneConfig); goto Ac1ce; d895f: $this->configManager->set("\162\x65\x6d\157\x74\145\137\142\141\143\153\x75\x70\137\162\145\x74\145\x6e\164\x69\157\x6e\x5f\x70\145\x72\151\157\144", $retentionPeriod); goto Db1ba; f00e0: $storageDirectory = trim($form->get("\163\x74\x6f\162\x61\x67\145\104\x69\x72\145\x63\164\x6f\162\171")->getData()); goto a30ba; Edb29: $rclone->createCronJob($frequency, $executionTime); goto ce149; C48e3: EventQueue::addEvent(EventQueue::EVENT_REMOTE_BACKUP_CREATE, $user, $eventData, $request); goto C9a87; aa75d: $this->configManager->deleteByWildcard("\162\145\155\x6f\164\145\137\x62\x61\143\x6b\165\x70\137\45"); goto cd078; ce149: $eventData = ["\163\x74\157\x72\141\x67\x65\x50\x72\157\166\x69\144\x65\162" => StorageProvider::GOOGLE_DRIVE, "\x72\x65\155\157\x74\145\102\141\x63\153\x75\x70\105\156\x61\142\154\145\144" => $remoteBackupEnabled, "\x66\x72\145\161\x75\x65\156\x63\171" => $frequency, "\x65\x78\145\143\x75\164\x69\x6f\156\x54\x69\x6d\x65" => $executionTime, "\145\x2d\155\141\x69\x6c" => $email, "\163\164\157\162\141\x67\x65\104\x69\162\x65\143\164\157\x72\171" => $storageDirectory]; goto C48e3; da668: $response = $this->redirect($this->generateUrl("\x63\x6c\x70\137\141\x64\155\151\156\137\162\145\x6d\157\x74\x65\137\x62\141\143\153\165\x70\137\x65\x64\x69\x74", ["\x70\x72\157\x76\151\x64\145\162" => StorageProvider::GOOGLE_DRIVE])); goto e5b3f; cd078: $this->configManager->set("\x72\145\155\157\164\145\137\x62\x61\143\x6b\165\x70\137\x73\164\157\162\141\x67\145\x5f\x70\x72\157\166\x69\x64\145\x72", StorageProvider::GOOGLE_DRIVE); goto afb1a; D4096: $rcloneConfigTemplate = new GoogleDriveConfigTemplate(); goto A7434; c55bb: $rcloneConfig = $rcloneConfigBuilder->build(); goto C256e; A7434: $rcloneConfigBuilder = new RcloneConfigBuilder($rcloneConfigTemplate); goto c55bb; E356b: $this->configManager->set("\x72\145\155\157\x74\145\137\142\141\143\x6b\x75\160\x5f\x65\170\143\x6c\x75\144\x65\x73", $excludes); goto D4096; A6996: $user = $this->getUser(); goto aecc9; daa0d: $frequency = $form->get("\x66\162\x65\161\x75\x65\x6e\x63\171")->getData(); goto e2592; afb1a: $this->configManager->set("\162\x65\x6d\x6f\164\x65\x5f\142\141\143\153\165\x70\x5f\x65\156\x61\142\x6c\145\x64", $remoteBackupEnabled); goto Ecca4; f79ce: $excludes = array_map("\x74\x72\x69\155", array_filter(explode(PHP_EOL, trim($excludes)))); goto e22b4; aecc9: $remoteBackupEnabled = (int) $form->get("\x65\x6e\x61\x62\x6c\145\122\145\x6d\157\164\145\102\x61\x63\x6b\165\160")->getData(); goto daa0d; e417f: $serviceAccount = trim($form->get("\163\145\162\166\151\x63\145\101\x63\143\x6f\165\156\164")->getData()); goto f00e0; C9a87: $session->getFlashBag()->set("\163\x75\x63\x63\x65\x73\x73", $this->translator->trans("\x52\x65\155\x6f\x74\x65\40\102\x61\x63\153\x75\x70\x20\123\145\164\164\x69\156\x67\163\x20\150\x61\166\x65\x20\x62\x65\145\156\x20\x73\x61\166\x65\144\56")); goto da668; Aa91c: $retentionPeriod = (int) $form->get("\x72\145\x74\x65\x6e\x74\151\x6f\x6e\x50\x65\162\151\157\x64")->getData(); goto d966e; e2592: $executionTime = $form->get("\145\170\x65\143\165\x74\151\x6f\x6e\124\151\x6d\x65")->getData(); goto Aa91c; d966e: $email = $form->get("\x65\155\141\151\x6c")->getData(); goto e417f; Ac1ce: $rclone->writeCredentialsFile(GoogleDriveConfigTemplate::SERVICE_ACCOUNT_FILE, $serviceAccount); goto Edb29; C256e: $rclone = new Rclone(); goto dfbcb; a15b6: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\x64\141\156\x67\x65\162", $this->translator->trans("\101\156\40\145\162\162\157\162\x20\x68\x61\163\40\x6f\143\x63\x75\162\162\x65\144\54\40\x65\x72\x72\x6f\162\40\155\x65\163\163\141\x67\x65\x3a\40\45\145\x72\162\157\162\x4d\145\x73\x73\x61\x67\145\45", ["\45\x65\162\x72\157\x72\115\145\163\x73\141\147\x65\x25" => $e->getMessage()])); } goto d3fc1; e06a9: Add0e: goto cf881; e1d09: } private function handleRemoteBackupDropboxForm(Request $request, Form $form) { goto f29f1; a39fd: try { goto D1f2f; E34ad: $refreshToken = $session->get("\162\x65\x66\x72\x65\163\150\124\157\153\145\x6e"); goto df0a2; Ef781: $excludes = $form->get("\145\170\x63\x6c\165\144\x65\163")->getData(); goto a7c6c; cc017: $excludes = false === empty($excludes) ? json_encode($excludes) : ''; goto Fce90; Cb990: $session->getFlashBag()->set("\x73\165\x63\x63\x65\163\x73", $this->translator->trans("\122\x65\x6d\x6f\x74\x65\x20\x42\141\x63\x6b\165\160\x20\123\x65\164\164\x69\156\x67\163\x20\x68\x61\x76\145\40\142\x65\145\x6e\40\x73\x61\166\145\x64\56")); goto B69a6; F0272: $retentionPeriod = (int) $form->get("\x72\x65\x74\145\156\x74\x69\157\x6e\x50\145\x72\x69\157\144")->getData(); goto e2f6e; A7ddc: $executionTime = $form->get("\145\170\x65\x63\165\x74\x69\x6f\x6e\x54\x69\x6d\x65")->getData(); goto F0272; Fce90: $token = $session->get("\164\x6f\x6b\x65\156"); goto E34ad; B69a6: $response = $this->redirect($this->generateUrl("\143\154\x70\x5f\x61\144\155\151\x6e\137\162\145\x6d\x6f\x74\145\137\142\x61\x63\153\165\x70\137\x65\x64\151\x74", ["\x70\x72\x6f\166\151\144\x65\162" => StorageProvider::DROPBOX])); goto f33fe; a334c: $this->configManager->set("\162\145\155\x6f\164\145\137\x62\x61\143\x6b\165\x70\x5f\163\x74\157\x72\x61\147\x65\x5f\144\151\x72\145\143\164\x6f\162\171", $storageDirectory); goto e4ead; B997b: $eventData = ["\163\x74\x6f\x72\x61\147\145\120\162\x6f\166\x69\x64\145\x72" => StorageProvider::DROPBOX, "\x72\145\155\157\x74\145\x42\141\x63\153\165\x70\x45\x6e\141\x62\x6c\145\x64" => $remoteBackupEnabled, "\146\162\x65\161\165\x65\x6e\143\x79" => $frequency, "\x65\170\x65\x63\165\x74\151\157\156\124\151\155\x65" => $executionTime, "\163\x74\x6f\162\141\x67\x65\x44\151\x72\x65\143\164\157\x72\171" => $storageDirectory]; goto d2a9f; d4c6a: $rclone = new Rclone(); goto cec8d; a1db6: $rclone->createCronJob($frequency, $executionTime); goto B997b; Ad2cc: $this->configManager->set("\x72\145\155\x6f\x74\x65\137\142\141\x63\153\x75\160\x5f\x73\164\157\162\x61\x67\145\x5f\x70\x72\157\x76\x69\x64\x65\x72", StorageProvider::DROPBOX); goto B22d3; df0a2: $this->configManager->deleteByWildcard("\162\x65\x6d\157\164\145\137\x62\141\x63\x6b\165\160\x5f\45"); goto Ad2cc; B22d3: $this->configManager->set("\x72\x65\155\157\164\145\x5f\142\x61\143\x6b\x75\x70\137\x65\156\141\142\154\145\x64", $remoteBackupEnabled); goto Fa7f0; ee085: $rcloneConfig = $rcloneConfigBuilder->build(); goto d4c6a; d2a9f: EventQueue::addEvent(EventQueue::EVENT_REMOTE_BACKUP_CREATE, $user, $eventData, $request); goto Cb990; a03c4: $rcloneConfigTemplate->setToken($token); goto a861c; D1f2f: $session = $request->getSession(); goto c0302; f33fe: return $response; goto f82e4; c17d9: $this->configManager->set("\162\145\155\157\x74\x65\137\142\x61\x63\x6b\165\160\137\x72\x65\x66\x72\145\x73\x68\137\164\157\x6b\145\x6e", $refreshToken); goto Ec697; cec8d: $rclone->writeConfig($rcloneConfig); goto a1db6; cb238: $this->configManager->set("\162\x65\x6d\157\164\145\x5f\142\x61\x63\153\165\160\137\x65\x78\x65\143\x75\x74\151\x6f\x6e\x5f\164\151\155\145", $executionTime); goto ecc21; ecc21: $this->configManager->set("\x72\145\x6d\157\x74\145\x5f\142\141\x63\x6b\165\x70\137\162\145\164\145\156\164\x69\x6f\x6e\137\160\145\162\x69\157\x64", $retentionPeriod); goto a334c; c0302: $user = $this->getUser(); goto E245e; Fa7f0: $this->configManager->set("\x72\x65\155\x6f\164\x65\137\x62\x61\x63\153\165\160\137\x66\x72\x65\161\165\145\156\x63\171", $frequency); goto cb238; Ec697: $rcloneConfigTemplate = new DropboxConfigTemplate(); goto a03c4; e4ead: $this->configManager->set("\x72\145\x6d\157\164\x65\x5f\x62\141\x63\x6b\165\x70\137\x65\x78\x63\154\165\x64\x65\x73", $excludes); goto c17d9; a861c: $rcloneConfigBuilder = new RcloneConfigBuilder($rcloneConfigTemplate); goto ee085; E245e: $remoteBackupEnabled = (int) $form->get("\145\156\x61\x62\x6c\145\x52\145\155\157\x74\x65\102\x61\x63\x6b\x75\x70")->getData(); goto F6fa0; a7c6c: $excludes = array_map("\x74\x72\151\155", array_filter(explode(PHP_EOL, trim($excludes)))); goto cc017; F6fa0: $frequency = $form->get("\x66\x72\145\x71\165\x65\156\x63\x79")->getData(); goto A7ddc; e2f6e: $storageDirectory = trim($form->get("\x73\164\157\162\x61\x67\145\104\x69\162\145\143\164\157\162\171")->getData()); goto Ef781; f82e4: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\144\141\x6e\x67\x65\x72", $this->translator->trans("\101\156\40\145\162\x72\157\x72\40\150\141\x73\40\157\x63\x63\x75\162\x72\x65\144\x2c\40\145\162\x72\157\162\40\x6d\x65\x73\x73\x61\147\145\72\x20\45\x65\162\x72\x6f\162\115\x65\163\163\x61\x67\x65\45", ["\45\145\162\x72\x6f\x72\115\x65\163\x73\141\147\x65\x25" => $e->getMessage()])); } goto Bd0ce; Fb170: $this->formErrors = $this->getErrorMessages($form); goto cc59f; Beeb3: D843e: goto a39fd; f29f1: if (true === $form->isValid()) { goto D843e; } goto Fb170; cc59f: goto d6a51; goto Beeb3; Bd0ce: d6a51: goto D9662; D9662: } private function handleRemoteBackupSftpForm(Request $request, Form $form) { goto b4e65; ff957: try { goto dd421; D39bb: $rcloneConfigTemplate = new SftpConfigTemplate(); goto afa75; f6bb7: $excludes = array_map("\x74\162\x69\x6d", array_filter(explode(PHP_EOL, trim($excludes)))); goto F50c4; e18d3: $authenticationMethod = $form->get("\x61\165\x74\x68\x65\x6e\164\x69\143\x61\x74\x69\x6f\156\x4d\x65\x74\x68\x6f\x64")->getData(); goto db90a; f0f6b: $port = $form->get("\x70\x6f\162\x74")->getData(); goto f238d; E738a: $rcloneConfigTemplate->setSetting("\165\163\145\162", $user); goto B9ed9; aceac: $remoteBackupEnabled = (int) $form->get("\x65\x6e\141\142\154\x65\x52\x65\155\157\x74\x65\102\x61\143\153\x75\160")->getData(); goto a0308; b8302: $executionTime = $form->get("\x65\170\145\x63\165\x74\x69\x6f\x6e\x54\151\x6d\145")->getData(); goto fe9a7; afa75: $rcloneConfigTemplate->setSetting("\x68\x6f\x73\164", $host); goto E738a; dc61b: $commandExecutor->execute($rclonePasswordObscureCommand); goto A4047; F6b2b: $user = trim($form->get("\x75\163\x65\x72")->getData()); goto fdfd2; c765e: E9a7e: goto e121e; b8446: A15d8: goto f025c; A243c: $this->configManager->set("\162\x65\x6d\x6f\x74\145\137\x62\141\x63\153\165\160\x5f\160\x61\x73\x73\x77\157\x72\144", $obscuredPassword); goto b8446; c42c0: $this->configManager->set("\162\145\x6d\157\x74\145\x5f\x62\141\143\x6b\165\160\x5f\x70\x6f\x72\x74", $port); goto F0372; E98a7: $rcloneConfig = $rcloneConfigBuilder->build(); goto Fc113; B6685: $response = $this->redirect($this->generateUrl("\x63\154\160\x5f\141\x64\x6d\x69\156\137\x72\x65\x6d\x6f\164\x65\x5f\x62\x61\143\153\165\160\x5f\145\144\x69\164", ["\x70\x72\157\x76\x69\x64\145\162" => StorageProvider::SFTP])); goto Cae98; dd421: $session = $request->getSession(); goto aa420; c6d86: $this->configManager->set("\162\x65\x6d\x6f\x74\x65\x5f\142\141\x63\x6b\165\x70\x5f\146\162\145\x71\165\x65\156\143\171", $frequency); goto B9a83; Fc1ab: $this->configManager->set("\x72\x65\155\157\x74\145\x5f\142\x61\143\x6b\x75\160\137\141\165\x74\x68\x65\x6e\164\x69\143\x61\x74\151\157\156\x5f\155\x65\164\x68\157\144", $authenticationMethod); goto E7cd9; fac2c: $rcloneConfigTemplate->setSetting("\x6b\145\x79\x5f\x66\151\x6c\145", $keyFile); goto e0899; e9371: $rclone->createCronJob($frequency, $executionTime); goto a27db; Cb7af: $this->configManager->deleteByWildcard("\162\145\x6d\157\x74\x65\x5f\142\x61\x63\x6b\x75\160\x5f\x25"); goto eff3b; fdfd2: $password = trim($form->get("\x70\141\x73\163\x77\157\x72\144")->getData()); goto ec611; a3ac5: goto A15d8; goto c765e; f238d: $storageDirectory = trim($form->get("\163\164\157\162\x61\147\x65\104\151\x72\x65\x63\164\157\162\x79")->getData()); goto bd0da; aa420: $currentUser = $this->getUser(); goto aceac; a0308: $frequency = $form->get("\x66\x72\145\x71\165\145\x6e\143\x79")->getData(); goto b8302; eff3b: $this->configManager->set("\162\145\x6d\x6f\164\145\137\x62\x61\x63\x6b\x75\160\137\x73\x74\157\162\141\147\x65\137\160\x72\157\x76\x69\x64\145\162", StorageProvider::SFTP); goto e9b30; F50c4: $excludes = false === empty($excludes) ? json_encode($excludes) : ''; goto Cb7af; d517a: EventQueue::addEvent(EventQueue::EVENT_REMOTE_BACKUP_CREATE, $currentUser, $eventData, $request); goto E146e; f025c: $rcloneConfigTemplate->setSetting("\x70\x6f\162\164", $port); goto Fef0c; Cae98: return $response; goto dae63; Ae6b5: $rclonePasswordObscureCommand->setPassword($password); goto dc61b; db90a: $host = trim($form->get("\150\x6f\163\164")->getData()); goto F6b2b; B9a83: $this->configManager->set("\x72\x65\155\157\x74\x65\137\x62\141\143\x6b\x75\160\137\145\x78\145\143\x75\164\x69\x6f\156\x5f\x74\151\155\145", $executionTime); goto E2666; E2183: $rclonePasswordObscureCommand = new RclonePasswordObscureCommand(); goto Ae6b5; F0372: $this->configManager->set("\162\x65\x6d\x6f\164\x65\137\142\141\x63\x6b\x75\160\137\163\164\157\162\x61\x67\x65\137\x64\x69\x72\145\143\164\x6f\162\171", $storageDirectory); goto Bee5c; Fc113: $rclone = new Rclone(); goto bdfbb; a27db: $eventData = ["\163\164\x6f\x72\141\x67\x65\x50\x72\x6f\x76\151\144\x65\162" => StorageProvider::SFTP, "\162\145\155\x6f\164\145\x42\x61\143\153\165\x70\x45\x6e\141\x62\x6c\145\x64" => $remoteBackupEnabled, "\x66\162\145\161\165\x65\156\143\x79" => $frequency, "\145\x78\x65\143\x75\x74\x69\157\156\124\151\155\145" => $executionTime, "\x61\x75\164\150\x65\x6e\x74\x69\143\x61\x74\151\157\156\x4d\x65\164\x68\157\144" => $authenticationMethod, "\x68\x6f\163\x74" => $host, "\165\x73\x65\162" => $user, "\x70\x6f\162\x74" => $port, "\163\164\x6f\x72\x61\x67\x65\104\x69\x72\145\x63\x74\157\x72\x79" => $storageDirectory]; goto d517a; E2666: $this->configManager->set("\162\145\x6d\157\x74\145\137\x62\x61\143\153\165\x70\137\x72\145\x74\145\156\164\151\x6f\x6e\137\x70\145\x72\151\x6f\144", $retentionPeriod); goto Fc1ab; A4047: $obscuredPassword = $rclonePasswordObscureCommand->getObscuredPassword(); goto Cb2e6; e9b30: $this->configManager->set("\162\145\155\157\164\145\x5f\142\x61\x63\153\x75\160\x5f\x65\156\x61\x62\x6c\x65\x64", $remoteBackupEnabled); goto c6d86; Bee5c: $this->configManager->set("\x72\x65\155\157\x74\145\137\x62\x61\x63\x6b\165\x70\x5f\145\170\143\154\x75\x64\145\x73", $excludes); goto D39bb; ec611: $keyFile = trim($form->get("\x6b\x65\x79\106\x69\154\x65")->getData()); goto f0f6b; Fef0c: $rcloneConfigBuilder = new RcloneConfigBuilder($rcloneConfigTemplate); goto E98a7; bd0da: $excludes = $form->get("\x65\x78\x63\154\x75\x64\145\163")->getData(); goto f6bb7; b7696: $this->configManager->set("\162\145\x6d\157\164\x65\137\142\x61\143\153\x75\160\x5f\x75\163\145\162", $user); goto c42c0; e121e: $commandExecutor = new CommandExecutor(); goto E2183; E146e: $session->getFlashBag()->set("\x73\x75\143\143\x65\163\163", $this->translator->trans("\122\x65\155\x6f\x74\145\x20\x42\x61\143\153\x75\160\x20\x53\x65\x74\x74\151\x6e\147\163\x20\150\x61\x76\x65\x20\142\145\x65\x6e\x20\x73\141\x76\145\144\x2e")); goto B6685; bdfbb: $rclone->writeConfig($rcloneConfig); goto e9371; Cb2e6: $rcloneConfigTemplate->setSetting("\160\141\x73\163", $obscuredPassword); goto A243c; E7cd9: $this->configManager->set("\162\145\x6d\157\x74\x65\x5f\142\141\143\x6b\x75\160\137\x68\157\163\x74", $host); goto b7696; e0899: $this->configManager->set("\x72\145\155\x6f\x74\145\x5f\142\x61\x63\x6b\165\160\137\x6b\145\171\x5f\x66\151\x6c\x65", $keyFile); goto a3ac5; fe9a7: $retentionPeriod = (int) $form->get("\x72\x65\164\145\156\164\x69\x6f\x6e\x50\145\162\151\157\x64")->getData(); goto e18d3; B9ed9: if ("\160\x61\x73\163\x77\x6f\162\144" == $authenticationMethod) { goto E9a7e; } goto fac2c; dae63: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\144\x61\x6e\147\145\x72", $this->translator->trans("\x41\156\x20\x65\x72\x72\157\x72\40\x68\x61\x73\x20\157\143\x63\165\162\162\145\144\x2c\x20\x65\162\x72\157\162\x20\155\x65\163\163\141\x67\145\x3a\40\x25\x65\162\162\157\x72\x4d\x65\x73\163\x61\147\145\45", ["\x25\x65\x72\162\x6f\162\x4d\145\163\x73\141\147\145\45" => $e->getMessage()])); } goto c4bd2; fc270: $this->formErrors = $this->getErrorMessages($form); goto da5b9; c4bd2: Fe91d: goto a3312; b4e65: if (true === $form->isValid()) { goto cdfff; } goto fc270; da5b9: goto Fe91d; goto Ed4b5; Ed4b5: cdfff: goto ff957; a3312: } private function handleRemoteBackupDigitalOceanSpacesForm(Request $request, Form $form) { goto Cdea8; Cdea8: if (true === $form->isValid()) { goto F6a85; } goto e74ee; c416c: a0b01: goto F564f; Bc3c8: goto a0b01; goto Dd17c; Dd17c: F6a85: goto B01e2; e74ee: $this->formErrors = $this->getErrorMessages($form); goto Bc3c8; B01e2: try { goto Ddd11; fd984: $this->configManager->set("\x72\145\155\157\x74\145\137\142\141\143\x6b\165\160\x5f\162\145\164\x65\x6e\164\x69\x6f\156\x5f\160\x65\x72\x69\x6f\x64", $retentionPeriod); goto f3869; A3c19: $rclone = new Rclone(); goto A8e62; d510a: $secretAccessKey = $form->get("\x73\145\143\162\x65\164\101\x63\143\x65\163\163\x4b\x65\x79")->getData(); goto E11a7; Bf551: $rclone->createCronJob($frequency, $executionTime); goto b6286; fbbb1: $rcloneConfigTemplate->setAccessKeyId($accessKey); goto fcfe3; b575c: $spaceEndpoint = $form->get("\163\160\x61\143\145\x45\x6e\144\160\157\151\x6e\164")->getData(); goto A0d42; c0ebd: $this->configManager->set("\x72\145\155\x6f\x74\x65\137\x62\141\143\153\165\160\x5f\141\143\x63\145\x73\163\137\153\145\171", $accessKey); goto cb755; b1dcb: $remoteBackupEnabled = (int) $form->get("\145\x6e\141\x62\x6c\145\122\145\x6d\157\x74\x65\x42\x61\143\153\x75\160")->getData(); goto D3fb9; b6286: $eventData = ["\x73\164\x6f\x72\141\147\145\120\162\x6f\x76\151\x64\145\x72" => StorageProvider::DIGITAL_OCEAN_SPACES, "\x72\145\155\157\164\x65\102\x61\x63\x6b\165\x70\105\x6e\141\142\x6c\x65\144" => $remoteBackupEnabled, "\x66\x72\x65\x71\x75\145\x6e\x63\171" => $frequency, "\x65\170\x65\x63\165\x74\x69\x6f\156\124\x69\x6d\145" => $executionTime, "\x73\160\x61\x63\145" => $space, "\145\x6e\x64\x70\157\x69\x6e\x74" => $spaceEndpoint, "\x73\164\157\x72\141\147\x65\104\151\162\x65\143\x74\x6f\162\x79" => $storageDirectory]; goto D6214; c9cd6: $this->configManager->set("\x72\145\x6d\x6f\x74\145\x5f\142\x61\x63\153\x75\160\137\x65\x78\x65\x63\x75\164\x69\x6f\x6e\137\164\x69\x6d\145", $executionTime); goto fd984; D3fb9: $frequency = $form->get("\146\x72\x65\x71\x75\145\x6e\x63\171")->getData(); goto f4a77; Aa6e7: $excludes = array_map("\164\x72\151\x6d", array_filter(explode(PHP_EOL, trim($excludes)))); goto d2fa3; D41fc: $rcloneConfigTemplate = new DigitalOceanSpacesConfigTemplate(); goto e117a; C69fd: $this->configManager->set("\x72\145\x6d\x6f\x74\145\137\142\x61\143\x6b\165\x70\x5f\163\160\141\143\145\137\145\156\144\x70\157\151\x6e\164", $spaceEndpoint); goto c0ebd; d2fa3: $excludes = false === empty($excludes) ? json_encode($excludes) : ''; goto c0cbe; F2b10: $rcloneConfigBuilder = new RcloneConfigBuilder($rcloneConfigTemplate); goto f7b71; Db88e: $this->configManager->set("\x72\x65\155\x6f\x74\x65\137\142\141\x63\x6b\165\160\137\163\164\x6f\x72\141\x67\145\137\x70\162\157\x76\151\144\x65\x72", StorageProvider::DIGITAL_OCEAN_SPACES); goto E5f96; cb755: $this->configManager->set("\x72\x65\x6d\157\x74\x65\137\x62\x61\x63\153\x75\x70\x5f\x73\x65\x63\162\x65\164\x5f\x61\143\143\145\x73\x73\137\153\x65\171", $secretAccessKey); goto d60ef; A0d42: $accessKey = $form->get("\141\143\x63\145\163\x73\113\x65\x79")->getData(); goto d510a; D961d: $response = $this->redirect($this->generateUrl("\x63\x6c\x70\137\x61\144\x6d\x69\156\x5f\x72\145\155\157\164\145\x5f\x62\141\143\x6b\x75\x70\137\x65\x64\x69\x74", ["\160\x72\x6f\166\151\144\x65\x72" => StorageProvider::DIGITAL_OCEAN_SPACES])); goto f652b; fcfe3: $rcloneConfigTemplate->setSecretAccessKey($secretAccessKey); goto F2b10; f3869: $this->configManager->set("\x72\145\x6d\x6f\164\x65\x5f\x62\x61\143\x6b\x75\160\137\163\160\x61\x63\x65", $space); goto C69fd; c2ed7: $user = $this->getUser(); goto b1dcb; f4a77: $executionTime = $form->get("\x65\170\x65\143\x75\x74\x69\x6f\156\124\x69\x6d\x65")->getData(); goto F0fd8; D6214: EventQueue::addEvent(EventQueue::EVENT_REMOTE_BACKUP_CREATE, $user, $eventData, $request); goto ebc14; ebc14: $session->getFlashBag()->set("\x73\165\x63\143\145\x73\163", $this->translator->trans("\x52\x65\x6d\157\164\x65\x20\x42\141\143\153\165\160\40\123\145\x74\164\x69\156\147\163\x20\x68\x61\x76\x65\x20\142\x65\145\x6e\x20\x73\141\166\145\144\56")); goto D961d; f7b71: $rcloneConfig = $rcloneConfigBuilder->build(); goto A3c19; e117a: $rcloneConfigTemplate->setEndpoint($spaceEndpoint); goto fbbb1; b0cb3: $this->configManager->set("\162\145\x6d\x6f\x74\x65\137\142\141\143\x6b\165\160\x5f\145\x78\x63\154\x75\144\145\163", $excludes); goto D41fc; A8e62: $rclone->writeConfig($rcloneConfig); goto Bf551; d60ef: $this->configManager->set("\162\x65\155\x6f\x74\x65\x5f\x62\x61\x63\153\165\160\x5f\x73\164\x6f\162\x61\147\x65\x5f\x64\151\x72\145\x63\x74\157\162\x79", $storageDirectory); goto b0cb3; Bafd5: $excludes = $form->get("\145\170\143\x6c\x75\x64\x65\163")->getData(); goto Aa6e7; fbc0e: $this->configManager->set("\162\x65\155\x6f\164\145\137\142\141\143\153\165\160\x5f\x66\162\145\161\165\x65\x6e\x63\x79", $frequency); goto c9cd6; c0cbe: $this->configManager->deleteByWildcard("\162\x65\155\x6f\x74\145\x5f\x62\x61\143\153\165\160\x5f\45"); goto Db88e; f652b: return $response; goto c61e2; E5f96: $this->configManager->set("\162\145\x6d\x6f\164\145\137\x62\141\143\x6b\x75\x70\x5f\145\156\x61\x62\x6c\x65\x64", $remoteBackupEnabled); goto fbc0e; E11a7: $storageDirectory = trim($form->get("\x73\164\x6f\162\141\x67\x65\x44\151\x72\x65\143\164\x6f\x72\x79")->getData()); goto Bafd5; Ddd11: $session = $request->getSession(); goto c2ed7; Cf30d: $space = $form->get("\163\x70\141\143\145")->getData(); goto b575c; F0fd8: $retentionPeriod = (int) $form->get("\162\x65\164\145\x6e\164\x69\157\156\x50\x65\x72\151\x6f\144")->getData(); goto Cf30d; c61e2: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\144\141\156\x67\x65\162", $this->translator->trans("\101\156\40\x65\x72\162\x6f\x72\40\150\141\163\x20\157\143\x63\x75\x72\x72\145\x64\54\x20\145\162\162\x6f\x72\40\x6d\145\x73\x73\x61\x67\145\x3a\x20\x25\145\x72\x72\x6f\x72\x4d\x65\x73\163\141\147\145\45", ["\45\145\162\162\x6f\162\x4d\145\163\x73\141\147\145\x25" => $e->getMessage()])); } goto c416c; F564f: } private function handleRemoteBackupCustomRcloneForm(Request $request, Form $form) { goto d5aca; a5394: try { goto A5c2f; fe856: $excludes = array_map("\164\x72\x69\x6d", array_filter(explode(PHP_EOL, trim($excludes)))); goto Acc78; b4194: $storageDirectory = trim($form->get("\x73\164\157\162\x61\147\x65\104\151\162\145\x63\164\x6f\x72\171")->getData()); goto B6de5; E49bf: $retentionPeriod = (int) $form->get("\162\x65\x74\x65\156\x74\151\157\x6e\x50\x65\162\x69\x6f\144")->getData(); goto b4194; fd691: $rclone = new Rclone(); goto d44d8; E99b2: $this->configManager->set("\162\x65\x6d\157\164\145\x5f\142\141\x63\153\x75\x70\137\163\x74\x6f\162\x61\x67\x65\137\144\151\162\x65\143\x74\x6f\162\x79", $storageDirectory); goto E8d40; efb49: EventQueue::addEvent(EventQueue::EVENT_REMOTE_BACKUP_CREATE, $user, $eventData, $request); goto Ac9a7; C2ec6: $executionTime = $form->get("\x65\x78\x65\143\x75\164\x69\x6f\x6e\x54\151\x6d\x65")->getData(); goto E49bf; D3ddd: $this->configManager->set("\162\x65\x6d\157\x74\x65\x5f\x62\x61\143\x6b\165\x70\137\x72\x65\x74\x65\156\x74\151\x6f\156\x5f\160\145\x72\151\x6f\144", $retentionPeriod); goto E99b2; afb9a: $this->configManager->set("\x72\145\155\x6f\164\145\x5f\x62\x61\x63\153\165\160\137\163\164\x6f\x72\x61\147\x65\x5f\x70\162\157\x76\151\144\x65\x72", StorageProvider::CUSTOM_RCLONE); goto D558b; B6de5: $excludes = $form->get("\x65\x78\143\154\x75\144\x65\163")->getData(); goto fe856; d44d8: $rclone->createCronJob($frequency, $executionTime); goto f9ab3; D558b: $this->configManager->set("\162\145\x6d\x6f\x74\x65\x5f\142\141\x63\x6b\165\160\137\x65\156\141\x62\154\145\x64", $remoteBackupEnabled); goto F7505; c4e1c: $remoteBackupEnabled = (int) $form->get("\145\156\x61\142\x6c\x65\x52\x65\155\x6f\x74\145\102\x61\x63\x6b\x75\160")->getData(); goto D4702; F7505: $this->configManager->set("\x72\145\155\x6f\164\145\x5f\142\x61\143\x6b\x75\160\x5f\146\x72\145\x71\x75\145\156\143\171", $frequency); goto E15ec; c9f02: $this->configManager->deleteByWildcard("\162\145\x6d\x6f\x74\145\137\x62\141\x63\x6b\x75\x70\x5f\x25"); goto afb9a; D4702: $frequency = $form->get("\x66\162\x65\161\165\x65\156\x63\x79")->getData(); goto C2ec6; E8d40: $this->configManager->set("\x72\x65\x6d\157\164\x65\137\142\x61\x63\153\165\160\x5f\145\x78\143\x6c\x75\144\145\x73", $excludes); goto fd691; de0f6: $response = $this->redirect($this->generateUrl("\143\154\160\137\141\x64\155\151\156\137\162\145\x6d\x6f\x74\145\137\x62\141\x63\153\165\x70\137\x65\x64\151\164", ["\x70\x72\157\x76\x69\144\145\162" => StorageProvider::CUSTOM_RCLONE])); goto Aff86; Aff86: return $response; goto e71ba; Acc78: $excludes = false === empty($excludes) ? json_encode($excludes) : ''; goto c9f02; A31ea: $user = $this->getUser(); goto c4e1c; f9ab3: $eventData = ["\x73\x74\157\162\x61\147\145\x50\x72\x6f\166\x69\144\x65\162" => StorageProvider::CUSTOM_RCLONE, "\x72\x65\155\157\x74\145\x42\x61\143\x6b\165\160\105\156\141\x62\x6c\x65\x64" => $remoteBackupEnabled, "\146\162\145\x71\165\145\156\x63\171" => $frequency, "\x65\170\145\143\165\x74\x69\157\x6e\124\x69\x6d\x65" => $executionTime, "\x73\x74\157\x72\x61\x67\145\104\x69\x72\145\x63\164\x6f\162\x79" => $storageDirectory]; goto efb49; A5c2f: $session = $request->getSession(); goto A31ea; Ac9a7: $session->getFlashBag()->set("\x73\x75\143\x63\145\163\x73", $this->translator->trans("\x52\145\x6d\x6f\164\x65\x20\102\141\143\x6b\x75\x70\x20\x53\x65\x74\164\x69\x6e\147\163\40\x68\x61\x76\x65\x20\x62\145\x65\x6e\40\163\141\166\x65\x64\x2e")); goto de0f6; E15ec: $this->configManager->set("\x72\145\155\x6f\x74\x65\x5f\x62\x61\143\153\x75\160\x5f\145\x78\145\x63\x75\164\x69\x6f\x6e\x5f\x74\151\x6d\x65", $executionTime); goto D3ddd; e71ba: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\x64\x61\156\147\x65\x72", $this->translator->trans("\x41\x6e\40\x65\x72\162\157\x72\x20\x68\x61\163\x20\157\143\143\x75\162\x72\145\x64\54\40\145\x72\162\x6f\x72\x20\x6d\x65\x73\x73\x61\x67\x65\x3a\40\45\145\162\x72\157\162\x4d\x65\x73\x73\141\147\145\45", ["\45\x65\162\x72\x6f\x72\x4d\x65\163\163\x61\147\x65\x25" => $e->getMessage()])); } goto f4041; B8853: $this->formErrors = $this->getErrorMessages($form); goto f5683; f5683: goto f9689; goto ce9ce; d5aca: if (true === $form->isValid()) { goto Fb46a; } goto B8853; f4041: f9689: goto Ea94d; ce9ce: Fb46a: goto a5394; Ea94d: } public function edit(Request $request) : Response { goto B2655; eb267: $excludes = implode(PHP_EOL, $excludes); goto d507d; B963d: if (!(false === empty($excludes))) { goto F7cf2; } goto Ca759; B2655: $storageProvider = $request->get("\x70\162\157\166\x69\x64\145\162"); goto b72ea; ac7a5: B69a0: goto c042c; B7494: $excludes = $this->configManager->get("\162\145\155\x6f\x74\145\x5f\142\141\143\153\165\160\x5f\x65\170\143\154\x75\x64\145\x73"); goto B963d; Eca9a: $response = $this->redirect($this->generateUrl("\143\154\160\x5f\x61\x64\x6d\151\156\x5f\x72\145\155\157\x74\145\137\x62\141\x63\x6b\165\x70")); goto C0caf; c042c: d806d: goto f0e71; C0caf: return $response; goto d2343; f0e71: $session->getFlashBag()->set("\x64\141\x6e\x67\145\x72", $this->translator->trans("\101\156\40\145\162\x72\157\x72\40\x68\x61\163\x20\157\143\143\x75\162\162\145\x64\x2c\x20\x65\x72\162\x6f\x72\40\155\145\163\163\x61\x67\x65\72\40\x25\145\162\162\157\x72\x4d\x65\163\x73\x61\x67\145\45", ["\45\145\x72\162\x6f\162\x4d\145\163\163\x61\147\145\x25" => sprintf("\x53\164\x6f\162\x61\x67\145\40\120\162\x6f\166\151\x64\x65\x72\40\45\163\x20\151\x73\x20\156\x6f\x74\40\163\x75\160\160\157\x72\x74\x65\x64\56", $storageProvider)])); goto Eca9a; b72ea: $session = $request->getSession(); goto B7494; Ca759: $excludes = (array) json_decode($excludes); goto eb267; c8358: switch ($storageProvider) { case StorageProvider::AMAZON_S3: goto Db2f2; f2126: $form->handleRequest($request); goto ad50d; E29d1: if (!(true === $request->isMethod("\120\117\x53\x54"))) { goto d0f20; } goto f2126; Ff241: $form = $this->createRemoteBackupAmazonS3EditForm($data); goto E29d1; A6205: return $response; goto c7796; ad50d: if (!(true === $form->isSubmitted())) { goto Aa55c; } goto bd8e2; Db2f2: $data = ["\x65\x6e\141\142\x6c\145\x52\x65\x6d\157\164\x65\102\x61\x63\x6b\x75\x70" => (bool) $this->configManager->get("\x72\x65\155\x6f\x74\145\137\x62\x61\x63\153\165\160\137\x65\156\x61\x62\x6c\145\144"), "\x66\162\145\161\165\x65\156\143\x79" => $this->configManager->get("\162\x65\x6d\x6f\x74\x65\137\x62\x61\143\153\x75\160\x5f\x66\162\145\x71\x75\145\x6e\x63\171"), "\x65\170\x65\x63\x75\164\x69\x6f\x6e\x54\151\155\x65" => $this->configManager->get("\162\x65\155\x6f\x74\x65\137\142\x61\x63\153\165\160\137\145\x78\x65\x63\x75\164\x69\157\156\137\164\151\x6d\145"), "\142\x75\143\153\145\164" => $this->configManager->get("\162\145\155\157\x74\145\x5f\142\x61\x63\x6b\x75\160\x5f\x62\x75\x63\153\x65\x74"), "\162\x65\x67\151\x6f\x6e" => $this->configManager->get("\162\x65\x6d\x6f\x74\145\137\142\x61\143\153\x75\x70\x5f\162\x65\x67\x69\x6f\x6e"), "\x61\x63\x63\145\x73\x73\113\x65\x79" => $this->configManager->get("\x72\x65\155\157\x74\x65\137\x62\x61\x63\153\165\160\137\141\x63\x63\x65\163\163\x5f\153\145\x79"), "\163\164\x6f\x72\x61\147\x65\104\151\x72\x65\143\164\x6f\162\x79" => $this->configManager->get("\162\145\155\157\x74\145\x5f\142\x61\x63\153\165\160\137\163\x74\157\x72\141\x67\145\137\x64\x69\162\x65\143\164\x6f\162\171"), "\162\145\x74\145\156\x74\151\157\156\120\145\x72\x69\x6f\144" => (int) $this->configManager->get("\x72\x65\x6d\x6f\164\x65\x5f\x62\x61\143\x6b\165\160\x5f\x72\x65\x74\x65\x6e\164\x69\x6f\156\137\160\145\x72\x69\157\x64"), "\x65\x78\x63\x6c\x75\x64\x65\163" => $excludes]; goto Ff241; c7796: goto d806d; goto fb78a; b57d5: Aa55c: goto B6fdc; Fd9c1: return $response; goto f0bb5; bd8e2: $response = $this->handleRemoteBackupAmazonS3EditForm($request, $form); goto D810b; dd46d: $response = $this->render("\x41\x64\x6d\151\x6e\x2f\x52\145\155\157\x74\x65\x42\141\143\153\165\x70\x2f\x61\155\x61\x7a\x6f\156\x2d\163\63\55\x65\144\x69\x74\56\150\164\155\154\56\164\x77\x69\x67", ["\146\x6f\x72\x6d" => $form->createView(), "\146\x6f\162\x6d\105\162\x72\x6f\162\x73" => $this->formErrors]); goto A6205; D810b: if (!(false === is_null($response))) { goto dcfdb; } goto Fd9c1; f0bb5: dcfdb: goto b57d5; B6fdc: d0f20: goto dd46d; fb78a: case StorageProvider::WASABI: goto Fca69; B2217: if (!(false === is_null($response))) { goto d4c09; } goto a9f83; fe50a: $response = $this->handleRemoteBackupWasabiEditForm($request, $form); goto B2217; Da5ed: be916: goto A5b88; ca0be: de25b: goto Da5ed; A5b88: $response = $this->render("\x41\144\x6d\151\x6e\57\122\145\x6d\157\x74\145\102\141\143\x6b\x75\160\57\167\141\163\x61\x62\151\55\145\x64\151\164\56\x68\x74\x6d\x6c\x2e\x74\x77\151\x67", ["\146\x6f\x72\155" => $form->createView(), "\x66\157\x72\x6d\x45\x72\x72\157\x72\163" => $this->formErrors]); goto F2c8e; b4693: $form->handleRequest($request); goto a389e; Fca69: $data = ["\x65\156\141\142\x6c\145\x52\145\x6d\x6f\x74\x65\x42\141\x63\x6b\x75\x70" => (bool) $this->configManager->get("\x72\x65\x6d\157\164\145\x5f\142\141\x63\153\165\x70\137\145\x6e\141\142\154\145\144"), "\146\x72\145\x71\x75\x65\156\143\x79" => $this->configManager->get("\x72\145\x6d\x6f\164\x65\137\x62\x61\143\x6b\165\x70\137\146\x72\145\161\x75\x65\156\143\171"), "\x65\170\145\x63\x75\164\151\x6f\x6e\x54\151\x6d\x65" => $this->configManager->get("\x72\x65\x6d\157\164\145\x5f\x62\141\x63\x6b\165\160\137\145\170\145\143\165\x74\x69\157\156\x5f\164\x69\155\145"), "\x62\165\x63\153\x65\x74" => $this->configManager->get("\162\145\x6d\x6f\x74\x65\137\x62\141\x63\153\165\x70\x5f\142\x75\143\153\x65\164"), "\x72\145\x67\x69\157\156" => $this->configManager->get("\x72\x65\x6d\157\x74\x65\137\x62\141\143\x6b\165\160\x5f\162\x65\147\151\157\156"), "\141\x63\x63\145\x73\163\x4b\x65\171" => $this->configManager->get("\162\x65\155\157\164\x65\137\x62\x61\143\153\x75\160\137\x61\x63\x63\145\x73\163\137\x6b\145\171"), "\x73\x74\157\162\141\x67\x65\104\151\x72\x65\x63\x74\157\x72\171" => $this->configManager->get("\162\145\155\157\164\x65\137\x62\141\x63\153\x75\160\x5f\163\164\157\162\x61\x67\145\137\x64\151\162\x65\x63\164\157\x72\171"), "\162\x65\x74\145\x6e\164\x69\157\156\x50\x65\x72\151\x6f\x64" => (int) $this->configManager->get("\x72\x65\155\x6f\x74\x65\137\x62\141\x63\x6b\x75\160\x5f\x72\x65\164\x65\156\164\x69\x6f\156\x5f\x70\145\162\151\157\144"), "\x65\170\x63\x6c\165\144\x65\x73" => $excludes]; goto D9a7c; A6f80: d4c09: goto ca0be; dc512: if (!(true === $request->isMethod("\x50\x4f\x53\x54"))) { goto be916; } goto b4693; a389e: if (!(true === $form->isSubmitted())) { goto de25b; } goto fe50a; F2c8e: return $response; goto E00c8; a9f83: return $response; goto A6f80; D9a7c: $form = $this->createRemoteBackupWasabiEditForm($data); goto dc512; E00c8: goto d806d; goto Cb159; Cb159: case StorageProvider::GOOGLE_DRIVE: goto cb56d; Eb097: if (!(true === $request->isMethod("\120\x4f\123\124"))) { goto A6b50; } goto ad95e; F1cde: if (!(false === is_null($response))) { goto B3c52; } goto eb782; Acb6e: if (!(true === $form->isSubmitted())) { goto B0b32; } goto f6379; c6a43: B0b32: goto B4417; C5564: goto d806d; goto b1400; f6379: $response = $this->handleRemoteBackupGoogleDriveEditForm($request, $form); goto F1cde; cb56d: $data = ["\145\156\141\x62\154\x65\122\x65\155\157\164\x65\102\x61\143\x6b\165\160" => (bool) $this->configManager->get("\x72\145\x6d\157\164\145\x5f\142\x61\143\x6b\x75\160\x5f\x65\x6e\141\x62\x6c\145\x64"), "\146\162\x65\x71\165\x65\156\x63\171" => $this->configManager->get("\x72\x65\x6d\157\164\145\x5f\x62\x61\x63\x6b\165\x70\137\146\162\x65\161\x75\145\156\x63\x79"), "\145\x78\145\143\165\164\151\157\156\124\x69\155\x65" => $this->configManager->get("\x72\145\155\x6f\x74\x65\137\142\x61\143\x6b\x75\x70\137\145\170\145\143\165\x74\x69\157\156\137\164\x69\x6d\x65"), "\145\x6d\141\151\x6c" => $this->configManager->get("\162\x65\x6d\157\164\145\137\x62\141\143\153\x75\x70\137\145\155\x61\x69\154"), "\163\164\157\162\141\147\145\104\151\162\x65\x63\x74\157\x72\171" => $this->configManager->get("\x72\x65\x6d\x6f\x74\145\x5f\x62\x61\143\153\165\x70\137\x73\164\x6f\x72\x61\x67\x65\137\144\151\x72\145\143\x74\157\162\171"), "\162\145\x74\x65\156\x74\x69\157\x6e\120\x65\x72\151\x6f\144" => (int) $this->configManager->get("\162\x65\155\157\x74\145\x5f\x62\x61\143\x6b\165\x70\137\162\x65\x74\x65\156\164\151\x6f\156\x5f\x70\145\162\151\157\x64"), "\145\x78\x63\x6c\165\144\145\163" => $excludes]; goto B5633; Cdfe1: $response = $this->render("\x41\144\155\x69\156\57\x52\145\x6d\x6f\x74\145\x42\x61\143\153\165\160\x2f\x67\157\x6f\147\x6c\145\55\144\x72\151\166\x65\55\x65\x64\x69\164\56\150\164\155\154\x2e\164\x77\151\147", ["\146\157\162\155" => $form->createView(), "\x66\x6f\162\x6d\105\162\162\x6f\162\x73" => $this->formErrors]); goto e8be1; B4417: A6b50: goto Cdfe1; B5633: $form = $this->createRemoteBackupGoogleDriveEditForm($data); goto Eb097; ad95e: $form->handleRequest($request); goto Acb6e; eb782: return $response; goto Be924; Be924: B3c52: goto c6a43; e8be1: return $response; goto C5564; b1400: case StorageProvider::DIGITAL_OCEAN_SPACES: goto b462e; Ab2cb: return $response; goto C2649; Aced5: if (!(false === is_null($response))) { goto Aab2c; } goto Ab2cb; e8bc6: cb99b: goto bcedc; bcedc: fdbee: goto F6709; b462e: $data = ["\145\x6e\x61\x62\x6c\x65\x52\x65\x6d\x6f\x74\145\x42\141\143\153\x75\160" => (bool) $this->configManager->get("\x72\x65\155\x6f\164\145\137\142\141\143\x6b\x75\x70\137\x65\156\141\142\x6c\145\x64"), "\146\162\x65\x71\x75\145\x6e\143\171" => $this->configManager->get("\x72\x65\x6d\157\x74\145\137\142\x61\x63\153\165\x70\x5f\x66\x72\145\x71\165\145\x6e\143\171"), "\145\170\145\143\165\164\x69\x6f\156\x54\x69\x6d\x65" => $this->configManager->get("\162\x65\x6d\x6f\164\x65\137\142\x61\143\153\x75\160\x5f\x65\170\145\x63\x75\164\151\157\156\137\x74\151\x6d\x65"), "\x73\160\x61\143\x65" => $this->configManager->get("\x72\x65\x6d\157\x74\x65\x5f\142\x61\x63\153\165\x70\137\163\x70\x61\143\145"), "\163\x70\x61\x63\145\105\x6e\144\160\x6f\x69\x6e\x74" => $this->configManager->get("\x72\145\155\x6f\164\145\137\x62\x61\x63\x6b\165\x70\x5f\163\160\141\143\145\x5f\x65\156\x64\160\157\151\156\x74"), "\x61\x63\143\145\163\x73\x4b\145\x79" => $this->configManager->get("\x72\x65\155\x6f\x74\145\x5f\x62\141\x63\x6b\165\x70\x5f\141\143\x63\145\163\x73\137\153\x65\171"), "\x73\x74\157\x72\141\147\145\x44\151\162\x65\x63\x74\x6f\162\x79" => $this->configManager->get("\162\x65\155\157\x74\x65\137\142\x61\143\x6b\x75\160\137\163\x74\x6f\162\141\147\x65\x5f\x64\x69\162\x65\x63\164\157\162\x79"), "\x72\x65\x74\145\156\x74\x69\157\x6e\120\145\162\x69\x6f\144" => (int) $this->configManager->get("\162\x65\155\157\x74\x65\x5f\x62\x61\143\153\x75\x70\x5f\162\145\x74\x65\x6e\x74\x69\157\156\x5f\160\x65\162\151\157\x64"), "\x65\x78\143\154\165\144\x65\163" => $excludes]; goto c61dc; c60ce: $form->handleRequest($request); goto B7038; C2649: Aab2c: goto e8bc6; B7038: if (!(true === $form->isSubmitted())) { goto cb99b; } goto afc55; db8a0: if (!(true === $request->isMethod("\x50\x4f\123\x54"))) { goto fdbee; } goto c60ce; F6709: $response = $this->render("\x41\144\x6d\151\156\57\122\x65\x6d\x6f\164\145\102\141\143\x6b\x75\160\57\144\151\147\151\164\141\154\55\x6f\x63\145\x61\x6e\55\163\160\x61\143\x65\x73\x2d\145\x64\151\x74\x2e\x68\164\155\154\56\164\167\x69\147", ["\146\157\162\x6d" => $form->createView(), "\x66\x6f\x72\155\x45\162\x72\x6f\162\x73" => $this->formErrors]); goto E52af; E52af: return $response; goto Fd49d; c61dc: $form = $this->createRemoteBackupDigitalOceanSpacesEditForm($data); goto db8a0; Fd49d: goto d806d; goto E4855; afc55: $response = $this->handleRemoteBackupDigitalOceanSpacesEditForm($request, $form); goto Aced5; E4855: case StorageProvider::DROPBOX: goto Ee014; Daefe: $form = $this->createRemoteBackupDropboxEditForm($data); goto af914; af972: b5899: goto b41c5; A0feb: da672: goto af972; Ee014: $data = ["\145\156\141\x62\154\x65\122\x65\x6d\157\164\x65\x42\x61\143\153\x75\x70" => (bool) $this->configManager->get("\x72\145\155\157\x74\145\137\x62\141\x63\x6b\165\160\x5f\145\156\141\142\154\145\144"), "\146\162\145\161\x75\x65\156\x63\x79" => $this->configManager->get("\162\x65\x6d\x6f\164\145\137\x62\141\x63\153\x75\x70\x5f\146\162\x65\161\x75\145\x6e\x63\x79"), "\145\x78\x65\143\165\164\151\x6f\156\124\151\x6d\145" => $this->configManager->get("\162\145\155\157\x74\145\x5f\x62\141\x63\x6b\165\x70\x5f\145\170\x65\143\165\164\x69\x6f\156\137\164\x69\155\x65"), "\163\x74\x6f\x72\x61\x67\x65\x44\x69\x72\x65\x63\164\157\x72\x79" => $this->configManager->get("\x72\x65\x6d\157\x74\x65\x5f\x62\x61\x63\153\x75\160\x5f\163\164\157\x72\x61\x67\x65\x5f\x64\x69\162\145\x63\164\x6f\x72\171"), "\162\x65\x74\145\156\x74\151\x6f\x6e\120\x65\x72\151\157\x64" => (int) $this->configManager->get("\162\x65\155\157\x74\145\137\142\141\x63\x6b\165\x70\x5f\162\x65\x74\145\156\164\x69\157\x6e\137\160\145\x72\151\157\x64"), "\x65\170\143\154\165\x64\x65\163" => $excludes]; goto Daefe; b41c5: $response = $this->render("\x41\x64\155\151\156\x2f\122\145\155\x6f\164\x65\102\x61\x63\153\165\160\57\x64\162\157\x70\x62\x6f\x78\x2d\x65\144\x69\164\x2e\150\x74\x6d\154\56\164\167\151\x67", ["\146\x6f\162\155" => $form->createView(), "\x66\157\162\155\105\162\x72\157\x72\163" => $this->formErrors]); goto ee37f; ee37f: return $response; goto E0366; f74da: if (!(false === is_null($response))) { goto a0f50; } goto Afff7; Afff7: return $response; goto D2d68; c16ad: $form->handleRequest($request); goto e8557; af914: if (!(true === $request->isMethod("\120\x4f\x53\124"))) { goto b5899; } goto c16ad; D2d68: a0f50: goto A0feb; Eea71: $response = $this->handleRemoteBackupDropboxEditForm($request, $form); goto f74da; E0366: goto d806d; goto fd8f9; e8557: if (!(true === $form->isSubmitted())) { goto da672; } goto Eea71; fd8f9: case StorageProvider::SFTP: goto efbfa; Ca770: if (!(true === $request->isMethod("\120\117\123\x54"))) { goto D755a; } goto b7c52; d45a1: $form = $this->createRemoteBackupSftpEditForm($data); goto Ca770; d83be: goto d806d; goto af764; Be25d: $response = $this->handleRemoteBackupSftpEditForm($request, $form); goto eb8e9; F77e4: return $response; goto d83be; efbfa: $authenticationMethod = $this->configManager->get("\162\x65\155\157\x74\145\137\x62\141\x63\153\165\x70\137\x61\x75\x74\150\145\x6e\164\x69\x63\141\164\151\x6f\156\x5f\155\x65\164\x68\157\x64"); goto Cdbb8; B0dad: B98f9: goto B9b4b; b34dd: $response = $this->render("\101\144\x6d\x69\x6e\57\122\145\155\x6f\164\145\x42\141\x63\x6b\165\160\x2f\x73\x66\x74\x70\x2d\145\x64\151\x74\x2e\150\164\155\154\56\x74\x77\151\147", ["\x61\165\164\150\145\156\164\x69\x63\x61\x74\151\x6f\x6e\115\x65\164\x68\157\144" => $authenticationMethod, "\146\x6f\162\x6d" => $form->createView(), "\x66\157\x72\155\105\162\162\x6f\162\163" => $this->formErrors]); goto F77e4; Cdbb8: $data = ["\145\156\141\142\x6c\x65\122\145\x6d\x6f\x74\145\x42\141\x63\153\x75\x70" => (bool) $this->configManager->get("\x72\145\x6d\157\164\145\137\142\x61\x63\x6b\165\160\x5f\x65\156\x61\142\154\x65\x64"), "\146\162\x65\x71\165\x65\156\143\x79" => $this->configManager->get("\162\145\x6d\157\164\145\x5f\142\x61\143\153\x75\160\x5f\x66\162\145\161\x75\x65\x6e\x63\171"), "\145\170\145\143\x75\164\151\x6f\156\x54\151\x6d\x65" => $this->configManager->get("\162\145\x6d\157\164\x65\x5f\142\x61\x63\153\x75\160\x5f\145\x78\x65\x63\x75\x74\151\157\156\137\164\x69\x6d\145"), "\141\165\x74\x68\145\156\x74\x69\x63\x61\164\x69\157\x6e\115\x65\164\150\157\144" => $authenticationMethod, "\x68\x6f\163\x74" => $this->configManager->get("\x72\x65\x6d\x6f\164\x65\x5f\142\141\143\x6b\165\160\x5f\x68\157\x73\x74"), "\165\x73\x65\162" => $this->configManager->get("\x72\145\x6d\x6f\164\x65\137\x62\141\143\153\x75\x70\137\x75\x73\x65\162"), "\x6b\145\x79\x46\151\x6c\145" => $this->configManager->get("\x72\x65\x6d\x6f\164\x65\137\x62\x61\x63\x6b\x75\x70\x5f\x6b\145\171\x5f\146\x69\154\x65"), "\160\157\162\x74" => $this->configManager->get("\x72\145\155\157\164\x65\137\x62\x61\x63\x6b\x75\x70\x5f\x70\x6f\162\164"), "\x73\164\x6f\x72\141\x67\x65\104\x69\162\x65\143\x74\x6f\162\x79" => $this->configManager->get("\162\x65\155\157\x74\x65\137\x62\141\x63\x6b\x75\160\137\163\164\x6f\x72\141\x67\x65\x5f\144\x69\x72\145\143\x74\157\x72\171"), "\x72\x65\164\x65\156\164\151\157\x6e\x50\145\x72\x69\x6f\144" => (int) $this->configManager->get("\162\x65\155\157\x74\x65\137\142\x61\x63\153\165\x70\137\x72\145\164\145\156\x74\x69\x6f\x6e\x5f\160\x65\162\x69\157\144"), "\145\170\x63\154\165\x64\145\163" => $excludes]; goto d45a1; b7c52: $form->handleRequest($request); goto a8294; eb8e9: if (!(false === is_null($response))) { goto ec928; } goto C6daf; ce083: $authenticationMethod = $form->get("\141\x75\164\x68\x65\156\164\151\143\141\164\151\157\156\115\145\x74\150\x6f\144")->getData(); goto Be25d; f3426: ec928: goto B0dad; a8294: if (!(true === $form->isSubmitted())) { goto B98f9; } goto ce083; B9b4b: D755a: goto b34dd; C6daf: return $response; goto f3426; af764: case StorageProvider::CUSTOM_RCLONE: goto c5fcd; fb5a8: $form->handleRequest($request); goto cb628; cb628: if (!(true === $form->isSubmitted())) { goto Bea20; } goto cc237; Bc124: if (!(false === is_null($response))) { goto Fae2d; } goto E61f3; d2a2c: Bea20: goto a4d3b; A9d56: $response = $this->render("\101\x64\155\x69\156\57\122\145\x6d\157\164\145\x42\x61\143\x6b\165\160\57\x63\165\163\164\157\155\55\162\143\x6c\x6f\156\145\55\145\x64\x69\x74\x2e\x68\164\155\x6c\56\x74\167\x69\147", ["\146\x6f\x72\x6d" => $form->createView(), "\146\157\x72\x6d\105\162\x72\157\162\163" => $this->formErrors]); goto D783a; B87f1: if (!(true === $request->isMethod("\120\117\x53\124"))) { goto A7baa; } goto fb5a8; cc237: $response = $this->handleRemoteBackupCustomRcloneEditForm($request, $form); goto Bc124; D783a: return $response; goto E8a45; E61f3: return $response; goto f5282; c5fcd: $data = ["\x65\156\x61\142\154\145\x52\145\155\157\164\x65\102\x61\143\x6b\165\x70" => (bool) $this->configManager->get("\x72\145\155\x6f\164\145\x5f\x62\x61\143\x6b\165\160\137\145\156\x61\x62\154\145\x64"), "\x66\x72\x65\x71\165\x65\156\143\171" => $this->configManager->get("\x72\145\x6d\x6f\x74\145\137\x62\141\143\153\x75\x70\137\146\x72\145\161\x75\x65\x6e\x63\x79"), "\145\170\145\x63\165\164\151\x6f\x6e\x54\151\x6d\145" => $this->configManager->get("\x72\x65\x6d\157\164\x65\x5f\142\141\x63\x6b\x75\x70\x5f\x65\x78\145\143\165\164\151\157\x6e\137\164\x69\x6d\x65"), "\163\x74\157\x72\141\x67\145\x44\151\162\145\143\164\157\162\x79" => $this->configManager->get("\x72\145\x6d\157\x74\x65\x5f\142\x61\x63\153\x75\160\x5f\x73\x74\157\162\x61\x67\145\x5f\x64\151\x72\x65\x63\x74\x6f\162\171"), "\162\145\164\145\x6e\x74\151\157\156\120\145\162\x69\157\x64" => (int) $this->configManager->get("\162\x65\x6d\157\x74\145\x5f\x62\x61\x63\x6b\165\160\x5f\162\145\164\145\x6e\x74\x69\157\x6e\137\x70\x65\x72\151\157\144"), "\145\170\143\154\x75\x64\145\163" => $excludes]; goto Ce56c; a4d3b: A7baa: goto A9d56; Ce56c: $form = $this->createRemoteBackupCustomRcloneEditForm($data); goto B87f1; E8a45: goto d806d; goto d9f46; f5282: Fae2d: goto d2a2c; d9f46: } goto ac7a5; d507d: F7cf2: goto c8358; d2343: } private function createRemoteBackupAmazonS3EditForm(array $data) : Form { goto b91f2; f9f98: $form->add("\x73\x75\x62\155\151\x74", SubmitType::class, ["\141\164\x74\162" => ["\x63\x6c\141\x73\x73" => "\x62\164\x6e\40\x62\164\x6e\x2d\x62\154\165\x65\x20\x62\164\x6e\55\154\x67"], "\154\x61\x62\x65\154" => "\x53\141\x76\145"]); goto A2c81; b91f2: $form = $this->createForm("\101\x70\160\x5c\x46\157\162\x6d\x5c\x41\144\155\x69\x6e\x52\x65\155\157\164\145\102\141\143\153\x75\160\x41\155\x61\172\x6f\x6e\123\63\x45\144\x69\164\x54\171\160\145", $data, ["\x61\x63\x74\151\x6f\x6e" => $this->generateUrl("\x63\x6c\x70\137\x61\x64\155\151\x6e\x5f\x72\145\155\157\x74\x65\x5f\x62\x61\x63\153\165\160\137\145\x64\x69\164", ["\x70\162\157\x76\151\144\x65\x72" => StorageProvider::AMAZON_S3]), "\x6d\145\x74\150\x6f\144" => "\120\x4f\x53\x54"]); goto f9f98; A2c81: return $form; goto Dc4ce; Dc4ce: } private function createRemoteBackupWasabiEditForm(array $data) : Form { goto D06c9; C6dd8: $form->add("\163\165\x62\x6d\151\164", SubmitType::class, ["\141\x74\x74\x72" => ["\x63\154\x61\163\163" => "\142\164\156\40\x62\164\156\x2d\142\x6c\x75\x65\40\142\x74\x6e\55\x6c\147"], "\154\141\142\x65\154" => "\x53\141\x76\145"]); goto B1fe0; D06c9: $form = $this->createForm("\101\160\x70\x5c\x46\x6f\x72\x6d\134\101\x64\x6d\x69\156\122\x65\155\157\164\145\102\x61\143\x6b\165\x70\x57\141\163\x61\142\x69\x45\x64\151\x74\x54\171\160\x65", $data, ["\x61\143\x74\x69\157\x6e" => $this->generateUrl("\143\x6c\x70\x5f\141\x64\x6d\x69\156\137\162\x65\155\x6f\x74\x65\x5f\x62\141\143\x6b\x75\160\137\145\144\151\164", ["\160\162\157\166\x69\x64\145\162" => StorageProvider::WASABI]), "\155\145\164\x68\x6f\x64" => "\x50\117\123\124"]); goto C6dd8; B1fe0: return $form; goto a6485; a6485: } private function createRemoteBackupGoogleDriveEditForm(array $data) : Form { goto Cfff7; Cfff7: $form = $this->createForm("\101\x70\160\134\106\x6f\162\155\134\x41\x64\x6d\x69\156\122\145\x6d\157\164\145\102\x61\143\153\x75\x70\107\157\x6f\147\154\x65\x44\x72\151\x76\x65\x45\144\x69\164\124\x79\160\145", $data, ["\141\143\164\x69\x6f\x6e" => $this->generateUrl("\143\154\160\x5f\141\x64\155\x69\156\x5f\x72\x65\x6d\157\x74\x65\137\x62\141\143\x6b\x75\160\137\145\144\x69\164", ["\x70\162\157\166\151\x64\145\x72" => StorageProvider::GOOGLE_DRIVE]), "\x6d\145\x74\x68\157\x64" => "\x50\x4f\123\124"]); goto f12a1; f12a1: $form->add("\x73\165\x62\155\151\164", SubmitType::class, ["\141\164\164\162" => ["\x63\154\141\163\x73" => "\x62\x74\156\40\x62\x74\156\55\142\154\165\145\x20\x62\164\x6e\x2d\154\x67"], "\154\141\x62\145\x6c" => "\x53\141\166\x65"]); goto bd256; bd256: return $form; goto ef4b8; ef4b8: } private function createRemoteBackupDigitalOceanSpacesEditForm(array $data) : Form { goto A0663; f4d6b: return $form; goto f4109; F3d3b: $form->add("\163\x75\x62\155\151\164", SubmitType::class, ["\x61\164\164\162" => ["\x63\154\141\x73\163" => "\142\164\x6e\40\142\164\156\x2d\x62\x6c\165\145\x20\142\x74\156\x2d\x6c\147"], "\x6c\x61\142\145\154" => "\123\x61\x76\x65"]); goto f4d6b; A0663: $form = $this->createForm("\x41\160\160\x5c\x46\x6f\162\155\134\101\144\x6d\x69\x6e\122\x65\x6d\x6f\x74\x65\x42\x61\143\153\x75\160\x44\x69\x67\x69\x74\x61\x6c\x4f\x63\145\141\156\123\x70\x61\143\x65\x73\x45\x64\x69\x74\x54\x79\x70\x65", $data, ["\141\x63\x74\151\x6f\x6e" => $this->generateUrl("\143\154\x70\137\141\144\x6d\x69\x6e\137\162\x65\155\157\x74\145\137\x62\x61\x63\x6b\x75\x70\137\x65\144\151\x74", ["\160\x72\157\166\151\x64\x65\162" => StorageProvider::DIGITAL_OCEAN_SPACES]), "\x6d\x65\164\150\157\144" => "\x50\117\x53\124"]); goto F3d3b; f4109: } private function createRemoteBackupDropboxEditForm(array $data) : Form { goto fa71c; e1c45: return $form; goto Cc5b3; ce879: $form->add("\163\x75\142\155\151\164", SubmitType::class, ["\x61\164\x74\x72" => ["\x63\154\141\x73\x73" => "\142\164\x6e\40\142\164\156\55\x62\154\165\145\40\x62\x74\x6e\55\x6c\x67"], "\x6c\x61\x62\x65\154" => "\x53\141\x76\x65"]); goto e1c45; fa71c: $form = $this->createForm("\101\160\160\134\x46\x6f\162\155\x5c\x41\x64\x6d\x69\x6e\122\x65\x6d\x6f\x74\145\x42\141\x63\x6b\x75\x70\x44\162\x6f\160\x62\x6f\x78\x45\144\x69\164\124\x79\160\x65", $data, ["\x61\x63\164\151\x6f\x6e" => $this->generateUrl("\x63\154\160\137\x61\144\155\x69\156\x5f\x72\x65\155\x6f\164\145\x5f\142\141\143\153\x75\160\x5f\x65\144\x69\x74", ["\x70\x72\157\x76\151\144\x65\x72" => StorageProvider::DROPBOX]), "\x6d\145\x74\x68\157\x64" => "\x50\x4f\123\x54"]); goto ce879; Cc5b3: } private function createRemoteBackupSftpEditForm(array $data) : Form { goto a8985; a8985: $form = $this->createForm("\x41\160\x70\x5c\x46\157\x72\x6d\x5c\101\x64\x6d\151\156\x52\145\155\157\164\145\x42\x61\143\x6b\165\x70\123\x66\164\x70\105\x64\x69\x74\x54\x79\160\x65", $data, ["\141\143\164\151\x6f\x6e" => $this->generateUrl("\143\x6c\160\x5f\141\144\x6d\151\156\x5f\162\145\x6d\x6f\x74\x65\137\x62\141\x63\153\165\x70\137\145\x64\x69\164", ["\x70\162\157\166\x69\144\145\162" => StorageProvider::SFTP]), "\155\x65\164\150\x6f\144" => "\120\117\x53\x54"]); goto B2cf0; B2cf0: $form->add("\163\x75\x62\x6d\x69\164", SubmitType::class, ["\141\x74\x74\162" => ["\143\x6c\141\x73\163" => "\142\x74\156\40\x62\x74\156\55\142\154\x75\145\40\142\164\156\x2d\x6c\x67"], "\154\x61\x62\145\x6c" => "\x53\141\x76\x65"]); goto b9909; b9909: return $form; goto b145b; b145b: } private function createRemoteBackupCustomRcloneEditForm(array $data) : Form { goto Feec6; Fc151: $form->add("\163\x75\x62\x6d\151\x74", SubmitType::class, ["\141\164\x74\x72" => ["\x63\154\141\163\163" => "\x62\164\x6e\40\142\x74\156\x2d\142\x6c\165\x65\x20\x62\164\156\x2d\x6c\147"], "\154\x61\142\145\154" => "\123\141\x76\x65"]); goto B82b0; B82b0: return $form; goto F0db0; Feec6: $form = $this->createForm("\x41\x70\160\x5c\x46\x6f\x72\x6d\134\101\144\x6d\151\156\x52\x65\155\x6f\164\x65\102\141\x63\153\x75\160\x43\165\163\164\x6f\x6d\x52\x63\x6c\157\x6e\145\x45\x64\151\x74\x54\171\x70\145", $data, ["\141\143\x74\151\157\156" => $this->generateUrl("\x63\154\160\x5f\x61\x64\x6d\151\156\x5f\x72\145\155\x6f\x74\145\x5f\142\141\143\153\x75\x70\x5f\145\x64\x69\x74", ["\x70\162\x6f\166\151\144\145\x72" => StorageProvider::CUSTOM_RCLONE]), "\155\145\x74\x68\x6f\144" => "\x50\x4f\123\124"]); goto Fc151; F0db0: } private function handleRemoteBackupAmazonS3EditForm(Request $request, Form $form) { goto F5ad2; e1f6b: $this->formErrors = $this->getErrorMessages($form); goto Cc115; c9157: Ccb44: goto e1723; C37ee: Fa372: goto c766a; e1723: try { goto be157; B5622: $frequency = $form->get("\146\x72\x65\x71\165\145\x6e\143\x79")->getData(); goto Eb1b3; C0afb: $rclone = new Rclone(); goto D1704; b437a: return $response; goto c6e74; B72bd: $rclone->createCronJob($frequency, $executionTime); goto df217; b5352: $excludes = false === empty($excludes) ? json_encode($excludes) : ''; goto d80c9; abe23: $rcloneConfig = $rcloneConfigBuilder->build(); goto C0afb; E90ab: $session->getFlashBag()->set("\x73\165\143\143\145\163\163", $this->translator->trans("\x52\x65\155\157\x74\145\40\102\x61\x63\x6b\165\x70\x20\123\145\164\164\151\156\147\163\40\150\141\x76\145\40\142\145\145\156\x20\x73\141\x76\x65\144\x2e")); goto Fc82f; D6fb4: $excludes = array_map("\164\x72\151\x6d", array_filter(explode(PHP_EOL, trim($excludes)))); goto b5352; Fc82f: $response = $this->redirect($this->generateUrl("\x63\x6c\160\137\x61\144\155\151\x6e\137\x72\145\155\157\164\x65\137\142\x61\x63\153\x75\160\x5f\145\144\x69\x74", ["\x70\x72\x6f\x76\151\144\x65\x72" => StorageProvider::AMAZON_S3])); goto b437a; c6494: $remoteBackupEnabled = (int) $form->get("\x65\x6e\141\142\154\x65\x52\x65\x6d\157\164\145\102\141\143\153\165\160")->getData(); goto B5622; be8a2: $retentionPeriod = (int) $form->get("\x72\145\x74\145\x6e\x74\x69\x6f\x6e\120\x65\162\151\157\144")->getData(); goto Cb744; B5b5e: $excludes = $form->get("\x65\x78\x63\x6c\165\x64\x65\x73")->getData(); goto D6fb4; F494d: $storageDirectory = trim($form->get("\x73\x74\x6f\162\141\x67\145\104\x69\162\x65\x63\164\157\162\171")->getData()); goto B5b5e; b6d20: $this->configManager->set("\x72\x65\155\157\x74\145\x5f\x62\141\143\153\165\x70\137\162\x65\164\145\156\164\x69\x6f\x6e\137\x70\145\x72\151\x6f\144", $retentionPeriod); goto fbcc0; C7670: $this->configManager->set("\x72\145\x6d\157\164\x65\x5f\x62\x61\143\x6b\x75\160\x5f\x65\x6e\141\142\x6c\145\x64", $remoteBackupEnabled); goto a737b; aa247: $rcloneConfigTemplate->setAccessKeyId($accessKey); goto E95ba; be157: $session = $request->getSession(); goto f0bb7; d93b4: $this->configManager->set("\x72\145\x6d\x6f\164\x65\x5f\x62\x61\x63\x6b\165\160\137\x61\x63\x63\145\x73\163\137\153\145\x79", $accessKey); goto ac749; E8b85: $this->configManager->set("\162\x65\x6d\x6f\164\x65\x5f\x62\x61\143\x6b\x75\x70\x5f\163\x74\x6f\162\x61\147\x65\137\144\x69\x72\145\x63\x74\157\x72\x79", $storageDirectory); goto F1394; C7d74: $rcloneConfigBuilder = new RcloneConfigBuilder($rcloneConfigTemplate); goto abe23; D1704: $rclone->writeConfig($rcloneConfig); goto B72bd; d3cab: $region = $form->get("\x72\145\147\151\x6f\156")->getData(); goto e061d; f0bb7: $user = $this->getUser(); goto c6494; E7461: $secretAccessKey = $this->configManager->get("\162\x65\155\157\164\x65\x5f\x62\141\x63\153\165\160\137\163\x65\x63\162\145\x74\x5f\141\x63\143\145\163\163\x5f\x6b\145\x79"); goto d1b25; F1394: $this->configManager->set("\x72\x65\155\157\x74\145\137\142\141\143\x6b\165\x70\x5f\145\170\x63\154\x75\x64\145\x73", $excludes); goto a9160; a9160: $rcloneConfigTemplate = new AmazonS3ConfigTemplate(); goto e7a58; E1c62: $this->configManager->set("\162\x65\x6d\157\164\x65\137\142\141\x63\153\165\160\137\163\x74\x6f\162\x61\147\x65\x5f\x70\x72\x6f\166\x69\144\145\162", StorageProvider::AMAZON_S3); goto C7670; a6be1: $this->configManager->set("\162\x65\x6d\x6f\164\145\x5f\142\x61\x63\153\x75\160\137\x65\170\x65\x63\165\164\x69\157\156\x5f\164\x69\155\x65", $executionTime); goto b6d20; ac749: $this->configManager->set("\162\x65\155\157\164\145\137\142\x61\143\153\x75\160\x5f\163\145\x63\162\145\x74\137\x61\143\x63\x65\163\x73\137\x6b\x65\171", $secretAccessKey); goto E8b85; e9ea4: $secretAccessKey = $form->get("\x73\x65\143\162\145\164\101\x63\143\x65\x73\163\x4b\x65\x79")->getData(); goto febf9; df217: $eventData = ["\163\164\157\162\141\147\x65\x50\x72\157\166\x69\144\145\162" => StorageProvider::AMAZON_S3, "\x72\x65\x6d\157\x74\x65\102\x61\x63\153\165\160\105\156\x61\142\x6c\x65\x64" => $remoteBackupEnabled, "\146\162\145\x71\x75\145\x6e\x63\171" => $frequency, "\145\170\145\143\x75\x74\151\x6f\x6e\124\x69\x6d\x65" => $executionTime, "\x62\x75\143\x6b\x65\x74" => $bucket, "\x72\145\x67\151\157\156" => $region, "\163\164\157\x72\x61\x67\x65\104\151\162\145\x63\x74\x6f\162\171" => $storageDirectory]; goto Dc78c; Dc0a4: $this->configManager->set("\162\145\x6d\x6f\x74\145\x5f\x62\x61\x63\x6b\x75\x70\x5f\x72\145\147\151\x6f\156", $region); goto d93b4; febf9: if (!(true === empty($secretAccessKey))) { goto e9687; } goto E7461; e7a58: $rcloneConfigTemplate->setRegion($region); goto aa247; e061d: $accessKey = $form->get("\x61\x63\x63\x65\x73\x73\113\145\x79")->getData(); goto e9ea4; Cb744: $bucket = $form->get("\142\x75\143\153\x65\x74")->getData(); goto d3cab; d1b25: e9687: goto F494d; d80c9: $this->configManager->deleteByWildcard("\x72\145\x6d\157\164\x65\x5f\x62\x61\x63\x6b\x75\x70\137\x25"); goto E1c62; Eb1b3: $executionTime = $form->get("\145\x78\x65\143\165\x74\151\x6f\x6e\124\151\x6d\x65")->getData(); goto be8a2; a737b: $this->configManager->set("\162\x65\x6d\x6f\x74\145\137\142\141\x63\x6b\x75\x70\x5f\x66\162\x65\161\165\145\156\x63\x79", $frequency); goto a6be1; fbcc0: $this->configManager->set("\x72\x65\x6d\157\164\145\137\142\141\143\x6b\165\x70\137\x62\x75\x63\153\145\164", $bucket); goto Dc0a4; E95ba: $rcloneConfigTemplate->setSecretAccessKey($secretAccessKey); goto C7d74; Dc78c: EventQueue::addEvent(EventQueue::EVENT_REMOTE_BACKUP_EDIT, $user, $eventData, $request); goto E90ab; c6e74: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\x64\141\156\x67\145\162", $this->translator->trans("\x41\x6e\x20\145\x72\x72\x6f\162\40\150\x61\x73\x20\x6f\x63\143\165\162\x72\x65\144\x2c\40\145\x72\x72\x6f\x72\x20\155\x65\x73\x73\141\147\x65\72\x20\45\145\162\162\x6f\162\115\x65\163\x73\141\147\x65\x25", ["\45\145\162\162\x6f\x72\115\145\163\163\x61\x67\145\45" => $e->getMessage()])); } goto C37ee; F5ad2: if (true === $form->isValid()) { goto Ccb44; } goto e1f6b; Cc115: goto Fa372; goto c9157; c766a: } private function handleRemoteBackupWasabiEditForm(Request $request, Form $form) { goto f1d60; d24d8: try { goto d12c3; d64ca: $this->configManager->set("\162\x65\155\157\x74\x65\137\x62\141\143\x6b\165\x70\x5f\x73\x74\x6f\162\141\147\x65\137\x70\x72\x6f\166\151\x64\145\162", StorageProvider::WASABI); goto A41d9; ddb35: $rclone->createCronJob($frequency, $executionTime); goto f6730; Be929: $rcloneConfig = $rcloneConfigBuilder->build(); goto F13c2; F79fa: $excludes = array_map("\164\x72\x69\x6d", array_filter(explode(PHP_EOL, trim($excludes)))); goto C86da; E40d0: $rclone->writeConfig($rcloneConfig); goto ddb35; F3e85: $this->configManager->set("\x72\145\155\x6f\164\x65\137\x62\141\x63\x6b\x75\x70\137\x65\170\143\154\165\144\x65\163", $excludes); goto fdf3c; E260f: $this->configManager->set("\162\x65\x6d\x6f\164\x65\x5f\x62\x61\143\x6b\x75\x70\137\x66\162\x65\x71\x75\145\156\x63\x79", $frequency); goto ef3e0; db5dc: $this->configManager->set("\162\x65\x6d\157\164\x65\137\x62\141\x63\153\x75\x70\x5f\142\165\143\x6b\x65\164", $bucket); goto Bd88e; F38ac: $remoteBackupEnabled = (int) $form->get("\145\156\141\142\x6c\145\x52\x65\155\157\x74\145\102\141\143\x6b\165\x70")->getData(); goto de114; f4c09: Edf80: goto b45d6; d12c3: $session = $request->getSession(); goto ba410; fdf3c: $rcloneConfigTemplate = new WasabiConfigTemplate(); goto ff33f; a8307: $this->configManager->set("\x72\145\x6d\157\x74\x65\137\x62\x61\x63\x6b\x75\160\x5f\x73\x74\x6f\x72\x61\x67\x65\137\x64\x69\162\145\x63\164\x6f\x72\171", $storageDirectory); goto F3e85; bfd3d: $accessKey = $form->get("\x61\143\x63\x65\163\163\x4b\x65\171")->getData(); goto d87ed; ba410: $user = $this->getUser(); goto F38ac; ef3e0: $this->configManager->set("\x72\145\155\157\164\x65\137\x62\141\143\153\x75\x70\137\145\170\x65\x63\165\164\x69\x6f\x6e\137\164\x69\155\145", $executionTime); goto Afd6e; f6730: $eventData = ["\163\x74\x6f\x72\141\147\x65\120\162\x6f\x76\151\144\145\162" => StorageProvider::WASABI, "\x72\x65\x6d\x6f\x74\x65\102\141\143\153\165\160\x45\x6e\x61\142\x6c\145\x64" => $remoteBackupEnabled, "\x66\x72\x65\161\x75\145\156\x63\x79" => $frequency, "\145\x78\x65\143\x75\x74\151\157\156\124\151\x6d\x65" => $executionTime, "\x62\x75\x63\x6b\145\164" => $bucket, "\162\x65\147\x69\x6f\156" => $region, "\163\164\157\x72\141\x67\x65\104\151\x72\145\143\x74\157\162\x79" => $storageDirectory]; goto b53ac; Bd380: return $response; goto ab216; b53ac: EventQueue::addEvent(EventQueue::EVENT_REMOTE_BACKUP_EDIT, $user, $eventData, $request); goto d641f; Ecb73: $secretAccessKey = $this->configManager->get("\162\x65\155\x6f\x74\x65\137\x62\x61\x63\x6b\165\x70\x5f\x73\x65\143\x72\145\x74\x5f\141\143\x63\145\163\x73\137\x6b\145\171"); goto f4c09; e2660: $excludes = $form->get("\145\170\143\154\165\x64\x65\x73")->getData(); goto F79fa; de114: $frequency = $form->get("\146\x72\x65\x71\x75\145\156\x63\x79")->getData(); goto E99cb; c87b3: $rcloneConfigTemplate->setSecretAccessKey($secretAccessKey); goto Ecf55; b45d6: $storageDirectory = trim($form->get("\x73\164\157\x72\x61\x67\x65\x44\x69\162\145\x63\x74\157\x72\171")->getData()); goto e2660; E99cb: $executionTime = $form->get("\x65\170\x65\143\x75\x74\x69\x6f\156\x54\151\x6d\x65")->getData(); goto Cb83a; F13c2: $rclone = new Rclone(); goto E40d0; C86da: $excludes = false === empty($excludes) ? json_encode($excludes) : ''; goto Eab30; ff33f: $rcloneConfigTemplate->setRegion($region); goto c5924; Ba5d7: if (!(true === empty($secretAccessKey))) { goto Edf80; } goto Ecb73; Cb83a: $retentionPeriod = (int) $form->get("\162\x65\164\145\156\164\x69\157\x6e\120\145\162\x69\157\x64")->getData(); goto B2c0d; C9f08: $region = $form->get("\162\x65\x67\151\x6f\156")->getData(); goto bfd3d; Afd6e: $this->configManager->set("\162\145\155\x6f\x74\x65\x5f\142\x61\143\x6b\x75\160\137\162\145\164\x65\x6e\x74\x69\157\156\137\x70\145\x72\x69\x6f\x64", $retentionPeriod); goto db5dc; B2c0d: $bucket = $form->get("\x62\x75\143\x6b\x65\164")->getData(); goto C9f08; A41d9: $this->configManager->set("\x72\145\155\x6f\164\145\x5f\142\x61\x63\x6b\x75\160\x5f\x65\x6e\x61\x62\154\145\x64", $remoteBackupEnabled); goto E260f; Ecf55: $rcloneConfigBuilder = new RcloneConfigBuilder($rcloneConfigTemplate); goto Be929; Eab30: $this->configManager->deleteByWildcard("\162\145\155\157\164\145\137\x62\141\143\153\x75\160\137\45"); goto d64ca; d87ed: $secretAccessKey = $form->get("\x73\145\x63\x72\x65\164\101\x63\x63\x65\163\x73\x4b\145\x79")->getData(); goto Ba5d7; D0f2f: $this->configManager->set("\x72\145\155\157\x74\x65\137\142\141\x63\x6b\165\160\x5f\x73\145\143\162\x65\x74\137\141\143\x63\145\163\163\137\x6b\145\171", $secretAccessKey); goto a8307; Eda19: $response = $this->redirect($this->generateUrl("\143\x6c\160\x5f\141\x64\155\151\156\137\162\145\155\157\164\145\x5f\142\x61\143\153\x75\x70\x5f\x65\144\x69\x74", ["\160\162\157\166\x69\144\x65\x72" => StorageProvider::WASABI])); goto Bd380; d641f: $session->getFlashBag()->set("\163\165\x63\143\x65\163\x73", $this->translator->trans("\122\145\x6d\x6f\x74\x65\40\102\x61\x63\x6b\x75\x70\x20\123\x65\164\164\151\156\147\163\x20\x68\141\166\145\x20\x62\145\145\156\x20\163\x61\x76\145\x64\x2e")); goto Eda19; c5924: $rcloneConfigTemplate->setAccessKeyId($accessKey); goto c87b3; bf4c1: $this->configManager->set("\x72\x65\x6d\157\164\145\x5f\142\x61\143\153\165\160\x5f\141\x63\x63\x65\x73\163\x5f\153\x65\171", $accessKey); goto D0f2f; Bd88e: $this->configManager->set("\x72\145\x6d\x6f\164\x65\137\x62\141\x63\x6b\x75\160\137\162\145\x67\151\157\x6e", $region); goto bf4c1; ab216: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\144\141\x6e\147\x65\x72", $this->translator->trans("\101\x6e\40\145\162\162\157\162\40\150\x61\x73\40\157\x63\143\x75\x72\162\145\144\54\40\x65\x72\x72\x6f\x72\x20\x6d\x65\x73\163\141\147\x65\72\x20\45\x65\x72\x72\157\x72\x4d\145\x73\x73\141\x67\145\45", ["\45\145\x72\162\157\x72\115\x65\163\x73\x61\x67\145\x25" => $e->getMessage()])); } goto de1ea; de1ea: e42f8: goto b9c09; f1d60: if (true === $form->isValid()) { goto c3fbc; } goto E3a6d; aeb30: goto e42f8; goto ed6b8; E3a6d: $this->formErrors = $this->getErrorMessages($form); goto aeb30; ed6b8: c3fbc: goto d24d8; b9c09: } private function handleRemoteBackupGoogleDriveEditForm(Request $request, Form $form) { goto Db0c8; d0f4b: try { goto b9270; b9d1a: $response = $this->redirect($this->generateUrl("\x63\154\160\x5f\x61\144\x6d\151\156\137\x72\x65\155\157\x74\145\137\142\141\143\x6b\165\x70\137\x65\x64\x69\164", ["\x70\x72\x6f\166\151\x64\145\x72" => StorageProvider::GOOGLE_DRIVE])); goto D9b0a; Cebee: $email = $form->get("\145\x6d\x61\151\154")->getData(); goto ed231; D9b0a: return $response; goto d8c20; e9476: $this->configManager->set("\x72\x65\x6d\x6f\164\145\x5f\142\x61\x63\x6b\x75\160\137\146\162\x65\161\165\x65\x6e\x63\171", $frequency); goto ea613; c1b72: $user = $this->getUser(); goto Bedad; Dfc8b: $storageDirectory = trim($form->get("\x73\x74\x6f\x72\141\147\145\104\151\162\x65\x63\164\157\162\171")->getData()); goto eb0c2; Ba65f: EventQueue::addEvent(EventQueue::EVENT_REMOTE_BACKUP_EDIT, $user, $eventData, $request); goto b4300; B0cb3: $excludes = array_map("\x74\x72\151\155", array_filter(explode(PHP_EOL, trim($excludes)))); goto e97bb; d3ebd: if (!(true === empty($serviceAccount))) { goto d3295; } goto b5c7e; E36d7: $rclone->writeCredentialsFile(GoogleDriveConfigTemplate::SERVICE_ACCOUNT_FILE, $serviceAccount); goto Ebc8d; b5c7e: $serviceAccount = $this->configManager->get("\162\x65\x6d\x6f\x74\145\137\x62\141\143\x6b\x75\x70\137\x73\145\162\x76\x69\x63\x65\x5f\141\x63\x63\157\x75\156\x74"); goto e659c; f62b1: $this->configManager->deleteByWildcard("\162\x65\155\157\x74\x65\137\142\x61\x63\x6b\x75\x70\137\x25"); goto Af827; Cf5b6: $rclone = new Rclone(); goto C7843; e659c: d3295: goto Dfc8b; b42f1: $this->configManager->set("\x72\145\x6d\x6f\x74\145\137\x62\141\143\x6b\x75\x70\137\x65\156\141\x62\154\145\144", $remoteBackupEnabled); goto e9476; f2cfd: $rcloneConfigTemplate = new GoogleDriveConfigTemplate(); goto Ea706; C7843: $rclone->writeConfig($rcloneConfig); goto E36d7; ed231: $serviceAccount = $form->get("\163\x65\x72\x76\x69\x63\145\101\143\143\x6f\x75\x6e\x74")->getData(); goto d3ebd; db0a2: $frequency = $form->get("\146\162\x65\161\x75\145\x6e\143\171")->getData(); goto ccb05; e97bb: $excludes = false === empty($excludes) ? json_encode($excludes) : ''; goto f62b1; Bedad: $remoteBackupEnabled = (int) $form->get("\x65\x6e\141\x62\154\145\122\x65\155\x6f\x74\x65\x42\x61\x63\153\x75\x70")->getData(); goto db0a2; Ce388: $this->configManager->set("\x72\x65\155\x6f\164\145\137\142\x61\x63\x6b\x75\x70\137\x72\145\x74\x65\156\164\151\x6f\x6e\137\160\x65\x72\x69\x6f\144", $retentionPeriod); goto Dfb43; A8ba6: $this->configManager->set("\x72\x65\155\157\164\x65\137\x62\x61\x63\x6b\165\x70\x5f\x73\x65\162\166\x69\143\145\x5f\141\143\143\157\165\156\x74", trim($serviceAccount)); goto D861d; ea613: $this->configManager->set("\x72\145\155\x6f\x74\145\x5f\x62\x61\143\153\165\x70\x5f\x65\x78\x65\x63\165\164\151\157\x6e\137\164\x69\155\x65", $executionTime); goto Ce388; ccb05: $executionTime = $form->get("\145\x78\x65\143\x75\x74\151\x6f\156\124\151\155\145")->getData(); goto Ac0a4; Dfb43: $this->configManager->set("\x72\145\155\157\x74\145\x5f\x62\x61\x63\x6b\x75\x70\x5f\x65\155\x61\x69\x6c", $email); goto A8ba6; b9270: $session = $request->getSession(); goto c1b72; Ea706: $rcloneConfigBuilder = new RcloneConfigBuilder($rcloneConfigTemplate); goto e0bab; Af827: $this->configManager->set("\x72\x65\155\157\x74\145\137\142\141\143\x6b\x75\x70\x5f\x73\x74\157\x72\x61\147\x65\137\160\162\x6f\x76\151\x64\145\x72", StorageProvider::GOOGLE_DRIVE); goto b42f1; e0bab: $rcloneConfig = $rcloneConfigBuilder->build(); goto Cf5b6; Ebc8d: $rclone->createCronJob($frequency, $executionTime); goto F5813; D861d: $this->configManager->set("\x72\145\x6d\157\x74\x65\137\x62\x61\143\x6b\x75\160\x5f\163\x74\x6f\x72\141\147\145\x5f\x64\x69\x72\145\143\164\157\x72\x79", $storageDirectory); goto B9db4; eb0c2: $excludes = $form->get("\x65\x78\x63\x6c\x75\144\145\x73")->getData(); goto B0cb3; b4300: $session->getFlashBag()->set("\163\x75\143\143\145\163\163", $this->translator->trans("\x52\145\155\x6f\164\145\40\x42\141\x63\x6b\165\160\40\123\145\x74\x74\151\x6e\147\x73\x20\150\x61\166\x65\40\x62\145\145\156\x20\163\141\166\x65\x64\x2e")); goto b9d1a; Ac0a4: $retentionPeriod = (int) $form->get("\x72\145\x74\145\x6e\x74\151\x6f\156\120\145\162\x69\x6f\x64")->getData(); goto Cebee; B9db4: $this->configManager->set("\x72\145\x6d\x6f\x74\145\x5f\142\x61\x63\153\x75\160\137\145\170\143\x6c\165\x64\145\163", $excludes); goto f2cfd; F5813: $eventData = ["\x73\164\157\162\x61\x67\x65\120\162\157\x76\151\x64\x65\162" => StorageProvider::GOOGLE_DRIVE, "\x72\x65\155\157\x74\145\x42\x61\x63\153\x75\160\105\x6e\141\142\154\145\x64" => $remoteBackupEnabled, "\146\162\x65\161\165\x65\156\143\171" => $frequency, "\145\170\145\x63\x75\x74\x69\157\x6e\x54\x69\155\145" => $executionTime, "\145\55\x61\x6d\151\x6c" => $email, "\x73\x74\157\x72\x61\147\x65\x44\151\162\145\143\x74\157\162\171" => $storageDirectory]; goto Ba65f; d8c20: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\x64\x61\x6e\147\x65\162", $this->translator->trans("\101\156\x20\x65\x72\x72\x6f\162\x20\x68\x61\x73\x20\x6f\143\x63\165\162\162\145\x64\x2c\x20\145\x72\x72\x6f\x72\x20\x6d\145\163\163\x61\147\145\x3a\40\45\x65\x72\x72\157\162\x4d\145\163\x73\x61\x67\x65\x25", ["\45\145\162\x72\x6f\x72\115\x65\163\163\141\x67\145\45" => $e->getMessage()])); } goto C4e75; C4e75: e4cd4: goto c106f; e2513: $this->formErrors = $this->getErrorMessages($form); goto bfe33; ed3f9: f54bb: goto d0f4b; bfe33: goto e4cd4; goto ed3f9; Db0c8: if (true === $form->isValid()) { goto f54bb; } goto e2513; c106f: } private function handleRemoteBackupDropboxEditForm(Request $request, Form $form) { goto a057a; E9e52: f2fac: goto ba384; Eaa5f: goto f2fac; goto B2bab; a2ad8: try { goto d08a9; b4440: $frequency = $form->get("\x66\x72\145\x71\x75\x65\x6e\143\171")->getData(); goto ccfe0; F49fa: $retentionPeriod = (int) $form->get("\x72\145\164\x65\156\x74\x69\x6f\x6e\120\x65\162\151\x6f\144")->getData(); goto ee02c; D9712: $response = $this->redirect($this->generateUrl("\143\154\160\137\141\x64\155\x69\156\137\162\145\155\157\x74\x65\137\142\141\x63\153\165\x70\x5f\x65\x64\151\x74", ["\x70\x72\x6f\166\x69\144\145\x72" => StorageProvider::DROPBOX])); goto B703e; C5efc: $session->getFlashBag()->set("\163\165\143\x63\x65\163\163", $this->translator->trans("\x52\x65\x6d\157\x74\145\40\x42\x61\143\x6b\x75\x70\40\123\x65\164\164\x69\156\147\x73\x20\150\x61\x76\145\40\142\145\x65\x6e\x20\x73\141\166\x65\144\56")); goto D9712; ccfe0: $executionTime = $form->get("\x65\x78\145\x63\165\164\x69\x6f\x6e\124\x69\x6d\x65")->getData(); goto F49fa; c31a2: EventQueue::addEvent(EventQueue::EVENT_REMOTE_BACKUP_EDIT, $user, $eventData, $request); goto C5efc; c0173: $this->configManager->set("\x72\145\x6d\157\x74\145\x5f\142\x61\x63\x6b\x75\x70\137\162\145\x74\145\x6e\164\151\157\x6e\137\x70\x65\162\151\157\144", $retentionPeriod); goto Fa52d; ba74e: $rclone = new Rclone(); goto ad0ee; Da602: $excludes = false === empty($excludes) ? json_encode($excludes) : ''; goto bb595; F922a: $remoteBackupEnabled = (int) $form->get("\145\156\141\x62\154\145\122\x65\x6d\157\164\x65\102\x61\x63\153\165\x70")->getData(); goto b4440; E8098: $this->configManager->set("\162\x65\x6d\157\164\x65\x5f\x62\x61\x63\153\165\160\x5f\x65\x78\x65\x63\165\164\151\157\156\137\164\151\155\x65", $executionTime); goto c0173; F6a5d: $this->configManager->deleteByWildcard("\x72\x65\x6d\157\x74\145\137\142\x61\x63\153\x75\160\x5f\x25"); goto e2f6c; C257f: $this->configManager->set("\162\145\155\157\x74\145\137\142\x61\x63\153\x75\160\x5f\146\x72\x65\x71\x75\145\x6e\x63\x79", $frequency); goto E8098; eb4ca: $excludes = $form->get("\x65\x78\x63\x6c\165\144\x65\x73")->getData(); goto Fdf6b; Fa52d: $this->configManager->set("\x72\145\155\x6f\164\145\x5f\x62\141\143\x6b\x75\160\x5f\163\x74\157\x72\141\x67\145\137\x64\151\x72\x65\143\x74\x6f\x72\171", $storageDirectory); goto F1c68; d08a9: $session = $request->getSession(); goto d9382; ad0ee: $rclone->createCronJob($frequency, $executionTime); goto df626; fd01f: $this->configManager->set("\x72\145\x6d\157\164\145\x5f\x62\x61\143\x6b\x75\x70\137\162\145\146\x72\x65\163\x68\137\x74\157\x6b\145\x6e", $refreshToken); goto ba74e; B703e: return $response; goto C65f3; e2f6c: $this->configManager->set("\162\x65\x6d\x6f\164\x65\x5f\142\x61\x63\153\165\x70\137\163\164\157\x72\141\x67\x65\137\x70\x72\x6f\x76\x69\144\145\x72", StorageProvider::DROPBOX); goto ae8e4; ae8e4: $this->configManager->set("\x72\145\155\x6f\164\x65\137\142\141\143\153\165\160\x5f\145\x6e\x61\142\x6c\x65\x64", $remoteBackupEnabled); goto C257f; df626: $eventData = ["\x73\164\x6f\x72\141\147\x65\x50\162\157\x76\151\144\x65\162" => StorageProvider::DROPBOX, "\162\145\x6d\157\x74\145\102\141\x63\153\x75\x70\105\156\x61\x62\x6c\145\144" => $remoteBackupEnabled, "\146\162\x65\x71\x75\145\156\x63\171" => $frequency, "\145\170\x65\143\165\x74\x69\x6f\156\124\x69\x6d\145" => $executionTime, "\x73\164\x6f\x72\x61\x67\x65\104\151\162\x65\x63\x74\x6f\x72\x79" => $storageDirectory]; goto c31a2; Fdf6b: $excludes = array_map("\164\x72\151\x6d", array_filter(explode(PHP_EOL, trim($excludes)))); goto Da602; bb595: $refreshToken = $this->configManager->get("\162\145\x6d\157\x74\145\x5f\x62\141\143\x6b\165\x70\x5f\x72\145\146\x72\145\x73\150\x5f\164\x6f\x6b\145\156"); goto F6a5d; F1c68: $this->configManager->set("\x72\145\x6d\157\x74\145\137\142\x61\143\153\x75\160\137\x65\170\x63\154\165\144\x65\163", $excludes); goto fd01f; ee02c: $storageDirectory = trim($form->get("\x73\164\157\x72\141\147\x65\x44\x69\x72\x65\x63\164\x6f\x72\x79")->getData()); goto eb4ca; d9382: $user = $this->getUser(); goto F922a; C65f3: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\x64\141\x6e\147\x65\x72", $this->translator->trans("\x41\x6e\x20\x65\162\x72\157\x72\40\x68\141\163\40\157\x63\x63\165\162\x72\x65\144\x2c\x20\145\x72\162\157\162\x20\155\145\x73\x73\141\x67\x65\72\x20\45\x65\162\162\157\162\115\145\163\x73\141\x67\145\x25", ["\x25\x65\x72\162\157\162\x4d\x65\x73\x73\141\x67\x65\x25" => $e->getMessage()])); } goto E9e52; B2bab: E921a: goto a2ad8; a057a: if (true === $form->isValid()) { goto E921a; } goto f4bd4; f4bd4: $this->formErrors = $this->getErrorMessages($form); goto Eaa5f; ba384: } private function handleRemoteBackupSftpEditForm(Request $request, Form $form) { goto A326f; A0d83: $this->formErrors = $this->getErrorMessages($form); goto E90b7; cbc43: Dc42c: goto b53ec; E90b7: goto Dc42c; goto Ad75a; ab90a: try { goto B20ec; c9e8c: if (!(false === empty($password))) { goto fa0f8; } goto cecfe; cd209: $user = trim($form->get("\165\163\145\162")->getData()); goto B3430; df7d7: $excludes = array_map("\x74\x72\151\155", array_filter(explode(PHP_EOL, trim($excludes)))); goto Fb27a; F978b: A0372: goto c9e8c; B3430: $password = trim($form->get("\160\x61\163\x73\x77\x6f\x72\144")->getData()); goto Ba3cd; C33a9: $storageDirectory = trim($form->get("\163\x74\157\x72\x61\147\x65\104\x69\162\145\143\x74\157\x72\x79")->getData()); goto c4be2; E66a4: $rcloneConfigTemplate->setSetting("\x75\163\x65\x72", $user); goto B4970; B20ec: $session = $request->getSession(); goto D9da6; aa9c0: $rclonePasswordObscureCommand = new RclonePasswordObscureCommand(); goto c390e; e25dc: $executionTime = $form->get("\x65\170\145\x63\x75\x74\x69\157\156\x54\x69\x6d\145")->getData(); goto cd1e6; ba39d: $this->configManager->set("\x72\145\155\157\164\x65\x5f\142\x61\x63\153\x75\160\x5f\x65\x78\145\x63\x75\164\151\x6f\156\137\164\151\x6d\145", $executionTime); goto C8ece; Ba8a5: return $response; goto dcfd9; cd1e6: $retentionPeriod = (int) $form->get("\162\145\x74\145\156\x74\x69\x6f\x6e\120\x65\x72\151\157\144")->getData(); goto af275; Edf5e: $commandExecutor->execute($rclonePasswordObscureCommand); goto C64dc; dcf32: $port = $form->get("\x70\x6f\162\164")->getData(); goto C33a9; f4745: $rcloneConfigTemplate->setSetting("\153\x65\x79\137\x66\151\x6c\x65", $keyFile); goto f35e1; D9da6: $currentUser = $this->getUser(); goto E305a; F85f0: $rcloneConfigTemplate = new SftpConfigTemplate(); goto B95a6; D2eed: $this->configManager->set("\x72\x65\x6d\x6f\x74\145\137\142\x61\143\153\165\160\x5f\x66\x72\x65\161\x75\x65\156\x63\171", $frequency); goto ba39d; c4be2: $excludes = $form->get("\x65\170\x63\x6c\x75\x64\145\163")->getData(); goto df7d7; F15fd: $rcloneConfigBuilder = new RcloneConfigBuilder($rcloneConfigTemplate); goto b0a4f; fc3ba: $this->configManager->set("\162\x65\x6d\x6f\164\145\137\142\141\x63\x6b\165\x70\137\145\170\143\x6c\165\144\145\x73", $excludes); goto F85f0; Fa452: $this->configManager->set("\x72\x65\155\157\x74\x65\137\x62\141\x63\x6b\x75\160\137\x73\x74\x6f\162\141\x67\145\137\x70\x72\157\x76\x69\x64\x65\x72", StorageProvider::SFTP); goto F902e; af275: $authenticationMethod = $form->get("\141\165\164\150\x65\156\164\x69\143\x61\164\151\x6f\156\x4d\145\164\x68\x6f\x64")->getData(); goto fc56a; fc56a: $host = trim($form->get("\x68\157\163\164")->getData()); goto cd209; b64b5: EventQueue::addEvent(EventQueue::EVENT_REMOTE_BACKUP_CREATE, $currentUser, $eventData, $request); goto Adbe8; E305a: $remoteBackupEnabled = (int) $form->get("\x65\156\141\x62\x6c\145\122\x65\x6d\157\164\145\x42\141\x63\x6b\x75\160")->getData(); goto ec8c9; B4970: if ("\x70\x61\x73\163\167\x6f\x72\144" == $authenticationMethod) { goto A0372; } goto f4745; Adbe8: $session->getFlashBag()->set("\163\165\143\x63\x65\163\163", $this->translator->trans("\x52\145\155\x6f\x74\145\x20\102\x61\x63\x6b\x75\x70\x20\x53\x65\x74\164\x69\156\x67\163\x20\150\141\x76\145\x20\x62\145\145\x6e\40\163\x61\x76\x65\144\56")); goto b0b87; dbbdf: $rcloneConfigTemplate->setSetting("\x70\157\162\x74", $port); goto F15fd; C8ece: $this->configManager->set("\x72\x65\155\x6f\164\145\137\x62\x61\143\153\165\x70\x5f\x72\145\x74\145\156\x74\151\157\156\x5f\x70\x65\x72\151\x6f\144", $retentionPeriod); goto D7ff0; c1f8d: f7080: goto dbbdf; e2c8c: $rclone->createCronJob($frequency, $executionTime); goto C1801; b0b87: $response = $this->redirect($this->generateUrl("\x63\154\160\x5f\141\x64\x6d\151\x6e\137\162\x65\155\x6f\x74\145\137\142\x61\x63\x6b\165\x70\x5f\145\144\x69\164", ["\160\x72\x6f\x76\151\x64\x65\x72" => StorageProvider::SFTP])); goto Ba8a5; B6817: $this->configManager->deleteByWildcard("\x72\x65\155\x6f\x74\x65\137\x62\x61\x63\x6b\x75\x70\137\45"); goto Fa452; c1ac0: $this->configManager->set("\162\145\x6d\x6f\164\x65\x5f\142\141\x63\x6b\x75\160\137\x75\163\x65\x72", $user); goto Fbd4b; ac75e: $rclone->writeConfig($rcloneConfig); goto e2c8c; a5987: $keyFile = trim($form->get("\x6b\145\x79\x46\151\x6c\x65")->getData()); goto dcf32; ec8c9: $frequency = $form->get("\x66\x72\x65\161\165\145\x6e\143\171")->getData(); goto e25dc; a851c: $this->configManager->set("\162\145\155\x6f\x74\x65\x5f\142\x61\x63\153\165\x70\137\x68\157\x73\x74", $host); goto c1ac0; D7ff0: $this->configManager->set("\x72\145\x6d\x6f\164\145\137\142\141\143\153\x75\160\x5f\x61\165\x74\x68\145\156\x74\x69\x63\141\164\151\x6f\156\x5f\x6d\145\164\x68\x6f\x64", $authenticationMethod); goto a851c; Fb27a: $excludes = false === empty($excludes) ? json_encode($excludes) : ''; goto B6817; Ba3cd: $obscuredPassword = $this->configManager->get("\162\145\x6d\157\x74\x65\137\142\x61\143\153\165\x70\x5f\160\x61\163\x73\x77\157\162\144"); goto a5987; Dc0ff: $rclone = new Rclone(); goto ac75e; F8a47: goto f7080; goto F978b; b0a4f: $rcloneConfig = $rcloneConfigBuilder->build(); goto Dc0ff; Fbd4b: $this->configManager->set("\162\145\155\157\x74\145\137\142\141\x63\153\165\160\137\x70\157\x72\x74", $port); goto f43d4; C1801: $eventData = ["\163\164\157\x72\x61\147\x65\120\x72\157\x76\x69\144\x65\x72" => StorageProvider::SFTP, "\x72\145\x6d\157\x74\x65\102\x61\x63\153\x75\160\105\x6e\x61\142\154\x65\144" => $remoteBackupEnabled, "\146\162\145\161\x75\145\156\x63\171" => $frequency, "\x65\170\145\143\165\x74\151\157\156\x54\151\x6d\145" => $executionTime, "\141\x75\x74\150\x65\x6e\164\151\143\141\164\x69\x6f\x6e\x4d\145\x74\x68\x6f\144" => $authenticationMethod, "\x68\157\x73\164" => $host, "\x75\x73\145\162" => $user, "\160\157\162\164" => $port, "\x73\164\x6f\162\x61\x67\x65\x44\151\162\x65\x63\x74\157\x72\x79" => $storageDirectory]; goto b64b5; c390e: $rclonePasswordObscureCommand->setPassword($password); goto Edf5e; C64dc: $obscuredPassword = $rclonePasswordObscureCommand->getObscuredPassword(); goto E3152; f35e1: $this->configManager->set("\162\x65\x6d\x6f\x74\x65\137\x62\x61\x63\153\x75\160\137\153\145\171\137\x66\x69\x6c\x65", $keyFile); goto F8a47; B95a6: $rcloneConfigTemplate->setSetting("\x68\157\x73\164", $host); goto E66a4; f43d4: $this->configManager->set("\162\x65\155\157\164\145\x5f\x62\x61\143\x6b\165\x70\x5f\x73\x74\x6f\x72\141\x67\x65\x5f\x64\x69\x72\x65\143\164\157\162\171", $storageDirectory); goto fc3ba; F902e: $this->configManager->set("\162\x65\x6d\157\x74\145\137\142\x61\x63\153\165\160\137\145\x6e\141\142\x6c\x65\x64", $remoteBackupEnabled); goto D2eed; Cbe0d: $rcloneConfigTemplate->setSetting("\x70\141\x73\x73", $obscuredPassword); goto a7703; E3152: fa0f8: goto Cbe0d; cecfe: $commandExecutor = new CommandExecutor(); goto aa9c0; a7703: $this->configManager->set("\x72\x65\155\x6f\164\x65\x5f\x62\141\x63\x6b\165\160\137\160\x61\163\x73\167\x6f\162\x64", $obscuredPassword); goto c1f8d; dcfd9: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\x64\x61\x6e\147\x65\x72", $this->translator->trans("\x41\156\x20\x65\162\x72\157\x72\x20\x68\x61\163\x20\157\x63\143\x75\162\x72\145\144\54\x20\145\x72\162\x6f\162\x20\x6d\145\x73\x73\x61\147\145\x3a\x20\x25\x65\x72\x72\x6f\x72\x4d\145\x73\x73\141\147\x65\45", ["\45\x65\162\x72\157\x72\115\145\x73\x73\141\147\145\x25" => $e->getMessage()])); } goto cbc43; A326f: if (true === $form->isValid()) { goto f5e83; } goto A0d83; Ad75a: f5e83: goto ab90a; b53ec: } private function handleRemoteBackupDigitalOceanSpacesEditForm(Request $request, Form $form) { goto e4a23; e4a23: if (true === $form->isValid()) { goto Fd979; } goto fe9d4; Fa053: B3f94: goto F55c9; fe9d4: $this->formErrors = $this->getErrorMessages($form); goto b7270; B1615: try { goto d0be4; ad7e2: $eventData = ["\163\164\x6f\162\x61\x67\145\x50\162\157\166\151\x64\145\162" => StorageProvider::DIGITAL_OCEAN_SPACES, "\162\x65\155\157\164\x65\102\x61\x63\x6b\165\x70\x45\156\x61\142\x6c\x65\x64" => $remoteBackupEnabled, "\146\162\x65\x71\165\145\x6e\143\171" => $frequency, "\x65\x78\x65\143\165\x74\151\157\x6e\124\151\x6d\x65" => $executionTime, "\163\x70\x61\x63\145" => $space, "\163\x70\141\143\145\105\x6e\144\160\x6f\x69\156\164" => $spaceEndpoint, "\x73\x74\x6f\x72\141\147\145\x44\151\162\x65\x63\164\x6f\x72\x79" => $storageDirectory]; goto c3751; f05fc: $this->configManager->set("\162\x65\x6d\157\x74\145\137\142\141\143\x6b\165\x70\x5f\146\162\x65\161\x75\145\156\x63\171", $frequency); goto E01f5; f650c: $excludes = $form->get("\145\170\143\x6c\165\144\x65\x73")->getData(); goto F6894; Ab406: $this->configManager->set("\x72\145\155\x6f\x74\x65\x5f\x62\x61\143\x6b\x75\160\137\163\x70\141\143\x65", $space); goto aaa60; e1d30: $rclone = new Rclone(); goto d1eaf; beaf6: $executionTime = $form->get("\x65\x78\x65\x63\x75\x74\151\x6f\156\x54\151\155\x65")->getData(); goto df207; D2c6a: $this->configManager->set("\x72\x65\155\x6f\164\x65\137\x62\141\x63\153\165\x70\137\163\x74\157\162\141\x67\145\137\160\x72\157\166\151\x64\145\162", StorageProvider::DIGITAL_OCEAN_SPACES); goto b0b7c; B5edb: $space = $form->get("\x73\160\x61\143\145")->getData(); goto a5a8c; C0c90: $storageDirectory = trim($form->get("\x73\164\x6f\162\x61\x67\x65\x44\x69\162\x65\x63\164\157\x72\171")->getData()); goto f650c; ba465: $response = $this->redirect($this->generateUrl("\x63\x6c\x70\x5f\141\144\155\x69\x6e\x5f\x72\145\x6d\157\164\x65\137\142\x61\143\x6b\x75\160\137\x65\144\151\x74", ["\160\x72\x6f\x76\151\x64\145\x72" => StorageProvider::DIGITAL_OCEAN_SPACES])); goto afd39; B6c3e: $user = $this->getUser(); goto De9af; d7fb6: $secretAccessKey = $this->configManager->get("\x72\145\x6d\157\164\145\137\x62\x61\143\153\x75\160\137\163\x65\143\x72\x65\164\137\x61\x63\143\x65\x73\163\137\x6b\145\171"); goto d4f84; d0be4: $session = $request->getSession(); goto B6c3e; c1512: $this->configManager->set("\162\x65\155\x6f\164\x65\137\142\x61\x63\153\x75\160\x5f\x65\x78\x63\x6c\x75\144\145\x73", $excludes); goto B04a2; Bf1b6: $accessKey = $form->get("\141\x63\x63\145\163\x73\113\145\x79")->getData(); goto E3a29; Bb03f: $session->getFlashBag()->set("\x73\x75\x63\x63\145\163\163", $this->translator->trans("\x52\x65\155\x6f\x74\145\40\x42\141\143\153\x75\x70\x20\123\145\164\164\151\x6e\x67\x73\x20\x68\141\166\145\40\x62\x65\145\x6e\x20\163\141\166\x65\x64\56")); goto ba465; Fa767: $frequency = $form->get("\x66\162\x65\161\165\145\156\x63\x79")->getData(); goto beaf6; b0b7c: $this->configManager->set("\x72\145\x6d\157\x74\145\x5f\x62\141\143\153\165\x70\137\145\x6e\x61\142\154\145\144", $remoteBackupEnabled); goto f05fc; B4de7: $rcloneConfigTemplate->setEndpoint($spaceEndpoint); goto Adf99; d4f84: fb15b: goto C0c90; c3751: EventQueue::addEvent(EventQueue::EVENT_REMOTE_BACKUP_EDIT, $user, $eventData, $request); goto Bb03f; Ef19f: $this->configManager->deleteByWildcard("\162\x65\155\x6f\164\x65\137\x62\141\x63\153\165\160\x5f\45"); goto D2c6a; d1eaf: $rclone->writeConfig($rcloneConfig); goto a475e; A4916: $this->configManager->set("\x72\145\155\x6f\x74\145\137\142\141\x63\153\x75\x70\x5f\163\164\x6f\x72\141\147\x65\137\144\151\x72\x65\x63\164\157\162\x79", $storageDirectory); goto c1512; a9038: $this->configManager->set("\x72\x65\x6d\x6f\x74\x65\137\142\141\x63\x6b\x75\160\137\x73\x65\x63\162\x65\x74\137\141\x63\143\x65\x73\163\137\153\145\171", $secretAccessKey); goto A4916; aaa60: $this->configManager->set("\x72\145\x6d\157\x74\145\137\142\x61\143\x6b\x75\x70\x5f\163\160\x61\143\145\x5f\x65\x6e\144\160\x6f\151\x6e\164", $spaceEndpoint); goto B7740; a5a8c: $spaceEndpoint = $form->get("\x73\160\x61\x63\145\105\156\x64\x70\157\151\156\x74")->getData(); goto Bf1b6; De9af: $remoteBackupEnabled = (int) $form->get("\x65\x6e\141\x62\x6c\145\x52\145\155\x6f\x74\145\102\141\x63\x6b\x75\x70")->getData(); goto Fa767; Adf99: $rcloneConfigTemplate->setAccessKeyId($accessKey); goto D0de6; d925f: $rcloneConfigBuilder = new RcloneConfigBuilder($rcloneConfigTemplate); goto e6cf7; efdd5: $this->configManager->set("\162\x65\155\x6f\164\145\137\142\141\143\153\165\x70\x5f\162\145\164\145\x6e\164\x69\157\156\137\x70\x65\x72\151\x6f\x64", $retentionPeriod); goto Ab406; D0de6: $rcloneConfigTemplate->setSecretAccessKey($secretAccessKey); goto d925f; E3a29: $secretAccessKey = $form->get("\163\x65\143\162\x65\x74\x41\143\143\145\x73\163\x4b\x65\x79")->getData(); goto Aa452; Aa452: if (!(true === empty($secretAccessKey))) { goto fb15b; } goto d7fb6; afd39: return $response; goto f48c0; a8842: $excludes = false === empty($excludes) ? json_encode($excludes) : ''; goto Ef19f; df207: $retentionPeriod = (int) $form->get("\162\x65\164\145\x6e\164\x69\x6f\156\x50\x65\x72\151\x6f\144")->getData(); goto B5edb; a475e: $rclone->createCronJob($frequency, $executionTime); goto ad7e2; B7740: $this->configManager->set("\162\x65\x6d\x6f\164\145\x5f\x62\141\x63\x6b\x75\160\x5f\x61\x63\x63\145\x73\163\x5f\x6b\145\x79", $accessKey); goto a9038; B04a2: $rcloneConfigTemplate = new DigitalOceanSpacesConfigTemplate(); goto B4de7; F6894: $excludes = array_map("\164\162\151\155", array_filter(explode(PHP_EOL, trim($excludes)))); goto a8842; E01f5: $this->configManager->set("\x72\145\x6d\157\164\145\137\x62\141\143\x6b\x75\x70\x5f\x65\170\145\143\x75\164\151\157\156\137\x74\151\155\x65", $executionTime); goto efdd5; e6cf7: $rcloneConfig = $rcloneConfigBuilder->build(); goto e1d30; f48c0: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\144\x61\156\147\x65\162", $this->translator->trans("\101\x6e\x20\145\x72\x72\x6f\162\40\x68\141\163\40\x6f\x63\x63\165\162\162\145\x64\x2c\x20\x65\x72\x72\x6f\x72\x20\x6d\145\x73\163\141\147\145\x3a\x20\x25\x65\x72\162\157\x72\x4d\145\163\163\141\x67\x65\45", ["\45\145\x72\x72\x6f\x72\115\145\163\x73\x61\x67\145\45" => $e->getMessage()])); } goto Fa053; b7270: goto B3f94; goto A270e; A270e: Fd979: goto B1615; F55c9: } private function handleRemoteBackupCustomRcloneEditForm(Request $request, Form $form) { goto a198e; a198e: if (true === $form->isValid()) { goto fdcd2; } goto ed68f; bb82c: fdcd2: goto a5835; a5835: try { goto E8ba5; c1af9: return $response; goto Ba889; a35cc: $storageDirectory = trim($form->get("\163\x74\157\162\141\x67\145\104\151\162\x65\x63\164\157\x72\171")->getData()); goto f68fb; Db9b4: $this->configManager->deleteByWildcard("\162\x65\155\x6f\164\145\x5f\142\x61\143\x6b\165\x70\137\x25"); goto ed548; b0daa: $remoteBackupEnabled = (int) $form->get("\x65\156\x61\x62\154\x65\122\x65\x6d\x6f\x74\x65\102\141\x63\x6b\x75\x70")->getData(); goto b0220; a07a6: $this->configManager->set("\162\x65\x6d\x6f\164\145\137\142\141\x63\153\165\160\x5f\145\156\141\142\x6c\x65\144", $remoteBackupEnabled); goto A4a58; a03d0: $rclone = new Rclone(); goto D0caa; C99d0: $session->getFlashBag()->set("\x73\165\x63\143\x65\x73\x73", $this->translator->trans("\x52\x65\155\157\x74\x65\x20\x42\x61\143\153\x75\160\40\x53\145\x74\164\x69\x6e\147\163\40\x68\141\x76\x65\x20\142\x65\145\x6e\x20\x73\141\166\145\144\x2e")); goto B0fef; ed548: $this->configManager->set("\162\145\155\157\164\x65\x5f\x62\141\143\153\165\160\x5f\163\x74\x6f\x72\141\147\145\x5f\160\x72\x6f\x76\151\144\145\x72", StorageProvider::CUSTOM_RCLONE); goto a07a6; f68fb: $excludes = $form->get("\x65\170\143\x6c\165\144\x65\163")->getData(); goto F7000; d9fe4: $user = $this->getUser(); goto b0daa; c2d1a: $this->configManager->set("\x72\x65\155\157\x74\x65\x5f\142\141\143\153\165\x70\x5f\145\x78\x65\143\165\x74\x69\x6f\156\137\164\151\x6d\145", $executionTime); goto E98e0; c98ba: $eventData = ["\x73\x74\x6f\x72\x61\147\x65\120\x72\x6f\166\151\144\x65\162" => StorageProvider::CUSTOM_RCLONE, "\162\x65\155\x6f\164\145\102\141\143\153\x75\160\x45\156\141\142\x6c\145\x64" => $remoteBackupEnabled, "\x66\162\145\x71\165\145\156\x63\171" => $frequency, "\x65\x78\x65\143\165\x74\x69\x6f\x6e\x54\151\155\x65" => $executionTime, "\163\x74\157\x72\141\x67\145\104\151\162\x65\x63\x74\157\x72\x79" => $storageDirectory]; goto e4dae; A4a58: $this->configManager->set("\x72\x65\155\x6f\x74\145\137\142\x61\x63\153\x75\160\137\146\x72\145\161\165\145\x6e\x63\171", $frequency); goto c2d1a; F7000: $excludes = array_map("\164\162\151\155", array_filter(explode(PHP_EOL, trim($excludes)))); goto a791a; b0220: $frequency = $form->get("\146\162\145\161\x75\145\x6e\143\171")->getData(); goto ec2be; a9ba6: $retentionPeriod = (int) $form->get("\x72\x65\164\145\x6e\164\x69\x6f\156\120\x65\162\x69\x6f\x64")->getData(); goto a35cc; ec2be: $executionTime = $form->get("\145\170\x65\x63\x75\164\151\157\x6e\x54\x69\155\145")->getData(); goto a9ba6; D0caa: $rclone->createCronJob($frequency, $executionTime); goto c98ba; E8ba5: $session = $request->getSession(); goto d9fe4; a791a: $excludes = false === empty($excludes) ? json_encode($excludes) : ''; goto Db9b4; f3d57: $this->configManager->set("\x72\145\x6d\x6f\x74\x65\137\x62\141\x63\x6b\165\160\x5f\145\x78\x63\x6c\165\x64\145\163", $excludes); goto a03d0; B0fef: $response = $this->redirect($this->generateUrl("\143\154\x70\x5f\x61\x64\x6d\151\x6e\137\162\145\155\157\164\x65\137\x62\141\x63\153\x75\x70\137\145\144\151\x74", ["\160\162\157\x76\x69\144\x65\x72" => StorageProvider::CUSTOM_RCLONE])); goto c1af9; Ae61b: $this->configManager->set("\162\x65\x6d\x6f\x74\145\137\x62\x61\x63\153\165\160\x5f\163\164\157\162\x61\x67\145\x5f\x64\x69\162\x65\143\164\157\x72\171", $storageDirectory); goto f3d57; e4dae: EventQueue::addEvent(EventQueue::EVENT_REMOTE_BACKUP_EDIT, $user, $eventData, $request); goto C99d0; E98e0: $this->configManager->set("\x72\x65\x6d\157\164\145\137\x62\141\x63\x6b\165\160\x5f\x72\x65\164\x65\x6e\164\151\x6f\x6e\137\x70\x65\162\x69\157\144", $retentionPeriod); goto Ae61b; Ba889: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\x64\x61\156\x67\145\x72", $this->translator->trans("\x41\156\x20\x65\x72\x72\157\x72\x20\x68\x61\163\40\x6f\143\x63\x75\x72\x72\145\144\x2c\40\x65\x72\x72\157\162\40\155\x65\x73\163\141\147\145\72\x20\45\145\x72\x72\x6f\162\x4d\145\x73\163\141\147\145\45", ["\x25\145\162\162\157\162\x4d\x65\x73\x73\x61\x67\145\45" => $e->getMessage()])); } goto C6b4a; C6b4a: ab1da: goto Eddad; ed68f: $this->formErrors = $this->getErrorMessages($form); goto Cff4d; Cff4d: goto ab1da; goto bb82c; Eddad: } public function delete(Request $request) : Response { goto d7ca4; d7784: $response = $this->redirect($this->generateUrl("\143\154\x70\137\x61\144\155\x69\x6e\x5f\x72\x65\155\x6f\164\x65\x5f\142\x61\143\153\165\160")); goto Ceccb; Ceccb: return $response; goto Da6e0; d7ca4: try { goto Df13a; Cdded: $this->configManager->deleteByWildcard("\x72\x65\x6d\x6f\164\x65\137\x62\x61\x63\x6b\x75\160\x5f\45"); goto Cd737; c0296: $session->getFlashBag()->set("\163\x75\143\143\x65\163\163", $this->translator->trans("\122\x65\155\x6f\164\145\x20\x42\x61\x63\x6b\x75\x70\x20\123\145\x74\x74\x69\x6e\x67\163\x20\150\x61\166\145\x20\142\x65\x65\x6e\40\144\x65\x6c\x65\164\x65\144\x2e")); goto eaebf; Df13a: $session = $request->getSession(); goto B3c4d; Cd737: $rclone = new Rclone(); goto B7d95; B7d95: $rclone->deleteCronJob(); goto af890; D42be: EventQueue::addEvent(EventQueue::EVENT_REMOTE_BACKUP_DELETE, $user, [], $request); goto c0296; B3c4d: $user = $this->getUser(); goto Cdded; af890: $rclone->deleteCredentials(); goto D42be; eaebf: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\x64\141\156\147\145\162", $this->translator->trans("\101\156\x20\145\x72\x72\157\162\40\150\141\x73\40\157\143\x63\165\x72\x72\x65\x64\x2c\x20\145\x72\162\x6f\162\x20\155\x65\x73\x73\141\x67\x65\72\x20\45\145\162\x72\x6f\162\115\x65\163\163\x61\147\145\45", ["\x25\x65\x72\162\157\162\115\145\x73\x73\141\x67\x65\x25" => $e->getMessage()])); } goto d7784; Da6e0: } }

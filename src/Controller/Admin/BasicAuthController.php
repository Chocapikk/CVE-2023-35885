<?php
 namespace App\Controller\Admin; use Symfony\Component\HttpFoundation\Request; use Symfony\Component\HttpFoundation\Response; use Symfony\Component\Form\Extension\Core\Type\SubmitType; use Symfony\Component\Form\Form; use App\Controller\Controller; use App\Security\Admin\BasicAuth as AdminBasicAuth; class BasicAuthController extends Controller { public function index(Request $request) : Response { goto F1ede; F1c69: Fe365: goto B5feb; B88a0: $isBasicAuthEnabled = $adminBasicAuth->isEnabled(); goto D689d; B47af: if (!(true === $form->isSubmitted())) { goto ec704; } goto cee2e; f4082: if (!(true === $request->isMethod("\120\117\123\x54"))) { goto B1dc1; } goto Ceecc; F1ede: $form = $this->createBasicAuthForm(); goto f4082; b8da3: if (!(false === is_null($response))) { goto Fe365; } goto d17a4; cee91: B1dc1: goto a8cd9; C3dcb: return $response; goto B0f22; Ceecc: $form->handleRequest($request); goto B47af; a8cd9: $adminBasicAuth = new AdminBasicAuth(); goto B88a0; cee2e: $response = $this->handleBasicAuthForm($request, $form); goto b8da3; B5feb: ec704: goto cee91; d17a4: return $response; goto F1c69; D689d: $response = $this->render("\x41\144\155\151\x6e\57\123\x65\x63\x75\x72\x69\164\x79\57\102\141\163\x69\143\55\x41\165\164\x68\57\151\x6e\x64\145\170\56\x68\x74\x6d\x6c\56\x74\167\x69\147", ["\151\163\102\141\163\x69\x63\x41\165\x74\150\x45\x6e\141\142\154\145\x64" => $isBasicAuthEnabled, "\x66\x6f\162\155" => $form->createView(), "\146\157\162\x6d\x45\162\x72\157\x72\x73" => $this->formErrors]); goto C3dcb; B0f22: } private function createBasicAuthForm() : Form { goto F9642; Dfa2e: $form->add("\163\x75\x62\155\x69\x74", SubmitType::class, ["\141\164\164\x72" => ["\x63\x6c\x61\x73\x73" => "\x62\164\156\x20\x62\164\156\x2d\x62\x6c\x75\145\x20\142\164\156\55\x6c\147"], "\154\x61\x62\145\154" => "\123\141\166\x65"]); goto dde73; dde73: return $form; goto ca656; F9642: $form = $this->createForm("\x41\160\x70\134\106\x6f\x72\x6d\x5c\x41\144\x6d\x69\x6e\x42\141\163\x69\x63\x41\165\x74\150\124\x79\160\x65", [], ["\141\143\x74\x69\x6f\156" => $this->generateUrl("\x63\x6c\x70\137\141\x64\155\x69\156\x5f\x62\x61\163\151\x63\137\141\x75\164\x68"), "\155\145\x74\150\157\x64" => "\120\117\x53\124", "\x61\164\164\x72" => []]); goto Dfa2e; ca656: } private function handleBasicAuthForm(Request $request, Form $form) { goto C4ea8; C4ea8: if (true === $form->isValid()) { goto A4a23; } goto A3f42; Edd6c: try { goto C7e42; df5af: $adminBasicAuth = new AdminBasicAuth(); goto ea3b1; ea3b1: $adminBasicAuth->enable($userName, $password); goto E5fd6; f2530: $response = $this->redirect($this->generateUrl("\x63\x6c\x70\x5f\141\144\155\151\x6e\x5f\x62\x61\163\151\x63\137\141\165\x74\150")); goto c810c; c810c: return $response; goto accb4; de208: $userName = $form->get("\165\163\x65\162\116\x61\155\145")->getData(); goto b3e1a; E5fd6: $session->getFlashBag()->set("\x73\165\x63\143\145\x73\x73", $this->translator->trans("\x42\x61\163\x69\x63\x20\101\x75\x74\150\40\x68\141\163\x20\142\x65\x65\156\40\x65\156\141\x62\154\145\144\56")); goto f2530; C7e42: $session = $request->getSession(); goto de208; b3e1a: $password = $form->get("\160\141\x73\x73\167\157\162\144")->getData(); goto df5af; accb4: } catch (\Exception $e) { $this->logger->exception($e); $session->getFlashBag()->set("\144\x61\156\x67\x65\x72", $this->translator->trans("\x41\156\x20\x65\x72\x72\x6f\162\x20\x68\141\163\x20\x6f\x63\x63\165\x72\x72\145\x64\54\x20\x65\162\x72\x6f\x72\x20\155\x65\x73\x73\141\147\145\x3a\40\45\145\x72\x72\x6f\x72\x4d\145\x73\x73\141\147\145\45", ["\x25\x65\x72\162\157\162\x4d\145\x73\x73\141\x67\145\x25" => $e->getMessage()])); } goto cd9b7; f7e5c: goto a8d41; goto ce8f5; ce8f5: A4a23: goto Edd6c; A3f42: $this->formErrors = $this->getErrorMessages($form); goto f7e5c; cd9b7: a8d41: goto adf8e; adf8e: } public function disable(Request $request) : Response { try { goto B53c7; C1179: if (!(true === $isBasicAuthEnabled)) { goto Eed2a; } goto db094; D1edb: $adminBasicAuth = new AdminBasicAuth(); goto F848f; f2a4c: Eed2a: goto a0399; db094: $adminBasicAuth->disable(); goto f2a4c; F848f: $isBasicAuthEnabled = $adminBasicAuth->isEnabled(); goto C1179; B53c7: $data = []; goto D1edb; a0399: } catch (\Exception $e) { $this->logger->exception($e); $data["\x65\162\x72\157\x72\x4d\x65\x73\x73\141\147\x65"] = $e->getMessage(); } return $this->json($data); } }

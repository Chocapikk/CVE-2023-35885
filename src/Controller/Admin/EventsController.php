<?php
 namespace App\Controller\Admin; use Symfony\Component\HttpFoundation\Request; use Symfony\Component\HttpFoundation\Response; use Doctrine\Common\Collections\Criteria; use App\Controller\Controller; use App\Entity\Manager\EventManager; use App\Util\Time as TimeUtil; use App\Transformer\EventDataTransformer; class EventsController extends Controller { const EVENTS_LIMIT = 100; public function index(Request $request, EventManager $eventManager) : Response { goto Bdcd9; aa794: $endTime->modify("\53\61\40\x68\x6f\165\x72"); goto Fcf4a; Baeb8: if (!count($events)) { goto A660d; } goto A1a4f; E4e78: return $response; goto c2cc4; fbe5a: C3331: goto a7d8f; ec596: $startTimeUtc->setTimezone(new \DateTimeZone("\125\124\103")); goto F3ef0; D3f13: $startTime->modify("\55\x31\62\x20\150\157\x75\162\x73"); goto C3fdf; a7d8f: $startTimeUtc = clone $startTime; goto ec596; d465a: $endTime->setTimestamp($endTimeTimestamp); goto fbe5a; C3fdf: $endTime = new \DateTime("\156\157\167"); goto aa5ef; A1a4f: foreach ($events as $event) { goto Bbe07; cb116: E5284: goto f25da; Bbe07: $eventDataTransformer = new EventDataTransformer($event, $user); goto Aa079; Aa079: $eventDataTransformer->transform(); goto cb116; f25da: } goto ea208; aa5ef: $endTime->setTimezone(new \DateTimeZone($user->getTimezone())); goto aa794; Bdcd9: $user = $this->getUser(); goto ec2d3; c937d: $startTime->setTimezone(new \DateTimeZone($user->getTimezone())); goto D3f13; Fcf4a: $criteria = new Criteria(null, ["\x63\162\x65\x61\x74\145\144\101\164" => Criteria::DESC], null, self::EVENTS_LIMIT); goto e7ec4; e7ec4: if (!(false === empty($startTimeTimestamp) && true === TimeUtil::isValidTimestamp($startTimeTimestamp) && false === empty($endTimeTimestamp) && true === TimeUtil::isValidTimestamp($endTimeTimestamp))) { goto C3331; } goto Cc60d; Dc476: $criteria->where($criteria::expr()->gte("\x63\x72\x65\x61\x74\145\144\101\164", $startTimeUtc)); goto D0357; ea208: F5e70: goto f8abe; Cc60d: $startTime->setTimestamp($startTimeTimestamp); goto d465a; A8eae: $endTimeUtc->setTimezone(new \DateTimeZone("\x55\x54\x43")); goto Dc476; f8abe: A660d: goto a1e58; a1e58: $datetimePicker = ["\x73\164\141\162\x74\124\x69\x6d\145" => $startTime->format("\x59\x2f\155\57\144\40\110\72\x30\60\72\60\x30"), "\145\x6e\x64\x54\x69\x6d\x65" => $endTime->format("\x59\57\x6d\x2f\144\40\x48\x3a\60\x30\72\60\x30")]; goto dbedf; ec2d3: $startTimeTimestamp = $request->get("\x73\x74\141\x72\x74\124\151\155\145"); goto E4a96; D0357: $criteria->andWhere($criteria::expr()->lte("\x63\x72\x65\x61\x74\x65\144\x41\x74", $endTimeUtc)); goto a70e6; dbedf: $response = $this->render("\x41\144\155\151\x6e\x2f\105\x76\145\156\164\57\151\156\144\x65\x78\56\x68\x74\155\154\56\x74\x77\151\147", ["\145\166\145\x6e\164\x73" => $events, "\144\x61\x74\x65\x74\151\155\145\x50\x69\143\153\145\162" => $datetimePicker]); goto E4e78; E4a96: $endTimeTimestamp = $request->get("\x65\156\x64\x54\151\x6d\x65"); goto b1b1b; a70e6: $events = $eventManager->findEventsByCriteria($criteria); goto Baeb8; b1b1b: $startTime = new \DateTime("\x6e\157\x77"); goto c937d; F3ef0: $endTimeUtc = clone $endTime; goto A8eae; c2cc4: } }

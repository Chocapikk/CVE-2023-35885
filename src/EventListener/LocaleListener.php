<?php
 namespace App\EventListener; use Symfony\Component\HttpKernel\Event\RequestEvent; use Symfony\Component\HttpKernel\Event\ResponseEvent; use Symfony\Component\EventDispatcher\EventSubscriberInterface; use Symfony\Component\HttpKernel\KernelEvents; use Symfony\Component\HttpFoundation\Cookie; class LocaleListener implements EventSubscriberInterface { private array $locales = []; private string $defaultLocale; private string $currentLocale; public function __construct(array $locales, $defaultLocale = "\145\156") { $this->locales = $locales; $this->defaultLocale = $defaultLocale; } public function onKernelRequest(RequestEvent $event) : void { goto Cdf59; e1df8: if (!(false === is_null($currentLocale) && true === isset($this->locales[$currentLocale]))) { goto f871d; } goto Bc5e6; a0390: $request->attributes->set("\x6c\x6f\x63\141\x6c\145\163", $this->locales); goto E3de0; a4d09: $request->setLocale($this->currentLocale); goto a0390; b3f21: $this->currentLocale = $locale; goto f7bd8; fc07a: Fa623: goto a4d09; Aa353: if (!(false === is_null($locale) && true === isset($this->locales[$locale]))) { goto a644f; } goto b3f21; e2b94: ebe85: goto Aa353; F22db: goto Fa623; goto e2b94; Cdf59: $request = $event->getRequest(); goto fa548; fa548: $this->currentLocale = $this->defaultLocale; goto Cd427; f7bd8: a644f: goto fc07a; d0129: f871d: goto F22db; Bc5e6: $this->currentLocale = $currentLocale; goto d0129; B6813: $currentLocale = $request->cookies->get("\154\157\143\141\x6c\x65"); goto e1df8; Cd427: if ($locale = $request->get("\154\157\x63\x61\154\145")) { goto ebe85; } goto B6813; E3de0: } public function onKernelResponse(ResponseEvent $event) : void { goto C147d; cd671: $cookie = new Cookie("\x6c\x6f\x63\x61\154\x65", $this->currentLocale); goto B6d04; B6d04: $response->headers->setCookie($cookie); goto cd91b; C147d: $response = $event->getResponse(); goto fc3b4; fc3b4: if (!(true === isset($this->currentLocale) && false === is_null($this->currentLocale))) { goto Ca30b; } goto cd671; cd91b: Ca30b: goto A4bf0; A4bf0: } public static function getSubscribedEvents() : array { return [KernelEvents::REQUEST => [["\157\156\x4b\x65\162\156\145\x6c\122\145\161\x75\145\163\x74", 17]], KernelEvents::RESPONSE => "\157\x6e\113\x65\x72\156\145\x6c\122\145\x73\x70\157\156\163\145"]; } }
